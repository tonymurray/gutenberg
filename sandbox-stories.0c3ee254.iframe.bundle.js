/*! For license information please see sandbox-stories.0c3ee254.iframe.bundle.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkgutenberg=globalThis.webpackChunkgutenberg||[]).push([[3900],{"./packages/compose/build-module/hooks/use-focusable-iframe/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>useFocusableIframe});var _use_ref_effect__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js");function useFocusableIframe(){return(0,_use_ref_effect__WEBPACK_IMPORTED_MODULE_0__.Z)((element=>{const{ownerDocument}=element;if(!ownerDocument)return;const{defaultView}=ownerDocument;if(defaultView)return defaultView.addEventListener("blur",checkFocus),()=>{defaultView.removeEventListener("blur",checkFocus)};function checkFocus(){ownerDocument&&ownerDocument.activeElement===element&&element.focus()}}),[])}},"./packages/compose/build-module/hooks/use-merge-refs/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>useMergeRefs});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function assignRef(ref,value){"function"==typeof ref?ref(value):ref&&ref.hasOwnProperty("current")&&(ref.current=value)}function useMergeRefs(refs){const element=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(),isAttached=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),didElementChange=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1),previousRefs=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),currentRefs=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(refs);return currentRefs.current=refs,(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{!1===didElementChange.current&&!0===isAttached.current&&refs.forEach(((ref,index)=>{const previousRef=previousRefs.current[index];ref!==previousRef&&(assignRef(previousRef,null),assignRef(ref,element.current))})),previousRefs.current=refs}),refs),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{didElementChange.current=!1})),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((value=>{assignRef(element,value),didElementChange.current=!0,isAttached.current=null!==value;const refsToAssign=value?currentRefs.current:previousRefs.current;for(const ref of refsToAssign)assignRef(ref,value)}),[])}},"./packages/compose/build-module/hooks/use-ref-effect/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>useRefEffect});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useRefEffect(callback,dependencies){const cleanup=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((node=>{node?cleanup.current=callback(node):cleanup.current&&cleanup.current()}),dependencies)}},"./node_modules/no-case/dist.es2015/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{B:()=>noCase});function lowerCase(str){return str.toLowerCase()}var DEFAULT_SPLIT_REGEXP=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],DEFAULT_STRIP_REGEXP=/[^A-Z0-9]+/gi;function noCase(input,options){void 0===options&&(options={});for(var _a=options.splitRegexp,splitRegexp=void 0===_a?DEFAULT_SPLIT_REGEXP:_a,_b=options.stripRegexp,stripRegexp=void 0===_b?DEFAULT_STRIP_REGEXP:_b,_c=options.transform,transform=void 0===_c?lowerCase:_c,_d=options.delimiter,delimiter=void 0===_d?" ":_d,result=replace(replace(input,splitRegexp,"$1\0$2"),stripRegexp,"\0"),start=0,end=result.length;"\0"===result.charAt(start);)start++;for(;"\0"===result.charAt(end-1);)end--;return result.slice(start,end).split("\0").map(transform).join(delimiter)}function replace(input,re,value){return re instanceof RegExp?input.replace(re,value):re.reduce((function(input,re){return input.replace(re,value)}),input)}},"./node_modules/param-case/dist.es2015/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>paramCase});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.js"),dist_es2015=__webpack_require__("./node_modules/no-case/dist.es2015/index.js");function paramCase(input,options){return void 0===options&&(options={}),function dotCase(input,options){return void 0===options&&(options={}),(0,dist_es2015.B)(input,(0,tslib_es6.pi)({delimiter:"."},options))}(input,(0,tslib_es6.pi)({delimiter:"-"},options))}},"./node_modules/tslib/tslib.es6.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{pi:()=>__assign,_T:()=>__rest,ev:()=>__spreadArray});var __assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}Object.create;function __spreadArray(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||from)}Object.create},"./packages/components/src/sandbox/stories/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>stories});var react=__webpack_require__("./node_modules/react/index.js"),serialize=__webpack_require__("./packages/element/build-module/serialize.js"),use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),use_focusable_iframe=__webpack_require__("./packages/compose/build-module/hooks/use-focusable-iframe/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const observeAndResizeJS=function(){const{MutationObserver}=window;if(!MutationObserver||!document.body||!window.parent)return;function sendResize(){const clientBoundingRect=document.body.getBoundingClientRect();window.parent.postMessage({action:"resize",width:clientBoundingRect.width,height:clientBoundingRect.height},"*")}function removeViewportStyles(ruleOrNode){ruleOrNode.style&&["width","height","minHeight","maxHeight"].forEach((function(style){/^\\d+(vmin|vmax|vh|vw)$/.test(ruleOrNode.style[style])&&(ruleOrNode.style[style]="")}))}new MutationObserver(sendResize).observe(document.body,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),window.addEventListener("load",sendResize,!0),Array.prototype.forEach.call(document.querySelectorAll("[style]"),removeViewportStyles),Array.prototype.forEach.call(document.styleSheets,(function(stylesheet){Array.prototype.forEach.call(stylesheet.cssRules||stylesheet.rules,removeViewportStyles)})),document.body.style.position="absolute",document.body.style.width="100%",document.body.setAttribute("data-resizable-iframe-connected",""),sendResize(),window.addEventListener("resize",sendResize,!0)};function SandBox({html="",title="",type,styles=[],scripts=[],onFocus}){const ref=(0,react.useRef)(),[width,setWidth]=(0,react.useState)(0),[height,setHeight]=(0,react.useState)(0);function trySandBox(forceRerender=!1){if(!function isFrameAccessible(){try{return!!ref.current?.contentDocument?.body}catch(e){return!1}}())return;const{contentDocument,ownerDocument}=ref.current;if(!forceRerender&&null!==contentDocument?.body.getAttribute("data-resizable-iframe-connected"))return;const htmlDoc=(0,jsx_runtime.jsxs)("html",{lang:ownerDocument.documentElement.lang,className:type,children:[(0,jsx_runtime.jsxs)("head",{children:[(0,jsx_runtime.jsx)("title",{children:title}),(0,jsx_runtime.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n\tbody {\n\t\tmargin: 0;\n\t}\n\thtml,\n\tbody,\n\tbody > div {\n\t\twidth: 100%;\n\t}\n\thtml.wp-has-aspect-ratio,\n\tbody.wp-has-aspect-ratio,\n\tbody.wp-has-aspect-ratio > div,\n\tbody.wp-has-aspect-ratio > div iframe {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\toverflow: hidden; /* If it has an aspect ratio, it shouldn't scroll. */\n\t}\n\tbody > div > * {\n\t\tmargin-top: 0 !important; /* Has to have !important to override inline styles. */\n\t\tmargin-bottom: 0 !important;\n\t}\n"}}),styles.map(((rules,i)=>(0,jsx_runtime.jsx)("style",{dangerouslySetInnerHTML:{__html:rules}},i)))]}),(0,jsx_runtime.jsxs)("body",{"data-resizable-iframe-connected":"data-resizable-iframe-connected",className:type,children:[(0,jsx_runtime.jsx)("div",{dangerouslySetInnerHTML:{__html:html}}),(0,jsx_runtime.jsx)("script",{type:"text/javascript",dangerouslySetInnerHTML:{__html:`(${observeAndResizeJS.toString()})();`}}),scripts.map((src=>(0,jsx_runtime.jsx)("script",{src},src)))]})]});contentDocument.open(),contentDocument.write("<!DOCTYPE html>"+(0,serialize.ZP)(htmlDoc)),contentDocument.close()}return(0,react.useEffect)((()=>{function tryNoForceSandBox(){trySandBox(!1)}function checkMessageForResize(event){const iframe=ref.current;if(!iframe||iframe.contentWindow!==event.source)return;let data=event.data||{};if("string"==typeof data)try{data=JSON.parse(data)}catch(e){}"resize"===data.action&&(setWidth(data.width),setHeight(data.height))}trySandBox();const iframe=ref.current,defaultView=iframe?.ownerDocument?.defaultView;return iframe?.addEventListener("load",tryNoForceSandBox,!1),defaultView?.addEventListener("message",checkMessageForResize),()=>{iframe?.removeEventListener("load",tryNoForceSandBox,!1),defaultView?.addEventListener("message",checkMessageForResize)}}),[]),(0,react.useEffect)((()=>{trySandBox()}),[title,styles,scripts]),(0,react.useEffect)((()=>{trySandBox(!0)}),[html,type]),(0,jsx_runtime.jsx)("iframe",{ref:(0,use_merge_refs.Z)([ref,(0,use_focusable_iframe.Z)()]),title,className:"components-sandbox",sandbox:"allow-scripts allow-same-origin allow-presentation",onFocus,width:Math.ceil(width),height:Math.ceil(height)})}SandBox.displayName="SandBox";const sandbox=SandBox;try{SandBox.displayName="SandBox",SandBox.__docgenInfo={description:'This component provides an isolated environment for arbitrary HTML via iframes.\n\n```jsx\nimport { SandBox } from \'@wordpress/components\';\n\nconst MySandBox = () => (\n\t<SandBox html="<p>Content</p>" title="SandBox" type="embed" />\n);\n```',displayName:"SandBox",props:{html:{defaultValue:{value:""},description:"The HTML to render in the body of the iframe document.",name:"html",required:!1,type:{name:"string"}},title:{defaultValue:{value:""},description:"The `<title>` of the iframe document.",name:"title",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"The CSS class name to apply to the `<html>` and `<body>` elements of the iframe.",name:"type",required:!1,type:{name:"string"}},styles:{defaultValue:{value:"[]"},description:"An array of CSS strings to inject into the `<head>` of the iframe document.",name:"styles",required:!1,type:{name:"string[]"}},scripts:{defaultValue:{value:"[]"},description:"An array of script URLs to inject as `<script>` tags into the bottom of the `<body>` of the iframe document.",name:"scripts",required:!1,type:{name:"string[]"}},onFocus:{defaultValue:null,description:"The `onFocus` callback for the iframe.",name:"onFocus",required:!1,type:{name:"FocusEventHandler<HTMLIFrameElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/sandbox/index.tsx#SandBox"]={docgenInfo:SandBox.__docgenInfo,name:"SandBox",path:"packages/components/src/sandbox/index.tsx#SandBox"})}catch(__react_docgen_typescript_loader_error){}const stories={component:sandbox,title:"Components/SandBox",argTypes:{onFocus:{control:{type:null}}},parameters:{sourceLink:"packages/components/src/sandbox",actions:{argTypesRegex:"^on.*"},controls:{expanded:!0},docs:{source:{state:"open"}}}},Template=args=>(0,jsx_runtime.jsx)(sandbox,{...args});Template.displayName="Template";const Default=Template.bind({});Default.args={html:"<p>Arbitrary HTML content</p>"};try{ComponentMeta.displayName="ComponentMeta",ComponentMeta.__docgenInfo={description:"For the common case where a component's stories are simple components that receives args as props:\n\n```tsx\nexport default { ... } as ComponentMeta<typeof Button>;\n```",displayName:"ComponentMeta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/sandbox/stories/index.tsx#ComponentMeta"]={docgenInfo:ComponentMeta.__docgenInfo,name:"ComponentMeta",path:"packages/components/src/sandbox/stories/index.tsx#ComponentMeta"})}catch(__react_docgen_typescript_loader_error){}},"./node_modules/is-plain-object/dist/is-plain-object.mjs":(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{function isObject(o){return"[object Object]"===Object.prototype.toString.call(o)}function isPlainObject(o){var ctor,prot;return!1!==isObject(o)&&(void 0===(ctor=o.constructor)||!1!==isObject(prot=ctor.prototype)&&!1!==prot.hasOwnProperty("isPrototypeOf"))}__webpack_require__.d(__webpack_exports__,{P:()=>isPlainObject})}}]);