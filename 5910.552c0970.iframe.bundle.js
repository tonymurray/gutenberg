"use strict";(globalThis.webpackChunkgutenberg=globalThis.webpackChunkgutenberg||[]).push([[5910],{"./packages/core-data/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{IO:()=>EntityProvider,h:()=>store,XY:()=>useEntityBlockEditor,U3:()=>useEntityId,Mi:()=>useEntityProp,zk:()=>useEntityRecord,ZH:()=>useEntityRecords,ip:()=>useResourcePermissions});var build_module_actions_namespaceObject={};__webpack_require__.r(build_module_actions_namespaceObject),__webpack_require__.d(build_module_actions_namespaceObject,{__experimentalBatch:()=>__experimentalBatch,__experimentalReceiveCurrentGlobalStylesId:()=>__experimentalReceiveCurrentGlobalStylesId,__experimentalReceiveThemeBaseGlobalStyles:()=>__experimentalReceiveThemeBaseGlobalStyles,__experimentalReceiveThemeGlobalStyleVariations:()=>__experimentalReceiveThemeGlobalStyleVariations,__experimentalSaveSpecifiedEntityEdits:()=>__experimentalSaveSpecifiedEntityEdits,__unstableCreateUndoLevel:()=>__unstableCreateUndoLevel,addEntities:()=>addEntities,deleteEntityRecord:()=>deleteEntityRecord,editEntityRecord:()=>editEntityRecord,receiveAutosaves:()=>receiveAutosaves,receiveCurrentTheme:()=>receiveCurrentTheme,receiveCurrentUser:()=>receiveCurrentUser,receiveEmbedPreview:()=>receiveEmbedPreview,receiveEntityRecords:()=>receiveEntityRecords,receiveNavigationFallbackId:()=>receiveNavigationFallbackId,receiveThemeGlobalStyleRevisions:()=>receiveThemeGlobalStyleRevisions,receiveThemeSupports:()=>receiveThemeSupports,receiveUploadPermissions:()=>receiveUploadPermissions,receiveUserPermission:()=>receiveUserPermission,receiveUserQuery:()=>receiveUserQuery,redo:()=>redo,saveEditedEntityRecord:()=>saveEditedEntityRecord,saveEntityRecord:()=>saveEntityRecord,undo:()=>undo});var build_module_selectors_namespaceObject={};__webpack_require__.r(build_module_selectors_namespaceObject),__webpack_require__.d(build_module_selectors_namespaceObject,{__experimentalGetCurrentGlobalStylesId:()=>__experimentalGetCurrentGlobalStylesId,__experimentalGetCurrentThemeBaseGlobalStyles:()=>__experimentalGetCurrentThemeBaseGlobalStyles,__experimentalGetCurrentThemeGlobalStylesVariations:()=>__experimentalGetCurrentThemeGlobalStylesVariations,__experimentalGetDirtyEntityRecords:()=>__experimentalGetDirtyEntityRecords,__experimentalGetEntitiesBeingSaved:()=>__experimentalGetEntitiesBeingSaved,__experimentalGetEntityRecordNoResolver:()=>__experimentalGetEntityRecordNoResolver,__experimentalGetTemplateForLink:()=>__experimentalGetTemplateForLink,canUser:()=>canUser,canUserEditEntityRecord:()=>canUserEditEntityRecord,getAuthors:()=>getAuthors,getAutosave:()=>getAutosave,getAutosaves:()=>getAutosaves,getBlockPatternCategories:()=>getBlockPatternCategories,getBlockPatterns:()=>getBlockPatterns,getCurrentTheme:()=>getCurrentTheme,getCurrentThemeGlobalStylesRevisions:()=>getCurrentThemeGlobalStylesRevisions,getCurrentUser:()=>getCurrentUser,getEditedEntityRecord:()=>getEditedEntityRecord,getEmbedPreview:()=>getEmbedPreview,getEntitiesByKind:()=>getEntitiesByKind,getEntitiesConfig:()=>getEntitiesConfig,getEntity:()=>getEntity,getEntityConfig:()=>getEntityConfig,getEntityRecord:()=>getEntityRecord,getEntityRecordEdits:()=>getEntityRecordEdits,getEntityRecordNonTransientEdits:()=>getEntityRecordNonTransientEdits,getEntityRecords:()=>getEntityRecords,getLastEntityDeleteError:()=>getLastEntityDeleteError,getLastEntitySaveError:()=>getLastEntitySaveError,getNavigationFallbackId:()=>getNavigationFallbackId,getRawEntityRecord:()=>getRawEntityRecord,getRedoEdit:()=>getRedoEdit,getReferenceByDistinctEdits:()=>getReferenceByDistinctEdits,getThemeSupports:()=>getThemeSupports,getUndoEdit:()=>getUndoEdit,getUserQueryResults:()=>getUserQueryResults,hasEditsForEntityRecord:()=>hasEditsForEntityRecord,hasEntityRecords:()=>hasEntityRecords,hasFetchedAutosaves:()=>hasFetchedAutosaves,hasRedo:()=>hasRedo,hasUndo:()=>hasUndo,isAutosavingEntityRecord:()=>isAutosavingEntityRecord,isDeletingEntityRecord:()=>isDeletingEntityRecord,isPreviewEmbedFallback:()=>isPreviewEmbedFallback,isRequestingEmbedPreview:()=>isRequestingEmbedPreview,isSavingEntityRecord:()=>isSavingEntityRecord});var resolvers_namespaceObject={};__webpack_require__.r(resolvers_namespaceObject),__webpack_require__.d(resolvers_namespaceObject,{__experimentalGetCurrentGlobalStylesId:()=>resolvers_experimentalGetCurrentGlobalStylesId,__experimentalGetCurrentThemeBaseGlobalStyles:()=>resolvers_experimentalGetCurrentThemeBaseGlobalStyles,__experimentalGetCurrentThemeGlobalStylesVariations:()=>resolvers_experimentalGetCurrentThemeGlobalStylesVariations,__experimentalGetTemplateForLink:()=>resolvers_experimentalGetTemplateForLink,canUser:()=>resolvers_canUser,canUserEditEntityRecord:()=>resolvers_canUserEditEntityRecord,getAuthors:()=>resolvers_getAuthors,getAutosave:()=>resolvers_getAutosave,getAutosaves:()=>resolvers_getAutosaves,getBlockPatternCategories:()=>resolvers_getBlockPatternCategories,getBlockPatterns:()=>resolvers_getBlockPatterns,getCurrentTheme:()=>resolvers_getCurrentTheme,getCurrentThemeGlobalStylesRevisions:()=>resolvers_getCurrentThemeGlobalStylesRevisions,getCurrentUser:()=>resolvers_getCurrentUser,getEditedEntityRecord:()=>resolvers_getEditedEntityRecord,getEmbedPreview:()=>resolvers_getEmbedPreview,getEntityRecord:()=>resolvers_getEntityRecord,getEntityRecords:()=>resolvers_getEntityRecords,getNavigationFallbackId:()=>resolvers_getNavigationFallbackId,getRawEntityRecord:()=>resolvers_getRawEntityRecord,getThemeSupports:()=>resolvers_getThemeSupports});var build_module=__webpack_require__("./packages/data/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(es6),compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js");const if_matching_action=isMatch=>reducer=>(state,action)=>void 0===state||isMatch(action)?reducer(state,action):state,replace_action=replacer=>reducer=>(state,action)=>reducer(state,replacer(action));const on_sub_key=actionProperty=>reducer=>(state={},action)=>{const key=action[actionProperty];if(void 0===key)return state;const nextKeyState=reducer(state[key],action);return nextKeyState===state[key]?state:{...state,[key]:nextKeyState}};var dist_es2015=__webpack_require__("./node_modules/capital-case/dist.es2015/index.js"),pascal_case_dist_es2015=__webpack_require__("./node_modules/pascal-case/dist.es2015/index.js"),api_fetch_build_module=__webpack_require__("./packages/api-fetch/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),add_query_args=__webpack_require__("./packages/url/build-module/add-query-args.js"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js");function receiveItems(items,edits){return{type:"RECEIVE_ITEMS",items:Array.isArray(items)?items:[items],persistedEdits:edits}}let maxItems=null;async function defaultProcessor(requests){if(null===maxItems){const preflightResponse=await(0,api_fetch_build_module.Z)({path:"/batch/v1",method:"OPTIONS"});maxItems=preflightResponse.endpoints[0].args.requests.maxItems}const results=[];for(const batchRequests of function chunk(arr,chunkSize){const tmp=[...arr],cache=[];for(;tmp.length;)cache.push(tmp.splice(0,chunkSize));return cache}(requests,maxItems)){const batchResponse=await(0,api_fetch_build_module.Z)({path:"/batch/v1",method:"POST",data:{validation:"require-all-validate",requests:batchRequests.map((request=>({path:request.path,body:request.data,method:request.method,headers:request.headers})))}});let batchResults;batchResults=batchResponse.failed?batchResponse.responses.map((response=>({error:response?.body}))):batchResponse.responses.map((response=>{const result={};return response.status>=200&&response.status<300?result.output=response.body:result.error=response.body,result})),results.push(...batchResults)}return results}function createBatch(processor=defaultProcessor){let lastId=0,queue=[];const pending=new ObservableSet;return{add(inputOrThunk){const id=++lastId;pending.add(id);const add=input=>new Promise(((resolve,reject)=>{queue.push({input,resolve,reject}),pending.delete(id)}));return"function"==typeof inputOrThunk?Promise.resolve(inputOrThunk(add)).finally((()=>{pending.delete(id)})):add(inputOrThunk)},async run(){let results;pending.size&&await new Promise((resolve=>{const unsubscribe=pending.subscribe((()=>{pending.size||(unsubscribe(),resolve(void 0))}))}));try{if(results=await processor(queue.map((({input})=>input))),results.length!==queue.length)throw new Error("run: Array returned by processor must be same size as input array.")}catch(error){for(const{reject}of queue)reject(error);throw error}let isSuccess=!0;return results.forEach(((result,key)=>{const queueItem=queue[key];var _result$output;result?.error?(queueItem?.reject(result.error),isSuccess=!1):queueItem?.resolve(null!==(_result$output=result?.output)&&void 0!==_result$output?_result$output:result)})),queue=[],isSuccess}}}class ObservableSet{constructor(...args){this.set=new Set(...args),this.subscribers=new Set}get size(){return this.set.size}add(value){return this.set.add(value),this.subscribers.forEach((subscriber=>subscriber())),this}delete(value){const isSuccess=this.set.delete(value);return this.subscribers.forEach((subscriber=>subscriber())),isSuccess}subscribe(subscriber){return this.subscribers.add(subscriber),()=>{this.subscribers.delete(subscriber)}}}const STORE_NAME="core";function getUndoEdits(state){return state.undo.list[state.undo.list.length-1+state.undo.offset]}function getRedoEdits(state){return state.undo.list[state.undo.list.length+state.undo.offset]}function receiveUserQuery(queryID,users){return{type:"RECEIVE_USER_QUERY",users:Array.isArray(users)?users:[users],queryID}}function receiveCurrentUser(currentUser){return{type:"RECEIVE_CURRENT_USER",currentUser}}function addEntities(entities){return{type:"ADD_ENTITIES",entities}}function receiveEntityRecords(kind,name,records,query,invalidateCache=!1,edits){let action;return"postType"===kind&&(records=(Array.isArray(records)?records:[records]).map((record=>"auto-draft"===record.status?{...record,title:""}:record))),action=query?function receiveQueriedItems(items,query={},edits){return{...receiveItems(items,edits),query}}(records,query,edits):receiveItems(records,edits),{...action,kind,name,invalidateCache}}function receiveCurrentTheme(currentTheme){return{type:"RECEIVE_CURRENT_THEME",currentTheme}}function __experimentalReceiveCurrentGlobalStylesId(currentGlobalStylesId){return{type:"RECEIVE_CURRENT_GLOBAL_STYLES_ID",id:currentGlobalStylesId}}function __experimentalReceiveThemeBaseGlobalStyles(stylesheet,globalStyles){return{type:"RECEIVE_THEME_GLOBAL_STYLES",stylesheet,globalStyles}}function __experimentalReceiveThemeGlobalStyleVariations(stylesheet,variations){return{type:"RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS",stylesheet,variations}}function receiveThemeSupports(){return(0,deprecated_build_module.Z)("wp.data.dispatch( 'core' ).receiveThemeSupports",{since:"5.9"}),{type:"DO_NOTHING"}}function receiveThemeGlobalStyleRevisions(currentId,revisions){return{type:"RECEIVE_THEME_GLOBAL_STYLE_REVISIONS",currentId,revisions}}function receiveEmbedPreview(url,preview){return{type:"RECEIVE_EMBED_PREVIEW",url,preview}}const deleteEntityRecord=(kind,name,recordId,query,{__unstableFetch=api_fetch_build_module.Z,throwOnError=!1}={})=>async({dispatch})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.kind===kind&&config.name===name));let error,deletedRecord=!1;if(!entityConfig||entityConfig?.__experimentalNoFetch)return;const lock=await dispatch.__unstableAcquireStoreLock(STORE_NAME,["entities","records",kind,name,recordId],{exclusive:!0});try{dispatch({type:"DELETE_ENTITY_RECORD_START",kind,name,recordId});let hasError=!1;try{let path=`${entityConfig.baseURL}/${recordId}`;query&&(path=(0,add_query_args.f)(path,query)),deletedRecord=await __unstableFetch({path,method:"DELETE"}),await dispatch(function removeItems(kind,name,records,invalidateCache=!1){return{type:"REMOVE_ITEMS",itemIds:Array.isArray(records)?records:[records],kind,name,invalidateCache}}(kind,name,recordId,!0))}catch(_error){hasError=!0,error=_error}if(dispatch({type:"DELETE_ENTITY_RECORD_FINISH",kind,name,recordId,error}),hasError&&throwOnError)throw error;return deletedRecord}finally{dispatch.__unstableReleaseStoreLock(lock)}},editEntityRecord=(kind,name,recordId,edits,options={})=>({select,dispatch})=>{const entityConfig=select.getEntityConfig(kind,name);if(!entityConfig)throw new Error(`The entity being edited (${kind}, ${name}) does not have a loaded config.`);const{transientEdits={},mergedEdits={}}=entityConfig,record=select.getRawEntityRecord(kind,name,recordId),editedRecord=select.getEditedEntityRecord(kind,name,recordId),edit={kind,name,recordId,edits:Object.keys(edits).reduce(((acc,key)=>{const recordValue=record[key],editedRecordValue=editedRecord[key],value=mergedEdits[key]?{...editedRecordValue,...edits[key]}:edits[key];return acc[key]=es6_default()(recordValue,value)?void 0:value,acc}),{}),transientEdits};dispatch({type:"EDIT_ENTITY_RECORD",...edit,meta:{undo:!options.undoIgnore&&{...edit,edits:Object.keys(edits).reduce(((acc,key)=>(acc[key]=editedRecord[key],acc)),{})}}})},undo=()=>({select,dispatch})=>{const undoEdit=select((state=>getUndoEdits(state.root)));undoEdit&&dispatch({type:"UNDO",stackedEdits:undoEdit})},redo=()=>({select,dispatch})=>{const redoEdit=select((state=>getRedoEdits(state.root)));redoEdit&&dispatch({type:"REDO",stackedEdits:redoEdit})};function __unstableCreateUndoLevel(){return{type:"CREATE_UNDO_LEVEL"}}const saveEntityRecord=(kind,name,record,{isAutosave=!1,__unstableFetch=api_fetch_build_module.Z,throwOnError=!1}={})=>async({select,resolveSelect,dispatch})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.kind===kind&&config.name===name));if(!entityConfig||entityConfig?.__experimentalNoFetch)return;const entityIdKey=entityConfig.key||DEFAULT_ENTITY_KEY,recordId=record[entityIdKey],lock=await dispatch.__unstableAcquireStoreLock(STORE_NAME,["entities","records",kind,name,recordId||(0,v4.Z)()],{exclusive:!0});try{for(const[key,value]of Object.entries(record))if("function"==typeof value){const evaluatedValue=value(select.getEditedEntityRecord(kind,name,recordId));dispatch.editEntityRecord(kind,name,recordId,{[key]:evaluatedValue},{undoIgnore:!0}),record[key]=evaluatedValue}let updatedRecord,error;dispatch({type:"SAVE_ENTITY_RECORD_START",kind,name,recordId,isAutosave});let hasError=!1;try{const path=`${entityConfig.baseURL}${recordId?"/"+recordId:""}`,persistedRecord=select.getRawEntityRecord(kind,name,recordId);if(isAutosave){const currentUser=select.getCurrentUser(),currentUserId=currentUser?currentUser.id:void 0,autosavePost=await resolveSelect.getAutosave(persistedRecord.type,persistedRecord.id,currentUserId);let data={...persistedRecord,...autosavePost,...record};if(data=Object.keys(data).reduce(((acc,key)=>(["title","excerpt","content"].includes(key)&&(acc[key]=data[key]),acc)),{status:"auto-draft"===data.status?"draft":data.status}),updatedRecord=await __unstableFetch({path:`${path}/autosaves`,method:"POST",data}),persistedRecord.id===updatedRecord.id){let newRecord={...persistedRecord,...data,...updatedRecord};newRecord=Object.keys(newRecord).reduce(((acc,key)=>(["title","excerpt","content"].includes(key)?acc[key]=newRecord[key]:acc[key]="status"===key?"auto-draft"===persistedRecord.status&&"draft"===newRecord.status?newRecord.status:persistedRecord.status:persistedRecord[key],acc)),{}),dispatch.receiveEntityRecords(kind,name,newRecord,void 0,!0)}else dispatch.receiveAutosaves(persistedRecord.id,updatedRecord)}else{let edits=record;entityConfig.__unstablePrePersist&&(edits={...edits,...entityConfig.__unstablePrePersist(persistedRecord,edits)}),updatedRecord=await __unstableFetch({path,method:recordId?"PUT":"POST",data:edits}),dispatch.receiveEntityRecords(kind,name,updatedRecord,void 0,!0,edits)}}catch(_error){hasError=!0,error=_error}if(dispatch({type:"SAVE_ENTITY_RECORD_FINISH",kind,name,recordId,error,isAutosave}),hasError&&throwOnError)throw error;return updatedRecord}finally{dispatch.__unstableReleaseStoreLock(lock)}},__experimentalBatch=requests=>async({dispatch})=>{const batch=createBatch(),api={saveEntityRecord:(kind,name,record,options)=>batch.add((add=>dispatch.saveEntityRecord(kind,name,record,{...options,__unstableFetch:add}))),saveEditedEntityRecord:(kind,name,recordId,options)=>batch.add((add=>dispatch.saveEditedEntityRecord(kind,name,recordId,{...options,__unstableFetch:add}))),deleteEntityRecord:(kind,name,recordId,query,options)=>batch.add((add=>dispatch.deleteEntityRecord(kind,name,recordId,query,{...options,__unstableFetch:add})))},resultPromises=requests.map((request=>request(api))),[,...results]=await Promise.all([batch.run(),...resultPromises]);return results},saveEditedEntityRecord=(kind,name,recordId,options)=>async({select,dispatch})=>{if(!select.hasEditsForEntityRecord(kind,name,recordId))return;const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.kind===kind&&config.name===name));if(!entityConfig)return;const entityIdKey=entityConfig.key||DEFAULT_ENTITY_KEY,edits=select.getEntityRecordNonTransientEdits(kind,name,recordId),record={[entityIdKey]:recordId,...edits};return await dispatch.saveEntityRecord(kind,name,record,options)},__experimentalSaveSpecifiedEntityEdits=(kind,name,recordId,itemsToSave,options)=>async({select,dispatch})=>{if(!select.hasEditsForEntityRecord(kind,name,recordId))return;const edits=select.getEntityRecordNonTransientEdits(kind,name,recordId),editsToSave={};for(const edit in edits)itemsToSave.some((item=>item===edit))&&(editsToSave[edit]=edits[edit]);return await dispatch.saveEntityRecord(kind,name,editsToSave,options)};function receiveUploadPermissions(hasUploadPermissions){return(0,deprecated_build_module.Z)("wp.data.dispatch( 'core' ).receiveUploadPermissions",{since:"5.9",alternative:"receiveUserPermission"}),receiveUserPermission("create/media",hasUploadPermissions)}function receiveUserPermission(key,isAllowed){return{type:"RECEIVE_USER_PERMISSION",key,isAllowed}}function receiveAutosaves(postId,autosaves){return{type:"RECEIVE_AUTOSAVES",postId,autosaves:Array.isArray(autosaves)?autosaves:[autosaves]}}function receiveNavigationFallbackId(fallbackId){return{type:"RECEIVE_NAVIGATION_FALLBACK_ID",fallbackId}}const DEFAULT_ENTITY_KEY="id",POST_RAW_ATTRIBUTES=["title","excerpt","content"],rootEntitiesConfig=[{label:(0,i18n_build_module.__)("Base"),kind:"root",name:"__unstableBase",baseURL:"/",baseURLParams:{_fields:["description","gmt_offset","home","name","site_icon","site_icon_url","site_logo","timezone_string","url"].join(",")}},{label:(0,i18n_build_module.__)("Site"),name:"site",kind:"root",baseURL:"/wp/v2/settings",getTitle:record=>{var _record$title;return null!==(_record$title=record?.title)&&void 0!==_record$title?_record$title:(0,i18n_build_module.__)("Site Title")}},{label:(0,i18n_build_module.__)("Post Type"),name:"postType",kind:"root",key:"slug",baseURL:"/wp/v2/types",baseURLParams:{context:"edit"}},{name:"media",kind:"root",baseURL:"/wp/v2/media",baseURLParams:{context:"edit"},plural:"mediaItems",label:(0,i18n_build_module.__)("Media"),rawAttributes:["caption","title","description"]},{name:"taxonomy",kind:"root",key:"slug",baseURL:"/wp/v2/taxonomies",baseURLParams:{context:"edit"},plural:"taxonomies",label:(0,i18n_build_module.__)("Taxonomy")},{name:"sidebar",kind:"root",baseURL:"/wp/v2/sidebars",baseURLParams:{context:"edit"},plural:"sidebars",transientEdits:{blocks:!0},label:(0,i18n_build_module.__)("Widget areas")},{name:"widget",kind:"root",baseURL:"/wp/v2/widgets",baseURLParams:{context:"edit"},plural:"widgets",transientEdits:{blocks:!0},label:(0,i18n_build_module.__)("Widgets")},{name:"widgetType",kind:"root",baseURL:"/wp/v2/widget-types",baseURLParams:{context:"edit"},plural:"widgetTypes",label:(0,i18n_build_module.__)("Widget types")},{label:(0,i18n_build_module.__)("User"),name:"user",kind:"root",baseURL:"/wp/v2/users",baseURLParams:{context:"edit"},plural:"users"},{name:"comment",kind:"root",baseURL:"/wp/v2/comments",baseURLParams:{context:"edit"},plural:"comments",label:(0,i18n_build_module.__)("Comment")},{name:"menu",kind:"root",baseURL:"/wp/v2/menus",baseURLParams:{context:"edit"},plural:"menus",label:(0,i18n_build_module.__)("Menu")},{name:"menuItem",kind:"root",baseURL:"/wp/v2/menu-items",baseURLParams:{context:"edit"},plural:"menuItems",label:(0,i18n_build_module.__)("Menu Item"),rawAttributes:["title"]},{name:"menuLocation",kind:"root",baseURL:"/wp/v2/menu-locations",baseURLParams:{context:"edit"},plural:"menuLocations",label:(0,i18n_build_module.__)("Menu Location"),key:"name"},{label:(0,i18n_build_module.__)("Global Styles"),name:"globalStyles",kind:"root",baseURL:"/wp/v2/global-styles",baseURLParams:{context:"edit"},plural:"globalStylesVariations",getTitle:record=>record?.title?.rendered||record?.title},{label:(0,i18n_build_module.__)("Themes"),name:"theme",kind:"root",baseURL:"/wp/v2/themes",baseURLParams:{context:"edit"},key:"stylesheet"},{label:(0,i18n_build_module.__)("Plugins"),name:"plugin",kind:"root",baseURL:"/wp/v2/plugins",baseURLParams:{context:"edit"},key:"plugin"}],additionalEntityConfigLoaders=[{kind:"postType",loadEntities:async function loadPostTypeEntities(){const postTypes=await(0,api_fetch_build_module.Z)({path:"/wp/v2/types?context=view"});return Object.entries(null!=postTypes?postTypes:{}).map((([name,postType])=>{var _postType$rest_namesp;const isTemplate=["wp_template","wp_template_part"].includes(name);return{kind:"postType",baseURL:`/${null!==(_postType$rest_namesp=postType?.rest_namespace)&&void 0!==_postType$rest_namesp?_postType$rest_namesp:"wp/v2"}/${postType.rest_base}`,baseURLParams:{context:"edit"},name,label:postType.name,transientEdits:{blocks:!0,selection:!0},mergedEdits:{meta:!0},rawAttributes:POST_RAW_ATTRIBUTES,getTitle:record=>{var _record$slug;return record?.title?.rendered||record?.title||(isTemplate?(0,dist_es2015.I)(null!==(_record$slug=record.slug)&&void 0!==_record$slug?_record$slug:""):String(record.id))},__unstablePrePersist:isTemplate?void 0:prePersistPostType,__unstable_rest_base:postType.rest_base}}))}},{kind:"taxonomy",loadEntities:async function loadTaxonomyEntities(){const taxonomies=await(0,api_fetch_build_module.Z)({path:"/wp/v2/taxonomies?context=view"});return Object.entries(null!=taxonomies?taxonomies:{}).map((([name,taxonomy])=>{var _taxonomy$rest_namesp;return{kind:"taxonomy",baseURL:`/${null!==(_taxonomy$rest_namesp=taxonomy?.rest_namespace)&&void 0!==_taxonomy$rest_namesp?_taxonomy$rest_namesp:"wp/v2"}/${taxonomy.rest_base}`,baseURLParams:{context:"edit"},name,label:taxonomy.name}}))}}],prePersistPostType=(persistedRecord,edits)=>{const newEdits={};return"auto-draft"===persistedRecord?.status&&(edits.status||newEdits.status||(newEdits.status="draft"),edits.title&&"Auto Draft"!==edits.title||newEdits.title||persistedRecord?.title&&"Auto Draft"!==persistedRecord?.title||(newEdits.title="")),newEdits};const getMethodName=(kind,name,prefix="get",usePlural=!1)=>{const entityConfig=rootEntitiesConfig.find((config=>config.kind===kind&&config.name===name)),kindPrefix="root"===kind?"":(0,pascal_case_dist_es2015.Ho)(kind),nameSuffix=(0,pascal_case_dist_es2015.Ho)(name)+(usePlural?"s":"");return`${prefix}${kindPrefix}${usePlural&&"plural"in entityConfig&&entityConfig?.plural?(0,pascal_case_dist_es2015.Ho)(entityConfig.plural):nameSuffix}`},getOrLoadEntitiesConfig=kind=>async({select,dispatch})=>{let configs=select.getEntitiesConfig(kind);if(configs&&0!==configs.length)return configs;const loader=additionalEntityConfigLoaders.find((l=>l.kind===kind));return loader?(configs=await loader.loadEntities(),dispatch(addEntities(configs)),configs):[]};const get_normalized_comma_separable=function getNormalizedCommaSeparable(value){return"string"==typeof value?value.split(","):Array.isArray(value)?value:null};const get_query_parts=function withWeakMapCache(fn){const cache=new WeakMap;return key=>{let value;return cache.has(key)?value=cache.get(key):(value=fn(key),null!==key&&"object"==typeof key&&cache.set(key,value)),value}}((function getQueryParts(query){const parts={stableKey:"",page:1,perPage:10,fields:null,include:null,context:"default"},keys=Object.keys(query).sort();for(let i=0;i<keys.length;i++){const key=keys[i];let value=query[key];switch(key){case"page":parts[key]=Number(value);break;case"per_page":parts.perPage=Number(value);break;case"context":parts.context=value;break;default:var _getNormalizedCommaSe,_getNormalizedCommaSe2;if("_fields"===key)parts.fields=null!==(_getNormalizedCommaSe=get_normalized_comma_separable(value))&&void 0!==_getNormalizedCommaSe?_getNormalizedCommaSe:[],value=parts.fields.join();if("include"===key)"number"==typeof value&&(value=value.toString()),parts.include=(null!==(_getNormalizedCommaSe2=get_normalized_comma_separable(value))&&void 0!==_getNormalizedCommaSe2?_getNormalizedCommaSe2:[]).map(Number),value=parts.include.join();parts.stableKey+=(parts.stableKey?"&":"")+(0,add_query_args.f)("",{[key]:value}).slice(1)}}return parts}));function getContextFromAction(action){const{query}=action;if(!query)return"default";return get_query_parts(query).context}function removeEntitiesById(entities,ids){return Object.fromEntries(Object.entries(entities).filter((([id])=>!ids.some((itemId=>Number.isInteger(itemId)?itemId===+id:itemId===id)))))}const receiveQueries=(0,compose.Z)([if_matching_action((action=>"query"in action)),replace_action((action=>action.query?{...action,...get_query_parts(action.query)}:action)),on_sub_key("context"),on_sub_key("stableKey")])(((state=null,action)=>{const{type,page,perPage,key=DEFAULT_ENTITY_KEY}=action;return"RECEIVE_ITEMS"!==type?state:function getMergedItemIds(itemIds,nextItemIds,page,perPage){var _itemIds$length;if(1===page&&-1===perPage)return nextItemIds;const nextItemIdsStartIndex=(page-1)*perPage,size=Math.max(null!==(_itemIds$length=itemIds?.length)&&void 0!==_itemIds$length?_itemIds$length:0,nextItemIdsStartIndex+nextItemIds.length),mergedItemIds=new Array(size);for(let i=0;i<size;i++){const isInNextItemsRange=i>=nextItemIdsStartIndex&&i<nextItemIdsStartIndex+nextItemIds.length;mergedItemIds[i]=isInNextItemsRange?nextItemIds[i-nextItemIdsStartIndex]:itemIds?.[i]}return mergedItemIds}(state||[],action.items.map((item=>item[key])),page,perPage)})),reducer=(0,build_module.UY)({items:function items(state={},action){switch(action.type){case"RECEIVE_ITEMS":{const context=getContextFromAction(action),key=action.key||DEFAULT_ENTITY_KEY;return{...state,[context]:{...state[context],...action.items.reduce(((accumulator,value)=>{const itemId=value[key];return accumulator[itemId]=function conservativeMapItem(item,nextItem){if(!item)return nextItem;let hasChanges=!1;const result={};for(const key in nextItem)es6_default()(item[key],nextItem[key])?result[key]=item[key]:(hasChanges=!0,result[key]=nextItem[key]);if(!hasChanges)return item;for(const key in item)result.hasOwnProperty(key)||(result[key]=item[key]);return result}(state?.[context]?.[itemId],value),accumulator}),{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(state).map((([itemId,contextState])=>[itemId,removeEntitiesById(contextState,action.itemIds)])))}return state},itemIsComplete:function itemIsComplete(state={},action){switch(action.type){case"RECEIVE_ITEMS":{const context=getContextFromAction(action),{query,key=DEFAULT_ENTITY_KEY}=action,queryParts=query?get_query_parts(query):{},isCompleteQuery=!query||!Array.isArray(queryParts.fields);return{...state,[context]:{...state[context],...action.items.reduce(((result,item)=>{const itemId=item[key];return result[itemId]=state?.[context]?.[itemId]||isCompleteQuery,result}),{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(state).map((([itemId,contextState])=>[itemId,removeEntitiesById(contextState,action.itemIds)])))}return state},queries:(state={},action)=>{switch(action.type){case"RECEIVE_ITEMS":return receiveQueries(state,action);case"REMOVE_ITEMS":const removedItems=action.itemIds.reduce(((result,itemId)=>(result[itemId]=!0,result)),{});return Object.fromEntries(Object.entries(state).map((([queryGroup,contextQueries])=>[queryGroup,Object.fromEntries(Object.entries(contextQueries).map((([query,queryItems])=>[query,queryItems.filter((queryId=>!removedItems[queryId]))])))])));default:return state}}});const withMultiEntityRecordEdits=reducer=>(state,action)=>{if("UNDO"===action.type||"REDO"===action.type){const{stackedEdits}=action;let newState=state;return stackedEdits.forEach((({kind,name,recordId,property,from,to})=>{newState=reducer(newState,{type:"EDIT_ENTITY_RECORD",kind,name,recordId,edits:{[property]:"UNDO"===action.type?from:to}})})),newState}return reducer(state,action)};function entity(entityConfig){return(0,compose.Z)([withMultiEntityRecordEdits,if_matching_action((action=>action.name&&action.kind&&action.name===entityConfig.name&&action.kind===entityConfig.kind)),replace_action((action=>({...action,key:entityConfig.key||DEFAULT_ENTITY_KEY})))])((0,build_module.UY)({queriedData:reducer,edits:(state={},action)=>{var _action$query$context;switch(action.type){case"RECEIVE_ITEMS":if("default"!==(null!==(_action$query$context=action?.query?.context)&&void 0!==_action$query$context?_action$query$context:"default"))return state;const nextState={...state};for(const record of action.items){const recordId=record[action.key],edits=nextState[recordId];if(!edits)continue;const nextEdits=Object.keys(edits).reduce(((acc,key)=>{var _record$key$raw;return es6_default()(edits[key],null!==(_record$key$raw=record[key]?.raw)&&void 0!==_record$key$raw?_record$key$raw:record[key])||action.persistedEdits&&es6_default()(edits[key],action.persistedEdits[key])||(acc[key]=edits[key]),acc}),{});Object.keys(nextEdits).length?nextState[recordId]=nextEdits:delete nextState[recordId]}return nextState;case"EDIT_ENTITY_RECORD":const nextEdits={...state[action.recordId],...action.edits};return Object.keys(nextEdits).forEach((key=>{void 0===nextEdits[key]&&delete nextEdits[key]})),{...state,[action.recordId]:nextEdits}}return state},saving:(state={},action)=>{switch(action.type){case"SAVE_ENTITY_RECORD_START":case"SAVE_ENTITY_RECORD_FINISH":return{...state,[action.recordId]:{pending:"SAVE_ENTITY_RECORD_START"===action.type,error:action.error,isAutosave:action.isAutosave}}}return state},deleting:(state={},action)=>{switch(action.type){case"DELETE_ENTITY_RECORD_START":case"DELETE_ENTITY_RECORD_FINISH":return{...state,[action.recordId]:{pending:"DELETE_ENTITY_RECORD_START"===action.type,error:action.error}}}return state}}))}const UNDO_INITIAL_STATE={list:[],offset:0};const build_module_reducer=(0,build_module.UY)({terms:function terms(state={},action){return"RECEIVE_TERMS"===action.type?{...state,[action.taxonomy]:action.terms}:state},users:function users(state={byId:{},queries:{}},action){return"RECEIVE_USER_QUERY"===action.type?{byId:{...state.byId,...action.users.reduce(((newUsers,user)=>({...newUsers,[user.id]:user})),{})},queries:{...state.queries,[action.queryID]:action.users.map((user=>user.id))}}:state},currentTheme:function currentTheme(state=void 0,action){return"RECEIVE_CURRENT_THEME"===action.type?action.currentTheme.stylesheet:state},currentGlobalStylesId:function currentGlobalStylesId(state=void 0,action){return"RECEIVE_CURRENT_GLOBAL_STYLES_ID"===action.type?action.id:state},currentUser:function currentUser(state={},action){return"RECEIVE_CURRENT_USER"===action.type?action.currentUser:state},themeGlobalStyleVariations:function themeGlobalStyleVariations(state={},action){return"RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS"===action.type?{...state,[action.stylesheet]:action.variations}:state},themeBaseGlobalStyles:function themeBaseGlobalStyles(state={},action){return"RECEIVE_THEME_GLOBAL_STYLES"===action.type?{...state,[action.stylesheet]:action.globalStyles}:state},themeGlobalStyleRevisions:function themeGlobalStyleRevisions(state={},action){return"RECEIVE_THEME_GLOBAL_STYLE_REVISIONS"===action.type?{...state,[action.currentId]:action.revisions}:state},taxonomies:function taxonomies(state=[],action){return"RECEIVE_TAXONOMIES"===action.type?action.taxonomies:state},entities:(state={},action)=>{const newConfig=function entitiesConfig(state=rootEntitiesConfig,action){return"ADD_ENTITIES"===action.type?[...state,...action.entities]:state}(state.config,action);let entitiesDataReducer=state.reducer;if(!entitiesDataReducer||newConfig!==state.config){const entitiesByKind=newConfig.reduce(((acc,record)=>{const{kind}=record;return acc[kind]||(acc[kind]=[]),acc[kind].push(record),acc}),{});entitiesDataReducer=(0,build_module.UY)(Object.entries(entitiesByKind).reduce(((memo,[kind,subEntities])=>{const kindReducer=(0,build_module.UY)(subEntities.reduce(((kindMemo,entityConfig)=>({...kindMemo,[entityConfig.name]:entity(entityConfig)})),{}));return memo[kind]=kindReducer,memo}),{}))}const newData=entitiesDataReducer(state.records,action);return newData===state.records&&newConfig===state.config&&entitiesDataReducer===state.reducer?state:{reducer:entitiesDataReducer,records:newData,config:newConfig}},undo:function reducer_undo(state=UNDO_INITIAL_STATE,action){const omitPendingRedos=currentState=>({...currentState,list:currentState.list.slice(0,currentState.offset||void 0),offset:0}),appendCachedEditsToLastUndo=currentState=>{if(!currentState.cache)return currentState;let nextState={...currentState,list:[...currentState.list]};nextState=omitPendingRedos(nextState);const previousUndoState=nextState.list.pop(),updatedUndoState=currentState.cache.reduce(appendEditToStack,previousUndoState);return nextState.list.push(updatedUndoState),{...nextState,cache:void 0}},appendEditToStack=(stack=[],{kind,name,recordId,property,from,to})=>{const existingEditIndex=stack?.findIndex((({kind:k,name:n,recordId:r,property:p})=>k===kind&&n===name&&r===recordId&&p===property)),nextStack=[...stack];return-1!==existingEditIndex?nextStack[existingEditIndex]={...nextStack[existingEditIndex],to}:nextStack.push({kind,name,recordId,property,from,to}),nextStack};switch(action.type){case"CREATE_UNDO_LEVEL":return appendCachedEditsToLastUndo(state);case"UNDO":case"REDO":return{...appendCachedEditsToLastUndo(state),offset:state.offset+("UNDO"===action.type?-1:1)};case"EDIT_ENTITY_RECORD":{if(!action.meta.undo)return state;const isCachedChange=Object.keys(action.edits).every((key=>action.transientEdits[key])),edits=Object.keys(action.edits).map((key=>({kind:action.kind,name:action.name,recordId:action.recordId,property:key,from:action.meta.undo.edits[key],to:action.edits[key]})));if(isCachedChange)return{...state,cache:edits.reduce(appendEditToStack,state.cache)};let nextState=omitPendingRedos(state);nextState=appendCachedEditsToLastUndo(nextState),nextState={...nextState,list:[...nextState.list]};const comparisonUndoEdits=Object.values(action.meta.undo.edits).filter((edit=>"function"!=typeof edit)),comparisonEdits=Object.values(action.edits).filter((edit=>"function"!=typeof edit));return(0,is_shallow_equal_build_module.ZP)(comparisonUndoEdits,comparisonEdits)||nextState.list.push(edits),nextState}}return state},embedPreviews:function embedPreviews(state={},action){if("RECEIVE_EMBED_PREVIEW"===action.type){const{url,preview}=action;return{...state,[url]:preview}}return state},userPermissions:function userPermissions(state={},action){return"RECEIVE_USER_PERMISSION"===action.type?{...state,[action.key]:action.isAllowed}:state},autosaves:function autosaves(state={},action){if("RECEIVE_AUTOSAVES"===action.type){const{postId,autosaves:autosavesData}=action;return{...state,[postId]:autosavesData}}return state},blockPatterns:function blockPatterns(state=[],action){return"RECEIVE_BLOCK_PATTERNS"===action.type?action.patterns:state},blockPatternCategories:function blockPatternCategories(state=[],action){return"RECEIVE_BLOCK_PATTERN_CATEGORIES"===action.type?action.categories:state},navigationFallbackId:function navigationFallbackId(state=null,action){return"RECEIVE_NAVIGATION_FALLBACK_ID"===action.type?action.fallbackId:state}});var rememo=__webpack_require__("./node_modules/rememo/rememo.js"),factory=__webpack_require__("./packages/data/build-module/factory.js"),equivalent_key_map=__webpack_require__("./node_modules/equivalent-key-map/equivalent-key-map.js"),equivalent_key_map_default=__webpack_require__.n(equivalent_key_map);function setNestedValue(object,path,value){return object&&"object"==typeof object?(path.reduce(((acc,key,idx)=>(void 0===acc[key]&&(Number.isInteger(path[idx+1])?acc[key]=[]:acc[key]={}),idx===path.length-1&&(acc[key]=value),acc[key])),object),object):object}const queriedItemsCacheByState=new WeakMap;const getQueriedItems=(0,rememo.Z)(((state,query={})=>{let queriedItemsCache=queriedItemsCacheByState.get(state);if(queriedItemsCache){const queriedItems=queriedItemsCache.get(query);if(void 0!==queriedItems)return queriedItems}else queriedItemsCache=new(equivalent_key_map_default()),queriedItemsCacheByState.set(state,queriedItemsCache);const items=function getQueriedItemsUncached(state,query){const{stableKey,page,perPage,include,fields,context}=get_query_parts(query);let itemIds;if(state.queries?.[context]?.[stableKey]&&(itemIds=state.queries[context][stableKey]),!itemIds)return null;const startOffset=-1===perPage?0:(page-1)*perPage,endOffset=-1===perPage?itemIds.length:Math.min(startOffset+perPage,itemIds.length),items=[];for(let i=startOffset;i<endOffset;i++){const itemId=itemIds[i];if(Array.isArray(include)&&!include.includes(itemId))continue;if(!state.items[context]?.hasOwnProperty(itemId))return null;const item=state.items[context][itemId];let filteredItem;if(Array.isArray(fields)){filteredItem={};for(let f=0;f<fields.length;f++){const field=fields[f].split(".");let value=item;field.forEach((fieldName=>{value=value[fieldName]})),setNestedValue(filteredItem,field,value)}}else{if(!state.itemIsComplete[context]?.[itemId])return null;filteredItem=item}items.push(filteredItem)}return items}(state,query);return queriedItemsCache.set(query,items),items}));const EMPTY_OBJECT={},isRequestingEmbedPreview=(0,factory.M)((select=>(state,url)=>select(STORE_NAME).isResolving("getEmbedPreview",[url])));function getAuthors(state,query){(0,deprecated_build_module.Z)("select( 'core' ).getAuthors()",{since:"5.9",alternative:"select( 'core' ).getUsers({ who: 'authors' })"});const path=(0,add_query_args.f)("/wp/v2/users/?who=authors&per_page=100",query);return getUserQueryResults(state,path)}function getCurrentUser(state){return state.currentUser}const getUserQueryResults=(0,rememo.Z)(((state,queryID)=>{var _state$users$queries$;return(null!==(_state$users$queries$=state.users.queries[queryID])&&void 0!==_state$users$queries$?_state$users$queries$:[]).map((id=>state.users.byId[id]))}),((state,queryID)=>[state.users.queries[queryID],state.users.byId]));function getEntitiesByKind(state,kind){return(0,deprecated_build_module.Z)("wp.data.select( 'core' ).getEntitiesByKind()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntitiesConfig()"}),getEntitiesConfig(state,kind)}function getEntitiesConfig(state,kind){return state.entities.config.filter((entity=>entity.kind===kind))}function getEntity(state,kind,name){return(0,deprecated_build_module.Z)("wp.data.select( 'core' ).getEntity()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntityConfig()"}),getEntityConfig(state,kind,name)}function getEntityConfig(state,kind,name){return state.entities.config?.find((config=>config.kind===kind&&config.name===name))}const getEntityRecord=(0,rememo.Z)(((state,kind,name,key,query)=>{var _query$context;const queriedState=state.entities.records?.[kind]?.[name]?.queriedData;if(!queriedState)return;const context=null!==(_query$context=query?.context)&&void 0!==_query$context?_query$context:"default";if(void 0===query){if(!queriedState.itemIsComplete[context]?.[key])return;return queriedState.items[context][key]}const item=queriedState.items[context]?.[key];if(item&&query._fields){var _getNormalizedCommaSe;const filteredItem={},fields=null!==(_getNormalizedCommaSe=get_normalized_comma_separable(query._fields))&&void 0!==_getNormalizedCommaSe?_getNormalizedCommaSe:[];for(let f=0;f<fields.length;f++){const field=fields[f].split(".");let value=item;field.forEach((fieldName=>{value=value[fieldName]})),setNestedValue(filteredItem,field,value)}return filteredItem}return item}),((state,kind,name,recordId,query)=>{var _query$context2;const context=null!==(_query$context2=query?.context)&&void 0!==_query$context2?_query$context2:"default";return[state.entities.records?.[kind]?.[name]?.queriedData?.items[context]?.[recordId],state.entities.records?.[kind]?.[name]?.queriedData?.itemIsComplete[context]?.[recordId]]}));function __experimentalGetEntityRecordNoResolver(state,kind,name,key){return getEntityRecord(state,kind,name,key)}const getRawEntityRecord=(0,rememo.Z)(((state,kind,name,key)=>{const record=getEntityRecord(state,kind,name,key);return record&&Object.keys(record).reduce(((accumulator,_key)=>{var _record$_key$raw;(function isRawAttribute(entity,attribute){return(entity.rawAttributes||[]).includes(attribute)})(getEntityConfig(state,kind,name),_key)?accumulator[_key]=null!==(_record$_key$raw=record[_key]?.raw)&&void 0!==_record$_key$raw?_record$_key$raw:record[_key]:accumulator[_key]=record[_key];return accumulator}),{})}),((state,kind,name,recordId,query)=>{var _query$context3;const context=null!==(_query$context3=query?.context)&&void 0!==_query$context3?_query$context3:"default";return[state.entities.config,state.entities.records?.[kind]?.[name]?.queriedData?.items[context]?.[recordId],state.entities.records?.[kind]?.[name]?.queriedData?.itemIsComplete[context]?.[recordId]]}));function hasEntityRecords(state,kind,name,query){return Array.isArray(getEntityRecords(state,kind,name,query))}const getEntityRecords=(state,kind,name,query)=>{const queriedState=state.entities.records?.[kind]?.[name]?.queriedData;return queriedState?getQueriedItems(queriedState,query):null},__experimentalGetDirtyEntityRecords=(0,rememo.Z)((state=>{const{entities:{records}}=state,dirtyRecords=[];return Object.keys(records).forEach((kind=>{Object.keys(records[kind]).forEach((name=>{const primaryKeys=Object.keys(records[kind][name].edits).filter((primaryKey=>getEntityRecord(state,kind,name,primaryKey)&&hasEditsForEntityRecord(state,kind,name,primaryKey)));if(primaryKeys.length){const entityConfig=getEntityConfig(state,kind,name);primaryKeys.forEach((primaryKey=>{const entityRecord=getEditedEntityRecord(state,kind,name,primaryKey);dirtyRecords.push({key:entityRecord?entityRecord[entityConfig.key||DEFAULT_ENTITY_KEY]:void 0,title:entityConfig?.getTitle?.(entityRecord)||"",name,kind})}))}}))})),dirtyRecords}),(state=>[state.entities.records])),__experimentalGetEntitiesBeingSaved=(0,rememo.Z)((state=>{const{entities:{records}}=state,recordsBeingSaved=[];return Object.keys(records).forEach((kind=>{Object.keys(records[kind]).forEach((name=>{const primaryKeys=Object.keys(records[kind][name].saving).filter((primaryKey=>isSavingEntityRecord(state,kind,name,primaryKey)));if(primaryKeys.length){const entityConfig=getEntityConfig(state,kind,name);primaryKeys.forEach((primaryKey=>{const entityRecord=getEditedEntityRecord(state,kind,name,primaryKey);recordsBeingSaved.push({key:entityRecord?entityRecord[entityConfig.key||DEFAULT_ENTITY_KEY]:void 0,title:entityConfig?.getTitle?.(entityRecord)||"",name,kind})}))}}))})),recordsBeingSaved}),(state=>[state.entities.records]));function getEntityRecordEdits(state,kind,name,recordId){return state.entities.records?.[kind]?.[name]?.edits?.[recordId]}const getEntityRecordNonTransientEdits=(0,rememo.Z)(((state,kind,name,recordId)=>{const{transientEdits}=getEntityConfig(state,kind,name)||{},edits=getEntityRecordEdits(state,kind,name,recordId)||{};return transientEdits?Object.keys(edits).reduce(((acc,key)=>(transientEdits[key]||(acc[key]=edits[key]),acc)),{}):edits}),((state,kind,name,recordId)=>[state.entities.config,state.entities.records?.[kind]?.[name]?.edits?.[recordId]]));function hasEditsForEntityRecord(state,kind,name,recordId){return isSavingEntityRecord(state,kind,name,recordId)||Object.keys(getEntityRecordNonTransientEdits(state,kind,name,recordId)).length>0}const getEditedEntityRecord=(0,rememo.Z)(((state,kind,name,recordId)=>({...getRawEntityRecord(state,kind,name,recordId),...getEntityRecordEdits(state,kind,name,recordId)})),((state,kind,name,recordId,query)=>{var _query$context4;const context=null!==(_query$context4=query?.context)&&void 0!==_query$context4?_query$context4:"default";return[state.entities.config,state.entities.records?.[kind]?.[name]?.queriedData.items[context]?.[recordId],state.entities.records?.[kind]?.[name]?.queriedData.itemIsComplete[context]?.[recordId],state.entities.records?.[kind]?.[name]?.edits?.[recordId]]}));function isAutosavingEntityRecord(state,kind,name,recordId){var _state$entities$recor;const{pending,isAutosave}=null!==(_state$entities$recor=state.entities.records?.[kind]?.[name]?.saving?.[recordId])&&void 0!==_state$entities$recor?_state$entities$recor:{};return Boolean(pending&&isAutosave)}function isSavingEntityRecord(state,kind,name,recordId){var _state$entities$recor2;return null!==(_state$entities$recor2=state.entities.records?.[kind]?.[name]?.saving?.[recordId]?.pending)&&void 0!==_state$entities$recor2&&_state$entities$recor2}function isDeletingEntityRecord(state,kind,name,recordId){var _state$entities$recor3;return null!==(_state$entities$recor3=state.entities.records?.[kind]?.[name]?.deleting?.[recordId]?.pending)&&void 0!==_state$entities$recor3&&_state$entities$recor3}function getLastEntitySaveError(state,kind,name,recordId){return state.entities.records?.[kind]?.[name]?.saving?.[recordId]?.error}function getLastEntityDeleteError(state,kind,name,recordId){return state.entities.records?.[kind]?.[name]?.deleting?.[recordId]?.error}function getCurrentUndoOffset(state){return state.undo.offset}function getUndoEdit(state){return(0,deprecated_build_module.Z)("select( 'core' ).getUndoEdit()",{since:"6.3"}),state.undo.list[state.undo.list.length-2+getCurrentUndoOffset(state)]?.[0]}function getRedoEdit(state){return(0,deprecated_build_module.Z)("select( 'core' ).getRedoEdit()",{since:"6.3"}),state.undo.list[state.undo.list.length+getCurrentUndoOffset(state)]?.[0]}function hasUndo(state){return Boolean(getUndoEdits(state))}function hasRedo(state){return Boolean(getRedoEdits(state))}function getCurrentTheme(state){return getEntityRecord(state,"root","theme",state.currentTheme)}function __experimentalGetCurrentGlobalStylesId(state){return state.currentGlobalStylesId}function getThemeSupports(state){var _getCurrentTheme$them;return null!==(_getCurrentTheme$them=getCurrentTheme(state)?.theme_supports)&&void 0!==_getCurrentTheme$them?_getCurrentTheme$them:EMPTY_OBJECT}function getEmbedPreview(state,url){return state.embedPreviews[url]}function isPreviewEmbedFallback(state,url){const preview=state.embedPreviews[url],oEmbedLinkCheck='<a href="'+url+'">'+url+"</a>";return!!preview&&preview.html===oEmbedLinkCheck}function canUser(state,action,resource,id){const key=[action,resource,id].filter(Boolean).join("/");return state.userPermissions[key]}function canUserEditEntityRecord(state,kind,name,recordId){const entityConfig=getEntityConfig(state,kind,name);if(!entityConfig)return!1;return canUser(state,"update",entityConfig.__unstable_rest_base,recordId)}function getAutosaves(state,postType,postId){return state.autosaves[postId]}function getAutosave(state,postType,postId,authorId){if(void 0===authorId)return;const autosaves=state.autosaves[postId];return autosaves?.find((autosave=>autosave.author===authorId))}const hasFetchedAutosaves=(0,factory.M)((select=>(state,postType,postId)=>select(STORE_NAME).hasFinishedResolution("getAutosaves",[postType,postId]))),getReferenceByDistinctEdits=(0,rememo.Z)((state=>[]),(state=>[state.undo.list.length,state.undo.offset]));function __experimentalGetTemplateForLink(state,link){const records=getEntityRecords(state,"postType","wp_template",{"find-template":link});return records?.length?getEditedEntityRecord(state,"postType","wp_template",records[0].id):null}function __experimentalGetCurrentThemeBaseGlobalStyles(state){const currentTheme=getCurrentTheme(state);return currentTheme?state.themeBaseGlobalStyles[currentTheme.stylesheet]:null}function __experimentalGetCurrentThemeGlobalStylesVariations(state){const currentTheme=getCurrentTheme(state);return currentTheme?state.themeGlobalStyleVariations[currentTheme.stylesheet]:null}function getBlockPatterns(state){return state.blockPatterns}function getBlockPatternCategories(state){return state.blockPatternCategories}function getNavigationFallbackId(state){return state.navigationFallbackId}function getCurrentThemeGlobalStylesRevisions(state){const currentGlobalStylesId=__experimentalGetCurrentGlobalStylesId(state);return currentGlobalStylesId?state.themeGlobalStyleRevisions[currentGlobalStylesId]:null}var camel_case_dist_es2015=__webpack_require__("./node_modules/camel-case/dist.es2015/index.js");const forward_resolver=resolverName=>(...args)=>async({resolveSelect})=>{await resolveSelect[resolverName](...args)},resolvers_getAuthors=query=>async({dispatch})=>{const path=(0,add_query_args.f)("/wp/v2/users/?who=authors&per_page=100",query),users=await(0,api_fetch_build_module.Z)({path});dispatch.receiveUserQuery(path,users)},resolvers_getCurrentUser=()=>async({dispatch})=>{const currentUser=await(0,api_fetch_build_module.Z)({path:"/wp/v2/users/me"});dispatch.receiveCurrentUser(currentUser)},resolvers_getEntityRecord=(kind,name,key="",query)=>async({select,dispatch})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig||entityConfig?.__experimentalNoFetch)return;const lock=await dispatch.__unstableAcquireStoreLock(STORE_NAME,["entities","records",kind,name,key],{exclusive:!1});try{void 0!==query&&query._fields&&(query={...query,_fields:[...new Set([...get_normalized_comma_separable(query._fields)||[],entityConfig.key||DEFAULT_ENTITY_KEY])].join()});const path=(0,add_query_args.f)(entityConfig.baseURL+(key?"/"+key:""),{...entityConfig.baseURLParams,...query});if(void 0!==query){query={...query,include:[key]};if(select.hasEntityRecords(kind,name,query))return}const record=await(0,api_fetch_build_module.Z)({path});dispatch.receiveEntityRecords(kind,name,record,query)}finally{dispatch.__unstableReleaseStoreLock(lock)}},resolvers_getRawEntityRecord=forward_resolver("getEntityRecord"),resolvers_getEditedEntityRecord=forward_resolver("getEntityRecord"),resolvers_getEntityRecords=(kind,name,query={})=>async({dispatch})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig||entityConfig?.__experimentalNoFetch)return;const lock=await dispatch.__unstableAcquireStoreLock(STORE_NAME,["entities","records",kind,name],{exclusive:!1});try{query._fields&&(query={...query,_fields:[...new Set([...get_normalized_comma_separable(query._fields)||[],entityConfig.key||DEFAULT_ENTITY_KEY])].join()});const path=(0,add_query_args.f)(entityConfig.baseURL,{...entityConfig.baseURLParams,...query});let records=Object.values(await(0,api_fetch_build_module.Z)({path}));if(query._fields&&(records=records.map((record=>(query._fields.split(",").forEach((field=>{record.hasOwnProperty(field)||(record[field]=void 0)})),record)))),dispatch.receiveEntityRecords(kind,name,records,query),!query?._fields&&!query.context){const key=entityConfig.key||DEFAULT_ENTITY_KEY,resolutionsArgs=records.filter((record=>record[key])).map((record=>[kind,name,record[key]]));dispatch({type:"START_RESOLUTIONS",selectorName:"getEntityRecord",args:resolutionsArgs}),dispatch({type:"FINISH_RESOLUTIONS",selectorName:"getEntityRecord",args:resolutionsArgs})}}finally{dispatch.__unstableReleaseStoreLock(lock)}};resolvers_getEntityRecords.shouldInvalidate=(action,kind,name)=>("RECEIVE_ITEMS"===action.type||"REMOVE_ITEMS"===action.type)&&action.invalidateCache&&kind===action.kind&&name===action.name;const resolvers_getCurrentTheme=()=>async({dispatch,resolveSelect})=>{const activeThemes=await resolveSelect.getEntityRecords("root","theme",{status:"active"});dispatch.receiveCurrentTheme(activeThemes[0])},resolvers_getThemeSupports=forward_resolver("getCurrentTheme"),resolvers_getEmbedPreview=url=>async({dispatch})=>{try{const embedProxyResponse=await(0,api_fetch_build_module.Z)({path:(0,add_query_args.f)("/oembed/1.0/proxy",{url})});dispatch.receiveEmbedPreview(url,embedProxyResponse)}catch(error){dispatch.receiveEmbedPreview(url,!1)}},resolvers_canUser=(requestedAction,resource,id)=>async({dispatch,registry})=>{const{hasStartedResolution}=registry.select(STORE_NAME),resourcePath=id?`${resource}/${id}`:resource,retrievedActions=["create","read","update","delete"];if(!retrievedActions.includes(requestedAction))throw new Error(`'${requestedAction}' is not a valid action.`);for(const relatedAction of retrievedActions){if(relatedAction===requestedAction)continue;if(hasStartedResolution("canUser",[relatedAction,resource,id]))return}let response;try{response=await(0,api_fetch_build_module.Z)({path:`/wp/v2/${resourcePath}`,method:"OPTIONS",parse:!1})}catch(error){return}const allowHeader=response.headers?.get("allow"),allowedMethods=allowHeader?.allow||allowHeader||"",permissions={},methods={create:"POST",read:"GET",update:"PUT",delete:"DELETE"};for(const[actionName,methodName]of Object.entries(methods))permissions[actionName]=allowedMethods.includes(methodName);for(const action of retrievedActions)dispatch.receiveUserPermission(`${action}/${resourcePath}`,permissions[action])},resolvers_canUserEditEntityRecord=(kind,name,recordId)=>async({dispatch})=>{const entityConfig=(await dispatch(getOrLoadEntitiesConfig(kind))).find((config=>config.name===name&&config.kind===kind));if(!entityConfig)return;const resource=entityConfig.__unstable_rest_base;await dispatch(resolvers_canUser("update",resource,recordId))},resolvers_getAutosaves=(postType,postId)=>async({dispatch,resolveSelect})=>{const{rest_base:restBase,rest_namespace:restNamespace="wp/v2"}=await resolveSelect.getPostType(postType),autosaves=await(0,api_fetch_build_module.Z)({path:`/${restNamespace}/${restBase}/${postId}/autosaves?context=edit`});autosaves&&autosaves.length&&dispatch.receiveAutosaves(postId,autosaves)},resolvers_getAutosave=(postType,postId)=>async({resolveSelect})=>{await resolveSelect.getAutosaves(postType,postId)},resolvers_experimentalGetTemplateForLink=link=>async({dispatch,resolveSelect})=>{let template;try{template=await(0,api_fetch_build_module.Z)({url:(0,add_query_args.f)(link,{"_wp-find-template":!0})}).then((({data})=>data))}catch(e){}if(!template)return;const record=await resolveSelect.getEntityRecord("postType","wp_template",template.id);record&&dispatch.receiveEntityRecords("postType","wp_template",[record],{"find-template":link})};resolvers_experimentalGetTemplateForLink.shouldInvalidate=action=>("RECEIVE_ITEMS"===action.type||"REMOVE_ITEMS"===action.type)&&action.invalidateCache&&"postType"===action.kind&&"wp_template"===action.name;const resolvers_experimentalGetCurrentGlobalStylesId=()=>async({dispatch,resolveSelect})=>{const activeThemes=await resolveSelect.getEntityRecords("root","theme",{status:"active"}),globalStylesURL=activeThemes?.[0]?._links?.["wp:user-global-styles"]?.[0]?.href;if(globalStylesURL){const globalStylesObject=await(0,api_fetch_build_module.Z)({url:globalStylesURL});dispatch.__experimentalReceiveCurrentGlobalStylesId(globalStylesObject.id)}},resolvers_experimentalGetCurrentThemeBaseGlobalStyles=()=>async({resolveSelect,dispatch})=>{const currentTheme=await resolveSelect.getCurrentTheme(),themeGlobalStyles=await(0,api_fetch_build_module.Z)({path:`/wp/v2/global-styles/themes/${currentTheme.stylesheet}`});dispatch.__experimentalReceiveThemeBaseGlobalStyles(currentTheme.stylesheet,themeGlobalStyles)},resolvers_experimentalGetCurrentThemeGlobalStylesVariations=()=>async({resolveSelect,dispatch})=>{const currentTheme=await resolveSelect.getCurrentTheme(),variations=await(0,api_fetch_build_module.Z)({path:`/wp/v2/global-styles/themes/${currentTheme.stylesheet}/variations`});dispatch.__experimentalReceiveThemeGlobalStyleVariations(currentTheme.stylesheet,variations)},resolvers_getCurrentThemeGlobalStylesRevisions=()=>async({resolveSelect,dispatch})=>{const globalStylesId=await resolveSelect.__experimentalGetCurrentGlobalStylesId(),record=globalStylesId?await resolveSelect.getEntityRecord("root","globalStyles",globalStylesId):void 0,revisionsURL=record?._links?.["version-history"]?.[0]?.href;if(revisionsURL){const resetRevisions=await(0,api_fetch_build_module.Z)({url:revisionsURL}),revisions=resetRevisions?.map((revision=>Object.fromEntries(Object.entries(revision).map((([key,value])=>[(0,camel_case_dist_es2015.eV)(key),value])))));dispatch.receiveThemeGlobalStyleRevisions(globalStylesId,revisions)}};resolvers_getCurrentThemeGlobalStylesRevisions.shouldInvalidate=action=>"SAVE_ENTITY_RECORD_FINISH"===action.type&&"root"===action.kind&&!action.error&&"globalStyles"===action.name;const resolvers_getBlockPatterns=()=>async({dispatch})=>{const restPatterns=await(0,api_fetch_build_module.Z)({path:"/wp/v2/block-patterns/patterns"}),patterns=restPatterns?.map((pattern=>Object.fromEntries(Object.entries(pattern).map((([key,value])=>[(0,camel_case_dist_es2015.eV)(key),value])))));dispatch({type:"RECEIVE_BLOCK_PATTERNS",patterns})},resolvers_getBlockPatternCategories=()=>async({dispatch})=>{dispatch({type:"RECEIVE_BLOCK_PATTERN_CATEGORIES",categories:await(0,api_fetch_build_module.Z)({path:"/wp/v2/block-patterns/categories"})})},resolvers_getNavigationFallbackId=()=>async({dispatch})=>{const fallback=await(0,api_fetch_build_module.Z)({path:(0,add_query_args.f)("/wp-block-editor/v1/navigation-fallback",{_embed:!0})}),record=fallback?._embedded?.self;dispatch.receiveNavigationFallbackId(fallback?.id),record&&(dispatch.receiveEntityRecords("postType","wp_navigation",record),dispatch.finishResolution("getEntityRecord",["postType","wp_navigation",fallback?.id]))};function deepCopyLocksTreePath(tree,path){const newTree={...tree};let currentNode=newTree;for(const branchName of path)currentNode.children={...currentNode.children,[branchName]:{locks:[],children:{},...currentNode.children[branchName]}},currentNode=currentNode.children[branchName];return newTree}function getNode(tree,path){let currentNode=tree;for(const branchName of path){const nextNode=currentNode.children[branchName];if(!nextNode)return null;currentNode=nextNode}return currentNode}function hasConflictingLock({exclusive},locks){return!(!exclusive||!locks.length)||!(exclusive||!locks.filter((lock=>lock.exclusive)).length)}const DEFAULT_STATE={requests:[],tree:{locks:[],children:{}}};function locks(state=DEFAULT_STATE,action){switch(action.type){case"ENQUEUE_LOCK_REQUEST":{const{request}=action;return{...state,requests:[request,...state.requests]}}case"GRANT_LOCK_REQUEST":{const{lock,request}=action,{store,path}=request,storePath=[store,...path],newTree=deepCopyLocksTreePath(state.tree,storePath),node=getNode(newTree,storePath);return node.locks=[...node.locks,lock],{...state,requests:state.requests.filter((r=>r!==request)),tree:newTree}}case"RELEASE_LOCK":{const{lock}=action,storePath=[lock.store,...lock.path],newTree=deepCopyLocksTreePath(state.tree,storePath),node=getNode(newTree,storePath);return node.locks=node.locks.filter((l=>l!==lock)),{...state,tree:newTree}}}return state}function isLockAvailable(state,store,path,{exclusive}){const storePath=[store,...path],locks=state.tree;for(const node of function*iteratePath(tree,path){let currentNode=tree;yield currentNode;for(const branchName of path){const nextNode=currentNode.children[branchName];if(!nextNode)break;yield nextNode,currentNode=nextNode}}(locks,storePath))if(hasConflictingLock({exclusive},node.locks))return!1;const node=getNode(locks,storePath);if(!node)return!0;for(const descendant of function*iterateDescendants(node){const stack=Object.values(node.children);for(;stack.length;){const childNode=stack.pop();yield childNode,stack.push(...Object.values(childNode.children))}}(node))if(hasConflictingLock({exclusive},descendant.locks))return!1;return!0}function createLocks(){let state=locks(void 0,{type:"@@INIT"});function processPendingLockRequests(){for(const request of function getPendingLockRequests(state){return state.requests}(state)){const{store,path,exclusive,notifyAcquired}=request;if(isLockAvailable(state,store,path,{exclusive})){const lock={store,path,exclusive};state=locks(state,{type:"GRANT_LOCK_REQUEST",lock,request}),notifyAcquired(lock)}}}return{acquire:function acquire(store,path,exclusive){return new Promise((resolve=>{state=locks(state,{type:"ENQUEUE_LOCK_REQUEST",request:{store,path,exclusive,notifyAcquired:resolve}}),processPendingLockRequests()}))},release:function release(lock){state=locks(state,{type:"RELEASE_LOCK",lock}),processPendingLockRequests()}}}function createLocksActions(){const locks=createLocks();return{__unstableAcquireStoreLock:function __unstableAcquireStoreLock(store,path,{exclusive}){return()=>locks.acquire(store,path,exclusive)},__unstableReleaseStoreLock:function __unstableReleaseStoreLock(lock){return()=>locks.release(lock)}}}var react=__webpack_require__("./node_modules/react/index.js"),use_select=__webpack_require__("./packages/data/build-module/components/use-select/index.js"),use_dispatch=__webpack_require__("./packages/data/build-module/components/use-dispatch/use-dispatch.js"),blocks_build_module=__webpack_require__("./packages/blocks/build-module/index.js");const EMPTY_ARRAY=[],entityContexts={...rootEntitiesConfig.reduce(((acc,loader)=>(acc[loader.kind]||(acc[loader.kind]={}),acc[loader.kind][loader.name]={context:(0,react.createContext)(void 0)},acc)),{}),...additionalEntityConfigLoaders.reduce(((acc,loader)=>(acc[loader.kind]={},acc)),{})},getEntityContext=(kind,name)=>{if(!entityContexts[kind])throw new Error(`Missing entity config for kind: ${kind}.`);return entityContexts[kind][name]||(entityContexts[kind][name]={context:(0,react.createContext)(void 0)}),entityContexts[kind][name].context};function EntityProvider({kind,type:name,id,children}){const Provider=getEntityContext(kind,name).Provider;return(0,react.createElement)(Provider,{value:id},children)}function useEntityId(kind,name){return(0,react.useContext)(getEntityContext(kind,name))}function useEntityProp(kind,name,prop,_id){const providerId=useEntityId(kind,name),id=null!=_id?_id:providerId,{value,fullValue}=(0,use_select.Z)((select=>{const{getEntityRecord,getEditedEntityRecord}=select(STORE_NAME),record=getEntityRecord(kind,name,id),editedRecord=getEditedEntityRecord(kind,name,id);return record&&editedRecord?{value:editedRecord[prop],fullValue:record[prop]}:{}}),[kind,name,id,prop]),{editEntityRecord}=(0,use_dispatch.Z)(STORE_NAME);return[value,(0,react.useCallback)((newValue=>{editEntityRecord(kind,name,id,{[prop]:newValue})}),[kind,name,id,prop]),fullValue]}function useEntityBlockEditor(kind,name,{id:_id}={}){const providerId=useEntityId(kind,name),id=null!=_id?_id:providerId,{content,blocks}=(0,use_select.Z)((select=>{const{getEditedEntityRecord}=select(STORE_NAME),editedRecord=getEditedEntityRecord(kind,name,id);return{blocks:editedRecord.blocks,content:editedRecord.content}}),[kind,name,id]),{__unstableCreateUndoLevel,editEntityRecord}=(0,use_dispatch.Z)(STORE_NAME);(0,react.useEffect)((()=>{if(content&&"function"!=typeof content&&!blocks){const parsedContent=(0,blocks_build_module.Qc)(content);editEntityRecord(kind,name,id,{blocks:parsedContent},{undoIgnore:!0})}}),[content]);const onChange=(0,react.useCallback)(((newBlocks,options)=>{const{selection}=options,edits={blocks:newBlocks,selection};if(blocks===edits.blocks)return __unstableCreateUndoLevel(kind,name,id);edits.content=({blocks:blocksForSerialization=[]})=>(0,blocks_build_module.qm)(blocksForSerialization),editEntityRecord(kind,name,id,edits)}),[kind,name,id,blocks]),onInput=(0,react.useCallback)(((newBlocks,options)=>{const{selection}=options;editEntityRecord(kind,name,id,{blocks:newBlocks,selection})}),[kind,name,id]);return[null!=blocks?blocks:EMPTY_ARRAY,onInput,onChange]}const memoize=__webpack_require__("./node_modules/memize/dist/index.js").Z;let Status;!function(Status){Status.Idle="IDLE",Status.Resolving="RESOLVING",Status.Error="ERROR",Status.Success="SUCCESS"}(Status||(Status={}));const META_SELECTORS=["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"];function useQuerySelect(mapQuerySelect,deps){return(0,use_select.Z)(((select,registry)=>mapQuerySelect((store=>enrichSelectors(select(store))),registry)),deps)}const enrichSelectors=memoize((selectors=>{const resolvers={};for(const selectorName in selectors)META_SELECTORS.includes(selectorName)||Object.defineProperty(resolvers,selectorName,{get:()=>(...args)=>{const{getIsResolving,hasFinishedResolution}=selectors,isResolving=!!getIsResolving(selectorName,args),hasResolved=!isResolving&&hasFinishedResolution(selectorName,args),data=selectors[selectorName](...args);let status;return status=isResolving?Status.Resolving:hasResolved?data?Status.Success:Status.Error:Status.Idle,{data,status,isResolving,hasResolved}}});return resolvers}));function useEntityRecord(kind,name,recordId,options={enabled:!0}){const{editEntityRecord,saveEditedEntityRecord}=(0,use_dispatch.Z)(store),mutations=(0,react.useMemo)((()=>({edit:record=>editEntityRecord(kind,name,recordId,record),save:(saveOptions={})=>saveEditedEntityRecord(kind,name,recordId,{throwOnError:!0,...saveOptions})})),[recordId]),{editedRecord,hasEdits}=(0,use_select.Z)((select=>({editedRecord:select(store).getEditedEntityRecord(kind,name,recordId),hasEdits:select(store).hasEditsForEntityRecord(kind,name,recordId)})),[kind,name,recordId]),{data:record,...querySelectRest}=useQuerySelect((query=>options.enabled?query(store).getEntityRecord(kind,name,recordId):null),[kind,name,recordId,options.enabled]);return{record,editedRecord,hasEdits,...querySelectRest,...mutations}}const use_entity_records_EMPTY_ARRAY=[];function useEntityRecords(kind,name,queryArgs={},options={enabled:!0}){const queryAsString=(0,add_query_args.f)("",queryArgs),{data:records,...rest}=useQuerySelect((query=>options.enabled?query(store).getEntityRecords(kind,name,queryArgs):{data:use_entity_records_EMPTY_ARRAY}),[kind,name,queryAsString,options.enabled]);return{records,...rest}}function useResourcePermissions(resource,id){return useQuerySelect((resolve=>{const{canUser}=resolve(store),create=canUser("create",resource);if(!id){const read=canUser("read",resource),isResolving=create.isResolving||read.isResolving,hasResolved=create.hasResolved&&read.hasResolved;let status=Status.Idle;return isResolving?status=Status.Resolving:hasResolved&&(status=Status.Success),{status,isResolving,hasResolved,canCreate:create.hasResolved&&create.data,canRead:read.hasResolved&&read.data}}const read=canUser("read",resource,id),update=canUser("update",resource,id),_delete=canUser("delete",resource,id),isResolving=read.isResolving||create.isResolving||update.isResolving||_delete.isResolving,hasResolved=read.hasResolved&&create.hasResolved&&update.hasResolved&&_delete.hasResolved;let status=Status.Idle;return isResolving?status=Status.Resolving:hasResolved&&(status=Status.Success),{status,isResolving,hasResolved,canRead:hasResolved&&read.data,canCreate:hasResolved&&create.data,canUpdate:hasResolved&&update.data,canDelete:hasResolved&&_delete.data}}),[resource,id])}const entitySelectors=rootEntitiesConfig.reduce(((result,entity)=>{const{kind,name}=entity;return result[getMethodName(kind,name)]=(state,key,query)=>getEntityRecord(state,kind,name,key,query),result[getMethodName(kind,name,"get",!0)]=(state,query)=>getEntityRecords(state,kind,name,query),result}),{}),entityResolvers=rootEntitiesConfig.reduce(((result,entity)=>{const{kind,name}=entity;result[getMethodName(kind,name)]=(key,query)=>resolvers_getEntityRecord(kind,name,key,query);const pluralMethodName=getMethodName(kind,name,"get",!0);return result[pluralMethodName]=(...args)=>resolvers_getEntityRecords(kind,name,...args),result[pluralMethodName].shouldInvalidate=action=>resolvers_getEntityRecords.shouldInvalidate(action,kind,name),result}),{}),entityActions=rootEntitiesConfig.reduce(((result,entity)=>{const{kind,name}=entity;return result[getMethodName(kind,name,"save")]=key=>saveEntityRecord(kind,name,key),result[getMethodName(kind,name,"delete")]=(key,query)=>deleteEntityRecord(kind,name,key,query),result}),{}),store=(0,redux_store.Z)(STORE_NAME,{reducer:build_module_reducer,actions:{...build_module_actions_namespaceObject,...entityActions,...createLocksActions()},selectors:{...build_module_selectors_namespaceObject,...entitySelectors},resolvers:{...resolvers_namespaceObject,...entityResolvers}});(0,build_module.z2)(store)}}]);