"use strict";(globalThis.webpackChunkgutenberg=globalThis.webpackChunkgutenberg||[]).push([[9022],{"./packages/a11y/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>speak});var build_module=__webpack_require__("./packages/i18n/build-module/index.js");function addContainer(ariaLive="polite"){const container=document.createElement("div");container.id=`a11y-speak-${ariaLive}`,container.className="a11y-speak-region",container.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),container.setAttribute("aria-live",ariaLive),container.setAttribute("aria-relevant","additions text"),container.setAttribute("aria-atomic","true");const{body}=document;return body&&body.appendChild(container),container}let previousMessage="";function speak(message,ariaLive){!function clear(){const regions=document.getElementsByClassName("a11y-speak-region"),introText=document.getElementById("a11y-speak-intro-text");for(let i=0;i<regions.length;i++)regions[i].textContent="";introText&&introText.setAttribute("hidden","hidden")}(),message=function filterMessage(message){return message=message.replace(/<[^<>]+>/g," "),previousMessage===message&&(message+="Â "),previousMessage=message,message}(message);const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");containerAssertive&&"assertive"===ariaLive?containerAssertive.textContent=message:containerPolite&&(containerPolite.textContent=message),introText&&introText.removeAttribute("hidden")}!function domReady(callback){"undefined"!=typeof document&&("complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",callback):callback())}((function setup(){const introText=document.getElementById("a11y-speak-intro-text"),containerAssertive=document.getElementById("a11y-speak-assertive"),containerPolite=document.getElementById("a11y-speak-polite");null===introText&&function addIntroText(){const introText=document.createElement("p");introText.id="a11y-speak-intro-text",introText.className="a11y-speak-intro-text",introText.textContent=(0,build_module.__)("Notifications"),introText.setAttribute("style","position: absolute;margin: -1px;padding: 0;height: 1px;width: 1px;overflow: hidden;clip: rect(1px, 1px, 1px, 1px);-webkit-clip-path: inset(50%);clip-path: inset(50%);border: 0;word-wrap: normal !important;"),introText.setAttribute("hidden","hidden");const{body}=document;return body&&body.appendChild(introText),introText}(),null===containerAssertive&&addContainer("assertive"),null===containerPolite&&addContainer("polite")}))},"./packages/autop/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>autop,A:()=>removep});const htmlSplitRegex=new RegExp("(<((?=!--|!\\[CDATA\\[)((?=!-)!(?:-(?!->)[^\\-]*)*(?:--\x3e)?|!\\[CDATA\\[[^\\]]*(?:](?!]>)[^\\]]*)*?(?:]]>)?)|[^>]*>?))");function replaceInHtmlTags(haystack,replacePairs){const textArr=function htmlSplit(input){const parts=[];let match,workingInput=input;for(;match=workingInput.match(htmlSplitRegex);){const index=match.index;parts.push(workingInput.slice(0,index)),parts.push(match[0]),workingInput=workingInput.slice(index+match[0].length)}return workingInput.length&&parts.push(workingInput),parts}(haystack);let changed=!1;const needles=Object.keys(replacePairs);for(let i=1;i<textArr.length;i+=2)for(let j=0;j<needles.length;j++){const needle=needles[j];if(-1!==textArr[i].indexOf(needle)){textArr[i]=textArr[i].replace(new RegExp(needle,"g"),replacePairs[needle]),changed=!0;break}}return changed&&(haystack=textArr.join("")),haystack}function autop(text,br=!0){const preTags=[];if(""===text.trim())return"";if(-1!==(text+="\n").indexOf("<pre")){const textParts=text.split("</pre>"),lastText=textParts.pop();text="";for(let i=0;i<textParts.length;i++){const textPart=textParts[i],start=textPart.indexOf("<pre");if(-1===start){text+=textPart;continue}const name="<pre wp-pre-tag-"+i+"></pre>";preTags.push([name,textPart.substr(start)+"</pre>"]),text+=textPart.substr(0,start)+name}text+=lastText}const allBlocks="(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)";-1!==(text=replaceInHtmlTags(text=(text=(text=(text=text.replace(/<br\s*\/?>\s*<br\s*\/?>/g,"\n\n")).replace(new RegExp("(<"+allBlocks+"[\\s/>])","g"),"\n\n$1")).replace(new RegExp("(</"+allBlocks+">)","g"),"$1\n\n")).replace(/\r\n|\r/g,"\n"),{"\n":" \x3c!-- wpnl --\x3e "})).indexOf("<option")&&(text=(text=text.replace(/\s*<option/g,"<option")).replace(/<\/option>\s*/g,"</option>")),-1!==text.indexOf("</object>")&&(text=(text=(text=text.replace(/(<object[^>]*>)\s*/g,"$1")).replace(/\s*<\/object>/g,"</object>")).replace(/\s*(<\/?(?:param|embed)[^>]*>)\s*/g,"$1")),-1===text.indexOf("<source")&&-1===text.indexOf("<track")||(text=(text=(text=text.replace(/([<\[](?:audio|video)[^>\]]*[>\]])\s*/g,"$1")).replace(/\s*([<\[]\/(?:audio|video)[>\]])/g,"$1")).replace(/\s*(<(?:source|track)[^>]*>)\s*/g,"$1")),-1!==text.indexOf("<figcaption")&&(text=(text=text.replace(/\s*(<figcaption[^>]*>)/,"$1")).replace(/<\/figcaption>\s*/,"</figcaption>"));const texts=(text=text.replace(/\n\n+/g,"\n\n")).split(/\n\s*\n/).filter(Boolean);return text="",texts.forEach((textPiece=>{text+="<p>"+textPiece.replace(/^\n*|\n*$/g,"")+"</p>\n"})),text=(text=(text=(text=(text=(text=(text=(text=text.replace(/<p>\s*<\/p>/g,"")).replace(/<p>([^<]+)<\/(div|address|form)>/g,"<p>$1</p></$2>")).replace(new RegExp("<p>\\s*(</?"+allBlocks+"[^>]*>)\\s*</p>","g"),"$1")).replace(/<p>(<li.+?)<\/p>/g,"$1")).replace(/<p><blockquote([^>]*)>/gi,"<blockquote$1><p>")).replace(/<\/blockquote><\/p>/g,"</p></blockquote>")).replace(new RegExp("<p>\\s*(</?"+allBlocks+"[^>]*>)","g"),"$1")).replace(new RegExp("(</?"+allBlocks+"[^>]*>)\\s*</p>","g"),"$1"),br&&(text=(text=(text=(text=text.replace(/<(script|style).*?<\/\\1>/g,(match=>match[0].replace(/\n/g,"<WPPreserveNewline />")))).replace(/<br>|<br\/>/g,"<br />")).replace(/(<br \/>)?\s*\n/g,((a,b)=>b?a:"<br />\n"))).replace(/<WPPreserveNewline \/>/g,"\n")),text=(text=(text=text.replace(new RegExp("(</?"+allBlocks+"[^>]*>)\\s*<br />","g"),"$1")).replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)/g,"$1")).replace(/\n<\/p>$/g,"</p>"),preTags.forEach((preTag=>{const[name,original]=preTag;text=text.replace(name,original)})),-1!==text.indexOf("\x3c!-- wpnl --\x3e")&&(text=text.replace(/\s?<!-- wpnl -->\s?/g,"\n")),text}function removep(html){const blocklist="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure",blocklist1=blocklist+"|div|p",blocklist2=blocklist+"|pre",preserve=[];let preserveLinebreaks=!1,preserveBr=!1;return html?(-1===html.indexOf("<script")&&-1===html.indexOf("<style")||(html=html.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,(match=>(preserve.push(match),"<wp-preserve>")))),-1!==html.indexOf("<pre")&&(preserveLinebreaks=!0,html=html.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,(a=>(a=(a=a.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>")).replace(/\r?\n/g,"<wp-line-break>")))),-1!==html.indexOf("[caption")&&(preserveBr=!0,html=html.replace(/\[caption[\s\S]+?\[\/caption\]/g,(a=>a.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")))),-1!==(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=(html=html.replace(new RegExp("\\s*</("+blocklist1+")>\\s*","g"),"</$1>\n")).replace(new RegExp("\\s*<((?:"+blocklist1+")(?: [^>]*)?)>","g"),"\n<$1>")).replace(/(<p [^>]+>[\s\S]*?)<\/p>/g,"$1</p#>")).replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n")).replace(/\s*<p>/gi,"")).replace(/\s*<\/p>\s*/gi,"\n\n")).replace(/\n[\s\u00a0]+\n/g,"\n\n")).replace(/(\s*)<br ?\/?>\s*/gi,((_,space)=>space&&-1!==space.indexOf("\n")?"\n\n":"\n"))).replace(/\s*<div/g,"\n<div")).replace(/<\/div>\s*/g,"</div>\n")).replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n")).replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption")).replace(new RegExp("\\s*<((?:"+blocklist2+")(?: [^>]*)?)\\s*>","g"),"\n<$1>")).replace(new RegExp("\\s*</("+blocklist2+")>\\s*","g"),"</$1>\n")).replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>")).indexOf("<option")&&(html=(html=html.replace(/\s*<option/g,"\n<option")).replace(/\s*<\/select>/g,"\n</select>")),-1!==html.indexOf("<hr")&&(html=html.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),-1!==html.indexOf("<object")&&(html=html.replace(/<object[\s\S]+?<\/object>/g,(a=>a.replace(/[\r\n]+/g,"")))),html=(html=(html=(html=html.replace(/<\/p#>/g,"</p>\n")).replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1")).replace(/^\s+/,"")).replace(/[\s\u00a0]+$/,""),preserveLinebreaks&&(html=html.replace(/<wp-line-break>/g,"\n")),preserveBr&&(html=html.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),preserve.length&&(html=html.replace(/<wp-preserve>/g,(()=>preserve.shift()))),html):""}},"./packages/blob/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ZR:()=>createBlobURL,TR:()=>getBlobByURL,UQ:()=>getBlobTypeByURL,Vg:()=>revokeBlobURL,Gu:()=>isBlobURL});const cache={};function createBlobURL(file){const url=window.URL.createObjectURL(file);return cache[url]=file,url}function getBlobByURL(url){return cache[url]}function getBlobTypeByURL(url){return getBlobByURL(url)?.type.split("/")[0]}function revokeBlobURL(url){cache[url]&&window.URL.revokeObjectURL(url),delete cache[url]}function isBlobURL(url){return!(!url||!url.indexOf)&&0===url.indexOf("blob:")}},"./packages/blocks/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{qO:()=>__EXPERIMENTAL_ELEMENTS,yg:()=>__EXPERIMENTAL_PATHS_WITH_MERGE,$L:()=>__EXPERIMENTAL_STYLE_PROPERTY,mR:()=>__experimentalCloneSanitizedBlock,DK:()=>getAccessibleBlockLabel,A$:()=>__experimentalGetBlockAttributesNamesByRole,Iu:()=>getBlockLabel,t9:()=>__experimentalSanitizeBlockAttributes,dF:()=>getBlockProps,cZ:()=>getInnerBlocksProps,qm:()=>__unstableSerializeAndClean,pI:()=>children,Wm:()=>cloneBlock,j4:()=>createBlock,ne:()=>createBlocksFromInnerBlocksTemplate,aW:()=>doBlocksMatchTemplate,MC:()=>findTransform,DJ:()=>getBlockAttributes,Jo:()=>getBlockInnerHTML,Vk:()=>getBlockDefaultClassName,Wf:()=>getBlockFromExample,hq:()=>getBlockMenuDefaultClassName,Dx:()=>getBlockSupport,Xn:()=>getBlockTransforms,ck:()=>getBlockType,U8:()=>getBlockTypes,Nr:()=>getBlockVariations,CP:()=>categories_getCategories,UT:()=>getDefaultBlockName,x:()=>getGroupingBlockName,ff:()=>getPossibleBlockTransformations,kD:()=>getSaveContent,qy:()=>getUnregisteredTypeHandlerName,zb:()=>hasBlockSupport,vr:()=>isReusableBlock,zQ:()=>isTemplatePart,pe:()=>isUnmodifiedBlock,ZP:()=>isUnmodifiedDefaultBlock,Qc:()=>parser_parse,eP:()=>parseWithAttributeSchema,ag:()=>pasteHandler,AF:()=>rawHandler,uW:()=>registerBlockType,qC:()=>serializer_serialize,rq:()=>serializeRawBlock,$K:()=>setDefaultBlockName,Cs:()=>setFreeformContentHandlerName,ru:()=>setGroupingBlockName,ud:()=>setUnregisteredTypeHandlerName,h:()=>store,m4:()=>switchToBlockType,fw:()=>synchronizeBlocksWithTemplate,lM:()=>validateBlock});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{__experimentalGetUnprocessedBlockTypes:()=>__experimentalGetUnprocessedBlockTypes,__experimentalHasContentRoleAttribute:()=>__experimentalHasContentRoleAttribute,getActiveBlockVariation:()=>getActiveBlockVariation,getBlockStyles:()=>getBlockStyles,getBlockSupport:()=>selectors_getBlockSupport,getBlockType:()=>selectors_getBlockType,getBlockTypes:()=>selectors_getBlockTypes,getBlockVariations:()=>selectors_getBlockVariations,getCategories:()=>getCategories,getChildBlockNames:()=>selectors_getChildBlockNames,getCollections:()=>getCollections,getDefaultBlockName:()=>selectors_getDefaultBlockName,getDefaultBlockVariation:()=>getDefaultBlockVariation,getFreeformFallbackBlockName:()=>getFreeformFallbackBlockName,getGroupingBlockName:()=>selectors_getGroupingBlockName,getUnregisteredFallbackBlockName:()=>getUnregisteredFallbackBlockName,hasBlockSupport:()=>selectors_hasBlockSupport,hasChildBlocks:()=>selectors_hasChildBlocks,hasChildBlocksWithInserterSupport:()=>selectors_hasChildBlocksWithInserterSupport,isMatchingSearchTerm:()=>isMatchingSearchTerm});var private_selectors_namespaceObject={};__webpack_require__.r(private_selectors_namespaceObject),__webpack_require__.d(private_selectors_namespaceObject,{getSupportedStyles:()=>getSupportedStyles});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{__experimentalReapplyBlockTypeFilters:()=>__experimentalReapplyBlockTypeFilters,__experimentalRegisterBlockType:()=>__experimentalRegisterBlockType,addBlockCollection:()=>addBlockCollection,addBlockStyles:()=>addBlockStyles,addBlockTypes:()=>addBlockTypes,addBlockVariations:()=>addBlockVariations,removeBlockCollection:()=>removeBlockCollection,removeBlockStyles:()=>removeBlockStyles,removeBlockTypes:()=>removeBlockTypes,removeBlockVariations:()=>removeBlockVariations,setCategories:()=>setCategories,setDefaultBlockName:()=>actions_setDefaultBlockName,setFreeformFallbackBlockName:()=>setFreeformFallbackBlockName,setGroupingBlockName:()=>actions_setGroupingBlockName,setUnregisteredFallbackBlockName:()=>setUnregisteredFallbackBlockName,updateCategory:()=>updateCategory});var build_module=__webpack_require__("./packages/data/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js"),colord=__webpack_require__("./node_modules/colord/index.mjs"),names=__webpack_require__("./node_modules/colord/plugins/names.mjs"),a11y=__webpack_require__("./node_modules/colord/plugins/a11y.mjs"),react=__webpack_require__("./node_modules/react/index.js"),strip_html=__webpack_require__("./packages/dom/build-module/dom/strip-html.js");const BLOCK_ICON_DEFAULT="block-default",DEPRECATED_ENTRY_KEYS=["attributes","supports","save","migrate","isEligible","apiVersion"],__EXPERIMENTAL_STYLE_PROPERTY={"--wp--style--color--link":{value:["color","link"],support:["color","link"]},background:{value:["color","gradient"],support:["color","gradients"],useEngine:!0},backgroundColor:{value:["color","background"],support:["color","background"],requiresOptOut:!0,useEngine:!0},borderColor:{value:["border","color"],support:["__experimentalBorder","color"],useEngine:!0},borderRadius:{value:["border","radius"],support:["__experimentalBorder","radius"],properties:{borderTopLeftRadius:"topLeft",borderTopRightRadius:"topRight",borderBottomLeftRadius:"bottomLeft",borderBottomRightRadius:"bottomRight"},useEngine:!0},borderStyle:{value:["border","style"],support:["__experimentalBorder","style"],useEngine:!0},borderWidth:{value:["border","width"],support:["__experimentalBorder","width"],useEngine:!0},borderTopColor:{value:["border","top","color"],support:["__experimentalBorder","color"],useEngine:!0},borderTopStyle:{value:["border","top","style"],support:["__experimentalBorder","style"],useEngine:!0},borderTopWidth:{value:["border","top","width"],support:["__experimentalBorder","width"],useEngine:!0},borderRightColor:{value:["border","right","color"],support:["__experimentalBorder","color"],useEngine:!0},borderRightStyle:{value:["border","right","style"],support:["__experimentalBorder","style"],useEngine:!0},borderRightWidth:{value:["border","right","width"],support:["__experimentalBorder","width"],useEngine:!0},borderBottomColor:{value:["border","bottom","color"],support:["__experimentalBorder","color"],useEngine:!0},borderBottomStyle:{value:["border","bottom","style"],support:["__experimentalBorder","style"],useEngine:!0},borderBottomWidth:{value:["border","bottom","width"],support:["__experimentalBorder","width"],useEngine:!0},borderLeftColor:{value:["border","left","color"],support:["__experimentalBorder","color"],useEngine:!0},borderLeftStyle:{value:["border","left","style"],support:["__experimentalBorder","style"],useEngine:!0},borderLeftWidth:{value:["border","left","width"],support:["__experimentalBorder","width"],useEngine:!0},color:{value:["color","text"],support:["color","text"],requiresOptOut:!0,useEngine:!0},columnCount:{value:["typography","textColumns"],support:["typography","textColumns"],useEngine:!0},filter:{value:["filter","duotone"],support:["filter","duotone"]},linkColor:{value:["elements","link","color","text"],support:["color","link"]},captionColor:{value:["elements","caption","color","text"],support:["color","caption"]},buttonColor:{value:["elements","button","color","text"],support:["color","button"]},buttonBackgroundColor:{value:["elements","button","color","background"],support:["color","button"]},fontFamily:{value:["typography","fontFamily"],support:["typography","__experimentalFontFamily"],useEngine:!0},fontSize:{value:["typography","fontSize"],support:["typography","fontSize"],useEngine:!0},fontStyle:{value:["typography","fontStyle"],support:["typography","__experimentalFontStyle"],useEngine:!0},fontWeight:{value:["typography","fontWeight"],support:["typography","__experimentalFontWeight"],useEngine:!0},lineHeight:{value:["typography","lineHeight"],support:["typography","lineHeight"],useEngine:!0},margin:{value:["spacing","margin"],support:["spacing","margin"],properties:{marginTop:"top",marginRight:"right",marginBottom:"bottom",marginLeft:"left"},useEngine:!0},minHeight:{value:["dimensions","minHeight"],support:["dimensions","minHeight"],useEngine:!0},padding:{value:["spacing","padding"],support:["spacing","padding"],properties:{paddingTop:"top",paddingRight:"right",paddingBottom:"bottom",paddingLeft:"left"},useEngine:!0},textDecoration:{value:["typography","textDecoration"],support:["typography","__experimentalTextDecoration"],useEngine:!0},textTransform:{value:["typography","textTransform"],support:["typography","__experimentalTextTransform"],useEngine:!0},letterSpacing:{value:["typography","letterSpacing"],support:["typography","__experimentalLetterSpacing"],useEngine:!0},"--wp--style--root--padding":{value:["spacing","padding"],support:["spacing","padding"],properties:{"--wp--style--root--padding-top":"top","--wp--style--root--padding-right":"right","--wp--style--root--padding-bottom":"bottom","--wp--style--root--padding-left":"left"},rootOnly:!0}},__EXPERIMENTAL_ELEMENTS={link:"a",heading:"h1, h2, h3, h4, h5, h6",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",button:".wp-element-button, .wp-block-button__link",caption:".wp-element-caption, .wp-block-audio figcaption, .wp-block-embed figcaption, .wp-block-gallery figcaption, .wp-block-image figcaption, .wp-block-table figcaption, .wp-block-video figcaption",cite:"cite"},__EXPERIMENTAL_PATHS_WITH_MERGE={"color.duotone":!0,"color.gradients":!0,"color.palette":!0,"typography.fontFamilies":!0,"typography.fontSizes":!0,"spacing.spacingSizes":!0};var dist_es2015=__webpack_require__("./node_modules/camel-case/dist.es2015/index.js"),build_module_select=__webpack_require__("./packages/data/build-module/select.js"),build_module_dispatch=__webpack_require__("./packages/data/build-module/dispatch.js");const i18nBlockSchema={title:"block title",description:"block description",keywords:["block keyword"],styles:[{label:"block style label"}],variations:[{title:"block variation title",description:"block variation description",keywords:["block variation keyword"]}]},serverSideBlockDefinitions={};function isObject(object){return null!==object&&"object"==typeof object}function getBlockSettingsFromMetadata({textdomain,...metadata}){const allowedFields=["apiVersion","title","category","parent","ancestor","icon","description","keywords","attributes","providesContext","usesContext","selectors","supports","styles","example","variations"],settings=Object.fromEntries(Object.entries(metadata).filter((([key])=>allowedFields.includes(key))));return textdomain&&Object.keys(i18nBlockSchema).forEach((key=>{settings[key]&&(settings[key]=translateBlockSettingUsingI18nSchema(i18nBlockSchema[key],settings[key],textdomain))})),settings}function registerBlockType(blockNameOrMetadata,settings){const name=isObject(blockNameOrMetadata)?blockNameOrMetadata.name:blockNameOrMetadata;if("string"!=typeof name)return void console.error("Block names must be strings.");if(!/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(name))return void console.error("Block names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-block");if((0,build_module_select.Y)(store).getBlockType(name))return void console.error('Block "'+name+'" is already registered.');isObject(blockNameOrMetadata)&&function unstable__bootstrapServerSideBlockDefinitions(definitions){for(const blockName of Object.keys(definitions))serverSideBlockDefinitions[blockName]?(void 0===serverSideBlockDefinitions[blockName].apiVersion&&definitions[blockName].apiVersion&&(serverSideBlockDefinitions[blockName].apiVersion=definitions[blockName].apiVersion),void 0===serverSideBlockDefinitions[blockName].ancestor&&definitions[blockName].ancestor&&(serverSideBlockDefinitions[blockName].ancestor=definitions[blockName].ancestor),void 0===serverSideBlockDefinitions[blockName].selectors&&definitions[blockName].selectors&&(serverSideBlockDefinitions[blockName].selectors=definitions[blockName].selectors)):serverSideBlockDefinitions[blockName]=Object.fromEntries(Object.entries(definitions[blockName]).filter((([,value])=>null!=value)).map((([key,value])=>[(0,dist_es2015.eV)(key),value])))}({[name]:getBlockSettingsFromMetadata(blockNameOrMetadata)});const blockType={name,icon:BLOCK_ICON_DEFAULT,keywords:[],attributes:{},providesContext:{},usesContext:[],selectors:{},supports:{},styles:[],variations:[],save:()=>null,...serverSideBlockDefinitions?.[name],...settings};return(0,build_module_dispatch.W)(store).__experimentalRegisterBlockType(blockType),(0,build_module_select.Y)(store).getBlockType(name)}function translateBlockSettingUsingI18nSchema(i18nSchema,settingValue,textdomain){return"string"==typeof i18nSchema&&"string"==typeof settingValue?(0,i18n_build_module._x)(settingValue,i18nSchema,textdomain):Array.isArray(i18nSchema)&&i18nSchema.length&&Array.isArray(settingValue)?settingValue.map((value=>translateBlockSettingUsingI18nSchema(i18nSchema[0],value,textdomain))):isObject(i18nSchema)&&Object.entries(i18nSchema).length&&isObject(settingValue)?Object.keys(settingValue).reduce(((accumulator,key)=>i18nSchema[key]?(accumulator[key]=translateBlockSettingUsingI18nSchema(i18nSchema[key],settingValue[key],textdomain),accumulator):(accumulator[key]=settingValue[key],accumulator)),{}):settingValue}function setFreeformContentHandlerName(blockName){(0,build_module_dispatch.W)(store).setFreeformFallbackBlockName(blockName)}function getFreeformContentHandlerName(){return(0,build_module_select.Y)(store).getFreeformFallbackBlockName()}function getGroupingBlockName(){return(0,build_module_select.Y)(store).getGroupingBlockName()}function setUnregisteredTypeHandlerName(blockName){(0,build_module_dispatch.W)(store).setUnregisteredFallbackBlockName(blockName)}function getUnregisteredTypeHandlerName(){return(0,build_module_select.Y)(store).getUnregisteredFallbackBlockName()}function setDefaultBlockName(name){(0,build_module_dispatch.W)(store).setDefaultBlockName(name)}function setGroupingBlockName(name){(0,build_module_dispatch.W)(store).setGroupingBlockName(name)}function getDefaultBlockName(){return(0,build_module_select.Y)(store).getDefaultBlockName()}function getBlockType(name){return(0,build_module_select.Y)(store)?.getBlockType(name)}function getBlockTypes(){return(0,build_module_select.Y)(store).getBlockTypes()}function getBlockSupport(nameOrType,feature,defaultSupports){return(0,build_module_select.Y)(store).getBlockSupport(nameOrType,feature,defaultSupports)}function hasBlockSupport(nameOrType,feature,defaultSupports){return(0,build_module_select.Y)(store).hasBlockSupport(nameOrType,feature,defaultSupports)}function isReusableBlock(blockOrType){return"core/block"===blockOrType?.name}function isTemplatePart(blockOrType){return"core/template-part"===blockOrType?.name}const getBlockVariations=(blockName,scope)=>(0,build_module_select.Y)(store).getBlockVariations(blockName,scope);var v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),hooks_build_module=__webpack_require__("./packages/hooks/build-module/index.js");function createBlock(name,attributes={},innerBlocks=[]){const sanitizedAttributes=__experimentalSanitizeBlockAttributes(name,attributes);return{clientId:(0,v4.Z)(),name,isValid:!0,attributes:sanitizedAttributes,innerBlocks}}function createBlocksFromInnerBlocksTemplate(innerBlocksOrTemplate=[]){return innerBlocksOrTemplate.map((innerBlock=>{const innerBlockTemplate=Array.isArray(innerBlock)?innerBlock:[innerBlock.name,innerBlock.attributes,innerBlock.innerBlocks],[name,attributes,innerBlocks=[]]=innerBlockTemplate;return createBlock(name,attributes,createBlocksFromInnerBlocksTemplate(innerBlocks))}))}function __experimentalCloneSanitizedBlock(block,mergeAttributes={},newInnerBlocks){const clientId=(0,v4.Z)(),sanitizedAttributes=__experimentalSanitizeBlockAttributes(block.name,{...block.attributes,...mergeAttributes});return{...block,clientId,attributes:sanitizedAttributes,innerBlocks:newInnerBlocks||block.innerBlocks.map((innerBlock=>__experimentalCloneSanitizedBlock(innerBlock)))}}function cloneBlock(block,mergeAttributes={},newInnerBlocks){const clientId=(0,v4.Z)();return{...block,clientId,attributes:{...block.attributes,...mergeAttributes},innerBlocks:newInnerBlocks||block.innerBlocks.map((innerBlock=>cloneBlock(innerBlock)))}}const isPossibleTransformForSource=(transform,direction,blocks)=>{if(!blocks.length)return!1;const isMultiBlock=blocks.length>1,firstBlockName=blocks[0].name;if(!(isWildcardBlockTransform(transform)||!isMultiBlock||transform.isMultiBlock))return!1;if(!isWildcardBlockTransform(transform)&&!blocks.every((block=>block.name===firstBlockName)))return!1;if(!("block"===transform.type))return!1;const sourceBlock=blocks[0];return!("from"===direction&&-1===transform.blocks.indexOf(sourceBlock.name)&&!isWildcardBlockTransform(transform))&&(!(!isMultiBlock&&"from"===direction&&isContainerGroupBlock(sourceBlock.name)&&isContainerGroupBlock(transform.blockName))&&!!maybeCheckTransformIsMatch(transform,blocks))},getBlockTypesForPossibleFromTransforms=blocks=>{if(!blocks.length)return[];return getBlockTypes().filter((blockType=>!!findTransform(getBlockTransforms("from",blockType.name),(transform=>isPossibleTransformForSource(transform,"from",blocks)))))},getBlockTypesForPossibleToTransforms=blocks=>{if(!blocks.length)return[];const blockType=getBlockType(blocks[0].name);return(blockType?getBlockTransforms("to",blockType.name):[]).filter((transform=>transform&&isPossibleTransformForSource(transform,"to",blocks))).map((transformation=>transformation.blocks)).flat().map(getBlockType)},isWildcardBlockTransform=t=>t&&"block"===t.type&&Array.isArray(t.blocks)&&t.blocks.includes("*"),isContainerGroupBlock=name=>name===getGroupingBlockName();function getPossibleBlockTransformations(blocks){if(!blocks.length)return[];const blockTypesForFromTransforms=getBlockTypesForPossibleFromTransforms(blocks),blockTypesForToTransforms=getBlockTypesForPossibleToTransforms(blocks);return[...new Set([...blockTypesForFromTransforms,...blockTypesForToTransforms])]}function findTransform(transforms,predicate){const hooks=(0,hooks_build_module.Hu)();for(let i=0;i<transforms.length;i++){const candidate=transforms[i];predicate(candidate)&&hooks.addFilter("transform","transform/"+i.toString(),(result=>result||candidate),candidate.priority)}return hooks.applyFilters("transform",null)}function getBlockTransforms(direction,blockTypeOrName){if(void 0===blockTypeOrName)return getBlockTypes().map((({name})=>getBlockTransforms(direction,name))).flat();const blockType=utils_normalizeBlockType(blockTypeOrName),{name:blockName,transforms}=blockType||{};if(!transforms||!Array.isArray(transforms[direction]))return[];const usingMobileTransformations=transforms.supportedMobileTransforms&&Array.isArray(transforms.supportedMobileTransforms);return(usingMobileTransformations?transforms[direction].filter((t=>"raw"===t.type||!(!t.blocks||!t.blocks.length)&&(!!isWildcardBlockTransform(t)||t.blocks.every((transformBlockName=>transforms.supportedMobileTransforms.includes(transformBlockName)))))):transforms[direction]).map((transform=>({...transform,blockName,usingMobileTransformations})))}function maybeCheckTransformIsMatch(transform,blocks){if("function"!=typeof transform.isMatch)return!0;const sourceBlock=blocks[0],attributes=transform.isMultiBlock?blocks.map((block=>block.attributes)):sourceBlock.attributes,block=transform.isMultiBlock?blocks:sourceBlock;return transform.isMatch(attributes,block)}function switchToBlockType(blocks,name){const blocksArray=Array.isArray(blocks)?blocks:[blocks],isMultiBlock=blocksArray.length>1,firstBlock=blocksArray[0],sourceName=firstBlock.name,transformationsFrom=getBlockTransforms("from",name),transformation=findTransform(getBlockTransforms("to",sourceName),(t=>"block"===t.type&&(isWildcardBlockTransform(t)||-1!==t.blocks.indexOf(name))&&(!isMultiBlock||t.isMultiBlock)&&maybeCheckTransformIsMatch(t,blocksArray)))||findTransform(transformationsFrom,(t=>"block"===t.type&&(isWildcardBlockTransform(t)||-1!==t.blocks.indexOf(sourceName))&&(!isMultiBlock||t.isMultiBlock)&&maybeCheckTransformIsMatch(t,blocksArray)));if(!transformation)return null;let transformationResults;if(transformationResults=transformation.isMultiBlock?"__experimentalConvert"in transformation?transformation.__experimentalConvert(blocksArray):transformation.transform(blocksArray.map((currentBlock=>currentBlock.attributes)),blocksArray.map((currentBlock=>currentBlock.innerBlocks))):"__experimentalConvert"in transformation?transformation.__experimentalConvert(firstBlock):transformation.transform(firstBlock.attributes,firstBlock.innerBlocks),null===transformationResults||"object"!=typeof transformationResults)return null;if(transformationResults=Array.isArray(transformationResults)?transformationResults:[transformationResults],transformationResults.some((result=>!getBlockType(result.name))))return null;if(!transformationResults.some((result=>result.name===name)))return null;return transformationResults.map(((result,index,results)=>(0,hooks_build_module.O)("blocks.switchToBlockType.transformedBlock",result,blocks,index,results)))}const getBlockFromExample=(name,example)=>{var _example$innerBlocks;return createBlock(name,example.attributes,(null!==(_example$innerBlocks=example.innerBlocks)&&void 0!==_example$innerBlocks?_example$innerBlocks:[]).map((innerBlock=>getBlockFromExample(innerBlock.name,innerBlock))))};(0,colord.l7)([names.Z,a11y.Z]);const ICON_COLORS=["#191e23","#f8f9f9"];function isUnmodifiedBlock(block){var _blockType$attributes;isUnmodifiedBlock[block.name]||(isUnmodifiedBlock[block.name]=createBlock(block.name));const newBlock=isUnmodifiedBlock[block.name],blockType=getBlockType(block.name);return Object.keys(null!==(_blockType$attributes=blockType?.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{}).every((key=>newBlock.attributes[key]===block.attributes[key]))}function isUnmodifiedDefaultBlock(block){return block.name===getDefaultBlockName()&&isUnmodifiedBlock(block)}function isValidIcon(icon){return!!icon&&("string"==typeof icon||(0,react.isValidElement)(icon)||"function"==typeof icon||icon instanceof react.Component)}function utils_normalizeBlockType(blockTypeOrName){return"string"==typeof blockTypeOrName?getBlockType(blockTypeOrName):blockTypeOrName}function getBlockLabel(blockType,attributes,context="visual"){const{__experimentalLabel:getLabel,title}=blockType,label=getLabel&&getLabel(attributes,{context});return label?(0,strip_html.Z)(label):title}function getAccessibleBlockLabel(blockType,attributes,position,direction="vertical"){const title=blockType?.title,label=blockType?getBlockLabel(blockType,attributes,"accessibility"):"",hasPosition=void 0!==position,hasLabel=label&&label!==title;return hasPosition&&"vertical"===direction?hasLabel?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. Row %2$d. %3$s"),title,position,label):(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. Row %2$d"),title,position):hasPosition&&"horizontal"===direction?hasLabel?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. Column %2$d. %3$s"),title,position,label):(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. Column %2$d"),title,position):hasLabel?(0,i18n_build_module.gB)((0,i18n_build_module.__)("%1$s Block. %2$s"),title,label):(0,i18n_build_module.gB)((0,i18n_build_module.__)("%s Block"),title)}function __experimentalSanitizeBlockAttributes(name,attributes){const blockType=getBlockType(name);if(void 0===blockType)throw new Error(`Block type '${name}' is not registered.`);return Object.entries(blockType.attributes).reduce(((accumulator,[key,schema])=>{const value=attributes[key];return void 0!==value?accumulator[key]=value:schema.hasOwnProperty("default")&&(accumulator[key]=schema.default),-1!==["node","children"].indexOf(schema.source)&&("string"==typeof accumulator[key]?accumulator[key]=[accumulator[key]]:Array.isArray(accumulator[key])||(accumulator[key]=[])),accumulator}),{})}function __experimentalGetBlockAttributesNamesByRole(name,role){const attributes=getBlockType(name)?.attributes;if(!attributes)return[];const attributesNames=Object.keys(attributes);return role?attributesNames.filter((attributeName=>attributes[attributeName]?.__experimentalRole===role)):attributesNames}function omit(object,keys){return Object.fromEntries(Object.entries(object).filter((([key])=>!keys.includes(key))))}const DEFAULT_CATEGORIES=[{slug:"text",title:(0,i18n_build_module.__)("Text")},{slug:"media",title:(0,i18n_build_module.__)("Media")},{slug:"design",title:(0,i18n_build_module.__)("Design")},{slug:"widgets",title:(0,i18n_build_module.__)("Widgets")},{slug:"theme",title:(0,i18n_build_module.__)("Theme")},{slug:"embed",title:(0,i18n_build_module.__)("Embeds")},{slug:"reusable",title:(0,i18n_build_module.__)("Reusable blocks")}];function keyBlockTypesByName(types){return types.reduce(((newBlockTypes,block)=>({...newBlockTypes,[block.name]:block})),{})}function getUniqueItemsByName(items){return items.reduce(((acc,currentItem)=>(acc.some((item=>item.name===currentItem.name))||acc.push(currentItem),acc)),[])}function createBlockNameSetterReducer(setActionType){return(state=null,action)=>{switch(action.type){case"REMOVE_BLOCK_TYPES":return-1!==action.names.indexOf(state)?null:state;case setActionType:return action.name||null}return state}}const defaultBlockName=createBlockNameSetterReducer("SET_DEFAULT_BLOCK_NAME"),freeformFallbackBlockName=createBlockNameSetterReducer("SET_FREEFORM_FALLBACK_BLOCK_NAME"),unregisteredFallbackBlockName=createBlockNameSetterReducer("SET_UNREGISTERED_FALLBACK_BLOCK_NAME"),groupingBlockName=createBlockNameSetterReducer("SET_GROUPING_BLOCK_NAME");const reducer=(0,build_module.UY)({unprocessedBlockTypes:function unprocessedBlockTypes(state={},action){switch(action.type){case"ADD_UNPROCESSED_BLOCK_TYPE":return{...state,[action.blockType.name]:action.blockType};case"REMOVE_BLOCK_TYPES":return omit(state,action.names)}return state},blockTypes:function blockTypes(state={},action){switch(action.type){case"ADD_BLOCK_TYPES":return{...state,...keyBlockTypesByName(action.blockTypes)};case"REMOVE_BLOCK_TYPES":return omit(state,action.names)}return state},blockStyles:function blockStyles(state={},action){var _state$action$blockNa,_state$action$blockNa2;switch(action.type){case"ADD_BLOCK_TYPES":return{...state,...Object.fromEntries(Object.entries(keyBlockTypesByName(action.blockTypes)).map((([name,blockType])=>{var _blockType$styles,_state$blockType$name;return[name,getUniqueItemsByName([...(null!==(_blockType$styles=blockType.styles)&&void 0!==_blockType$styles?_blockType$styles:[]).map((style=>({...style,source:"block"}))),...(null!==(_state$blockType$name=state[blockType.name])&&void 0!==_state$blockType$name?_state$blockType$name:[]).filter((({source})=>"block"!==source))])]})))};case"ADD_BLOCK_STYLES":return{...state,[action.blockName]:getUniqueItemsByName([...null!==(_state$action$blockNa=state[action.blockName])&&void 0!==_state$action$blockNa?_state$action$blockNa:[],...action.styles])};case"REMOVE_BLOCK_STYLES":return{...state,[action.blockName]:(null!==(_state$action$blockNa2=state[action.blockName])&&void 0!==_state$action$blockNa2?_state$action$blockNa2:[]).filter((style=>-1===action.styleNames.indexOf(style.name)))}}return state},blockVariations:function blockVariations(state={},action){var _state$action$blockNa3,_state$action$blockNa4;switch(action.type){case"ADD_BLOCK_TYPES":return{...state,...Object.fromEntries(Object.entries(keyBlockTypesByName(action.blockTypes)).map((([name,blockType])=>{var _blockType$variations,_state$blockType$name2;return[name,getUniqueItemsByName([...(null!==(_blockType$variations=blockType.variations)&&void 0!==_blockType$variations?_blockType$variations:[]).map((variation=>({...variation,source:"block"}))),...(null!==(_state$blockType$name2=state[blockType.name])&&void 0!==_state$blockType$name2?_state$blockType$name2:[]).filter((({source})=>"block"!==source))])]})))};case"ADD_BLOCK_VARIATIONS":return{...state,[action.blockName]:getUniqueItemsByName([...null!==(_state$action$blockNa3=state[action.blockName])&&void 0!==_state$action$blockNa3?_state$action$blockNa3:[],...action.variations])};case"REMOVE_BLOCK_VARIATIONS":return{...state,[action.blockName]:(null!==(_state$action$blockNa4=state[action.blockName])&&void 0!==_state$action$blockNa4?_state$action$blockNa4:[]).filter((variation=>-1===action.variationNames.indexOf(variation.name)))}}return state},defaultBlockName,freeformFallbackBlockName,unregisteredFallbackBlockName,groupingBlockName,categories:function categories(state=DEFAULT_CATEGORIES,action){switch(action.type){case"SET_CATEGORIES":return action.categories||[];case"UPDATE_CATEGORY":if(!action.category||!Object.keys(action.category).length)return state;if(state.find((({slug})=>slug===action.slug)))return state.map((category=>category.slug===action.slug?{...category,...action.category}:category))}return state},collections:function collections(state={},action){switch(action.type){case"ADD_BLOCK_COLLECTION":return{...state,[action.namespace]:{title:action.title,icon:action.icon}};case"REMOVE_BLOCK_COLLECTION":return omit(state,action.namespace)}return state}});var rememo=__webpack_require__("./node_modules/rememo/rememo.js"),remove_accents=__webpack_require__("./node_modules/remove-accents/index.js"),remove_accents_default=__webpack_require__.n(remove_accents),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),pipe=__webpack_require__("./packages/compose/build-module/higher-order/pipe.js");const getNormalizedBlockType=(state,nameOrType)=>"string"==typeof nameOrType?selectors_getBlockType(state,nameOrType):nameOrType;function __experimentalGetUnprocessedBlockTypes(state){return state.unprocessedBlockTypes}const selectors_getBlockTypes=(0,rememo.Z)((state=>Object.values(state.blockTypes)),(state=>[state.blockTypes]));function selectors_getBlockType(state,name){return state.blockTypes[name]}function getBlockStyles(state,name){return state.blockStyles[name]}const selectors_getBlockVariations=(0,rememo.Z)(((state,blockName,scope)=>{const variations=state.blockVariations[blockName];return variations&&scope?variations.filter((variation=>(variation.scope||["block","inserter"]).includes(scope))):variations}),((state,blockName)=>[state.blockVariations[blockName]]));function getActiveBlockVariation(state,blockName,attributes,scope){const variations=selectors_getBlockVariations(state,blockName,scope),match=variations?.find((variation=>{if(Array.isArray(variation.isActive)){const blockType=selectors_getBlockType(state,blockName),attributeKeys=Object.keys(blockType?.attributes||{}),definedAttributes=variation.isActive.filter((attribute=>attributeKeys.includes(attribute)));return 0!==definedAttributes.length&&definedAttributes.every((attribute=>attributes[attribute]===variation.attributes[attribute]))}return variation.isActive?.(attributes,variation.attributes)}));return match}function getDefaultBlockVariation(state,blockName,scope){const variations=selectors_getBlockVariations(state,blockName,scope);return[...variations].reverse().find((({isDefault})=>!!isDefault))||variations[0]}function getCategories(state){return state.categories}function getCollections(state){return state.collections}function selectors_getDefaultBlockName(state){return state.defaultBlockName}function getFreeformFallbackBlockName(state){return state.freeformFallbackBlockName}function getUnregisteredFallbackBlockName(state){return state.unregisteredFallbackBlockName}function selectors_getGroupingBlockName(state){return state.groupingBlockName}const selectors_getChildBlockNames=(0,rememo.Z)(((state,blockName)=>selectors_getBlockTypes(state).filter((blockType=>blockType.parent?.includes(blockName))).map((({name})=>name))),(state=>[state.blockTypes])),selectors_getBlockSupport=(state,nameOrType,feature,defaultSupports)=>{const blockType=getNormalizedBlockType(state,nameOrType);return blockType?.supports?(0,lodash.get)(blockType.supports,feature,defaultSupports):defaultSupports};function selectors_hasBlockSupport(state,nameOrType,feature,defaultSupports){return!!selectors_getBlockSupport(state,nameOrType,feature,defaultSupports)}function isMatchingSearchTerm(state,nameOrType,searchTerm){const blockType=getNormalizedBlockType(state,nameOrType),getNormalizedSearchTerm=(0,pipe.Z)([term=>remove_accents_default()(null!=term?term:""),term=>term.toLowerCase(),term=>term.trim()]),normalizedSearchTerm=getNormalizedSearchTerm(searchTerm),isSearchMatch=(0,pipe.Z)([getNormalizedSearchTerm,normalizedCandidate=>normalizedCandidate.includes(normalizedSearchTerm)]);return isSearchMatch(blockType.title)||blockType.keywords?.some(isSearchMatch)||isSearchMatch(blockType.category)||"string"==typeof blockType.description&&isSearchMatch(blockType.description)}const selectors_hasChildBlocks=(state,blockName)=>selectors_getChildBlockNames(state,blockName).length>0,selectors_hasChildBlocksWithInserterSupport=(state,blockName)=>selectors_getChildBlockNames(state,blockName).some((childBlockName=>selectors_hasBlockSupport(state,childBlockName,"inserter",!0))),__experimentalHasContentRoleAttribute=(0,rememo.Z)(((state,blockTypeName)=>{const blockType=selectors_getBlockType(state,blockTypeName);return!!blockType&&Object.entries(blockType.attributes).some((([,{__experimentalRole}])=>"content"===__experimentalRole))}),((state,blockTypeName)=>[state.blockTypes[blockTypeName]?.attributes])),ROOT_BLOCK_SUPPORTS=["background","backgroundColor","color","linkColor","captionColor","buttonColor","headingColor","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","padding","contentSize","wideSize","blockGap","textDecoration","textTransform","letterSpacing"];function filterElementBlockSupports(blockSupports,name,element){return blockSupports.filter((support=>("fontSize"!==support||"heading"!==element)&&(!("textDecoration"===support&&!name&&"link"!==element)&&(!("textTransform"===support&&!name&&!["heading","h1","h2","h3","h4","h5","h6"].includes(element))&&(!("letterSpacing"===support&&!name&&!["heading","h1","h2","h3","h4","h5","h6"].includes(element))&&!("textColumns"===support&&!name))))))}const getSupportedStyles=(0,rememo.Z)(((state,name,element)=>{if(!name)return filterElementBlockSupports(ROOT_BLOCK_SUPPORTS,name,element);const blockType=selectors_getBlockType(state,name);if(!blockType)return[];const supportKeys=[];return blockType?.supports?.spacing?.blockGap&&!0!==blockType?.supports?.spacing?.__experimentalSkipSerialization&&!blockType?.supports?.spacing?.__experimentalSkipSerialization?.some?.((spacingType=>"blockGap"===spacingType))&&supportKeys.push("blockGap"),blockType?.supports?.shadow&&supportKeys.push("shadow"),Object.keys(__EXPERIMENTAL_STYLE_PROPERTY).forEach((styleName=>{__EXPERIMENTAL_STYLE_PROPERTY[styleName].support&&(__EXPERIMENTAL_STYLE_PROPERTY[styleName].requiresOptOut&&__EXPERIMENTAL_STYLE_PROPERTY[styleName].support[0]in blockType.supports&&!1!==(0,lodash.get)(blockType.supports,__EXPERIMENTAL_STYLE_PROPERTY[styleName].support)||(0,lodash.get)(blockType.supports,__EXPERIMENTAL_STYLE_PROPERTY[styleName].support,!1))&&supportKeys.push(styleName)})),filterElementBlockSupports(supportKeys,name,element)}),((state,name)=>[state.blockTypes[name]]));var is_plain_object=__webpack_require__("./node_modules/is-plain-object/dist/is-plain-object.mjs"),deprecated_build_module=__webpack_require__("./packages/deprecated/build-module/index.js");const{error,warn}=window.console,LEGACY_CATEGORY_MAPPING={common:"text",formatting:"text",layout:"design"};function isFunction(maybeFunc){return"function"==typeof maybeFunc}const processBlockType=(blockType,{select})=>{const{name}=blockType,settings=(0,hooks_build_module.O)("blocks.registerBlockType",{...blockType},name,null);if(settings.description&&"string"!=typeof settings.description&&(0,deprecated_build_module.Z)("Declaring non-string block descriptions",{since:"6.2"}),settings.deprecated&&(settings.deprecated=settings.deprecated.map((deprecation=>Object.fromEntries(Object.entries((0,hooks_build_module.O)("blocks.registerBlockType",{...omit(blockType,DEPRECATED_ENTRY_KEYS),...deprecation},name,deprecation)).filter((([key])=>DEPRECATED_ENTRY_KEYS.includes(key))))))),(0,is_plain_object.P)(settings))if(isFunction(settings.save))if(!("edit"in settings)||isFunction(settings.edit))if(LEGACY_CATEGORY_MAPPING.hasOwnProperty(settings.category)&&(settings.category=LEGACY_CATEGORY_MAPPING[settings.category]),"category"in settings&&!select.getCategories().some((({slug})=>slug===settings.category))&&(warn('The block "'+name+'" is registered with an invalid category "'+settings.category+'".'),delete settings.category),"title"in settings&&""!==settings.title)if("string"==typeof settings.title){if(settings.icon=function normalizeIconObject(icon){if(isValidIcon(icon=icon||BLOCK_ICON_DEFAULT))return{src:icon};if("background"in icon){const colordBgColor=(0,colord.Vi)(icon.background),getColorContrast=iconColor=>colordBgColor.contrast(iconColor),maxContrast=Math.max(...ICON_COLORS.map(getColorContrast));return{...icon,foreground:icon.foreground?icon.foreground:ICON_COLORS.find((iconColor=>getColorContrast(iconColor)===maxContrast)),shadowColor:colordBgColor.alpha(.3).toRgbString()}}return icon}(settings.icon),isValidIcon(settings.icon.src))return settings;error("The icon passed is invalid. The icon should be a string, an element, a function, or an object following the specifications documented in https://developer.wordpress.org/block-editor/developers/block-api/block-registration/#icon-optional")}else error("Block titles must be strings.");else error('The block "'+name+'" must have a title.');else error('The "edit" property must be a valid function.');else error('The "save" property must be a valid function.');else error("Block settings must be a valid object.")};function addBlockTypes(blockTypes){return{type:"ADD_BLOCK_TYPES",blockTypes:Array.isArray(blockTypes)?blockTypes:[blockTypes]}}const __experimentalRegisterBlockType=blockType=>({dispatch,select})=>{dispatch({type:"ADD_UNPROCESSED_BLOCK_TYPE",blockType});const processedBlockType=processBlockType(blockType,{select});processedBlockType&&dispatch.addBlockTypes(processedBlockType)},__experimentalReapplyBlockTypeFilters=()=>({dispatch,select})=>{const unprocessedBlockTypes=select.__experimentalGetUnprocessedBlockTypes(),processedBlockTypes=Object.keys(unprocessedBlockTypes).reduce(((accumulator,blockName)=>{const result=processBlockType(unprocessedBlockTypes[blockName],{select});return result&&accumulator.push(result),accumulator}),[]);processedBlockTypes.length&&dispatch.addBlockTypes(processedBlockTypes)};function removeBlockTypes(names){return{type:"REMOVE_BLOCK_TYPES",names:Array.isArray(names)?names:[names]}}function addBlockStyles(blockName,styles){return{type:"ADD_BLOCK_STYLES",styles:Array.isArray(styles)?styles:[styles],blockName}}function removeBlockStyles(blockName,styleNames){return{type:"REMOVE_BLOCK_STYLES",styleNames:Array.isArray(styleNames)?styleNames:[styleNames],blockName}}function addBlockVariations(blockName,variations){return{type:"ADD_BLOCK_VARIATIONS",variations:Array.isArray(variations)?variations:[variations],blockName}}function removeBlockVariations(blockName,variationNames){return{type:"REMOVE_BLOCK_VARIATIONS",variationNames:Array.isArray(variationNames)?variationNames:[variationNames],blockName}}function actions_setDefaultBlockName(name){return{type:"SET_DEFAULT_BLOCK_NAME",name}}function setFreeformFallbackBlockName(name){return{type:"SET_FREEFORM_FALLBACK_BLOCK_NAME",name}}function setUnregisteredFallbackBlockName(name){return{type:"SET_UNREGISTERED_FALLBACK_BLOCK_NAME",name}}function actions_setGroupingBlockName(name){return{type:"SET_GROUPING_BLOCK_NAME",name}}function setCategories(categories){return{type:"SET_CATEGORIES",categories}}function updateCategory(slug,category){return{type:"UPDATE_CATEGORY",slug,category}}function addBlockCollection(namespace,title,icon){return{type:"ADD_BLOCK_COLLECTION",namespace,title,icon}}function removeBlockCollection(namespace){return{type:"REMOVE_BLOCK_COLLECTION",namespace}}var implementation=__webpack_require__("./packages/private-apis/build-module/implementation.js");const{lock,unlock}=(0,implementation.es)("I know using unstable features means my plugin or theme will inevitably break on the next WordPress release.","@wordpress/blocks"),store=(0,redux_store.Z)("core/blocks",{reducer,selectors:selectors_namespaceObject,actions:actions_namespaceObject});let build_module_document,offset,output,stack;(0,build_module.z2)(store),unlock(store).registerPrivateSelectors(private_selectors_namespaceObject);const tokenizer=/<!--\s+(\/)?wp:([a-z][a-z0-9_-]*\/)?([a-z][a-z0-9_-]*)\s+({(?:(?=([^}]+|}+(?=})|(?!}\s+\/?-->)[^])*)\5|[^]*?)}\s+)?(\/)?-->/g;function Block(blockName,attrs,innerBlocks,innerHTML,innerContent){return{blockName,attrs,innerBlocks,innerHTML,innerContent}}function Freeform(innerHTML){return Block(null,{},[],innerHTML,[innerHTML])}const parse=doc=>{build_module_document=doc,offset=0,output=[],stack=[],tokenizer.lastIndex=0;do{}while(proceed());return output};function proceed(){const stackDepth=stack.length,next=function nextToken(){const matches=tokenizer.exec(build_module_document);if(null===matches)return["no-more-tokens","",null,0,0];const startedAt=matches.index,[match,closerMatch,namespaceMatch,nameMatch,attrsMatch,,voidMatch]=matches,length=match.length,isCloser=!!closerMatch,isVoid=!!voidMatch,name=(namespaceMatch||"core/")+nameMatch,hasAttrs=!!attrsMatch,attrs=hasAttrs?function parseJSON(input){try{return JSON.parse(input)}catch(e){return null}}(attrsMatch):{};if(isVoid)return["void-block",name,attrs,startedAt,length];if(isCloser)return["block-closer",name,null,startedAt,length];return["block-opener",name,attrs,startedAt,length]}(),[tokenType,blockName,attrs,startOffset,tokenLength]=next,leadingHtmlStart=startOffset>offset?offset:null;switch(tokenType){case"no-more-tokens":if(0===stackDepth)return addFreeform(),!1;if(1===stackDepth)return addBlockFromStack(),!1;for(;0<stack.length;)addBlockFromStack();return!1;case"void-block":return 0===stackDepth?(null!==leadingHtmlStart&&output.push(Freeform(build_module_document.substr(leadingHtmlStart,startOffset-leadingHtmlStart))),output.push(Block(blockName,attrs,[],"",[])),offset=startOffset+tokenLength,!0):(addInnerBlock(Block(blockName,attrs,[],"",[]),startOffset,tokenLength),offset=startOffset+tokenLength,!0);case"block-opener":return stack.push(function Frame(block,tokenStart,tokenLength,prevOffset,leadingHtmlStart){return{block,tokenStart,tokenLength,prevOffset:prevOffset||tokenStart+tokenLength,leadingHtmlStart}}(Block(blockName,attrs,[],"",[]),startOffset,tokenLength,startOffset+tokenLength,leadingHtmlStart)),offset=startOffset+tokenLength,!0;case"block-closer":if(0===stackDepth)return addFreeform(),!1;if(1===stackDepth)return addBlockFromStack(startOffset),offset=startOffset+tokenLength,!0;const stackTop=stack.pop(),html=build_module_document.substr(stackTop.prevOffset,startOffset-stackTop.prevOffset);return stackTop.block.innerHTML+=html,stackTop.block.innerContent.push(html),stackTop.prevOffset=startOffset+tokenLength,addInnerBlock(stackTop.block,stackTop.tokenStart,stackTop.tokenLength,startOffset+tokenLength),offset=startOffset+tokenLength,!0;default:return addFreeform(),!1}}function addFreeform(rawLength){const length=rawLength||build_module_document.length-offset;0!==length&&output.push(Freeform(build_module_document.substr(offset,length)))}function addInnerBlock(block,tokenStart,tokenLength,lastOffset){const parent=stack[stack.length-1];parent.block.innerBlocks.push(block);const html=build_module_document.substr(parent.prevOffset,tokenStart-parent.prevOffset);html&&(parent.block.innerHTML+=html,parent.block.innerContent.push(html)),parent.block.innerContent.push(null),parent.prevOffset=lastOffset||tokenStart+tokenLength}function addBlockFromStack(endOffset){const{block,leadingHtmlStart,prevOffset,tokenStart}=stack.pop(),html=endOffset?build_module_document.substr(prevOffset,endOffset-prevOffset):build_module_document.substr(prevOffset);html&&(block.innerHTML+=html,block.innerContent.push(html)),null!==leadingHtmlStart&&output.push(Freeform(build_module_document.substr(leadingHtmlStart,tokenStart-leadingHtmlStart))),output.push(block)}var autop_build_module=__webpack_require__("./packages/autop/build-module/index.js"),raw_html=__webpack_require__("./packages/element/build-module/raw-html.js"),serialize=__webpack_require__("./packages/element/build-module/serialize.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js");function serializeRawBlock(rawBlock,options={}){const{isCommentDelimited=!0}=options,{blockName,attrs={},innerBlocks=[],innerContent=[]}=rawBlock;let childIndex=0;const content=innerContent.map((item=>null!==item?item:serializeRawBlock(innerBlocks[childIndex++],options))).join("\n").replace(/\n+/g,"\n").trim();return isCommentDelimited?getCommentDelimitedContent(blockName,attrs,content):content}function getBlockDefaultClassName(blockName){const className="wp-block-"+blockName.replace(/\//,"-").replace(/^core-/,"");return(0,hooks_build_module.O)("blocks.getBlockDefaultClassName",className,blockName)}function getBlockMenuDefaultClassName(blockName){const className="editor-block-list-item-"+blockName.replace(/\//,"-").replace(/^core-/,"");return(0,hooks_build_module.O)("blocks.getBlockMenuDefaultClassName",className,blockName)}const blockPropsProvider={},innerBlocksPropsProvider={};function getBlockProps(props={}){const{blockType,attributes}=blockPropsProvider;return(0,hooks_build_module.O)("blocks.getSaveContent.extraProps",{...props},blockType,attributes)}function getInnerBlocksProps(props={}){const{innerBlocks}=innerBlocksPropsProvider,html=serializer_serialize(innerBlocks,{isInnerBlocks:!0});return{...props,children:(0,react.createElement)(raw_html.Z,null,html)}}function getSaveContent(blockTypeOrName,attributes,innerBlocks){const blockType=utils_normalizeBlockType(blockTypeOrName);return(0,serialize.ZP)(function getSaveElement(blockTypeOrName,attributes,innerBlocks=[]){const blockType=utils_normalizeBlockType(blockTypeOrName);let{save}=blockType;if(save.prototype instanceof react.Component){const instance=new save({attributes});save=instance.render.bind(instance)}blockPropsProvider.blockType=blockType,blockPropsProvider.attributes=attributes,innerBlocksPropsProvider.innerBlocks=innerBlocks;let element=save({attributes,innerBlocks});if(null!==element&&"object"==typeof element&&(0,hooks_build_module.H7)("blocks.getSaveContent.extraProps")&&!(blockType.apiVersion>1)){const props=(0,hooks_build_module.O)("blocks.getSaveContent.extraProps",{...element.props},blockType,attributes);(0,is_shallow_equal_build_module.ZP)(props,element.props)||(element=(0,react.cloneElement)(element,props))}return(0,hooks_build_module.O)("blocks.getSaveElement",element,blockType,attributes)}(blockType,attributes,innerBlocks))}function getBlockInnerHTML(block){let saveContent=block.originalContent;if(block.isValid||block.innerBlocks.length)try{saveContent=getSaveContent(block.name,block.attributes,block.innerBlocks)}catch(error){}return saveContent}function getCommentDelimitedContent(rawBlockName,attributes,content){const serializedAttributes=attributes&&Object.entries(attributes).length?function serializeAttributes(attributes){return JSON.stringify(attributes).replace(/--/g,"\\u002d\\u002d").replace(/</g,"\\u003c").replace(/>/g,"\\u003e").replace(/&/g,"\\u0026").replace(/\\"/g,"\\u0022")}(attributes)+" ":"",blockName=rawBlockName?.startsWith("core/")?rawBlockName.slice(5):rawBlockName;return content?`\x3c!-- wp:${blockName} ${serializedAttributes}--\x3e\n`+content+`\n\x3c!-- /wp:${blockName} --\x3e`:`\x3c!-- wp:${blockName} ${serializedAttributes}/--\x3e`}function serializeBlock(block,{isInnerBlocks=!1}={}){if(!block.isValid&&block.__unstableBlockSource)return serializeRawBlock(block.__unstableBlockSource);const blockName=block.name,saveContent=getBlockInnerHTML(block);if(blockName===getUnregisteredTypeHandlerName()||!isInnerBlocks&&blockName===getFreeformContentHandlerName())return saveContent;const blockType=getBlockType(blockName);if(!blockType)return saveContent;const saveAttributes=function getCommentAttributes(blockType,attributes){var _blockType$attributes;return Object.entries(null!==(_blockType$attributes=blockType.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{}).reduce(((accumulator,[key,attributeSchema])=>{const value=attributes[key];return void 0===value||void 0!==attributeSchema.source||"default"in attributeSchema&&attributeSchema.default===value||(accumulator[key]=value),accumulator}),{})}(blockType,block.attributes);return getCommentDelimitedContent(blockName,saveAttributes,saveContent)}function __unstableSerializeAndClean(blocks){1===blocks.length&&isUnmodifiedDefaultBlock(blocks[0])&&(blocks=[]);let content=serializer_serialize(blocks);return 1===blocks.length&&blocks[0].name===getFreeformContentHandlerName()&&(content=(0,autop_build_module.A)(content)),content}function serializer_serialize(blocks,options){return(Array.isArray(blocks)?blocks:[blocks]).map((block=>serializeBlock(block,options))).join("\n\n")}var es6=__webpack_require__("./node_modules/simple-html-tokenizer/dist/es6/index.js"),fast_deep_equal_es6=__webpack_require__("./node_modules/fast-deep-equal/es6/index.js"),es6_default=__webpack_require__.n(fast_deep_equal_es6),html_entities_build_module=__webpack_require__("./packages/html-entities/build-module/index.js");function createLogger(){function createLogHandler(logger){return(message,...args)=>logger("Block validation: "+message,...args)}return{error:createLogHandler(console.error),warning:createLogHandler(console.warn),getItems:()=>[]}}const REGEXP_WHITESPACE=/[\t\n\r\v\f ]+/g,REGEXP_ONLY_WHITESPACE=/^[\t\n\r\v\f ]*$/,REGEXP_STYLE_URL_TYPE=/^url\s*\(['"\s]*(.*?)['"\s]*\)$/,BOOLEAN_ATTRIBUTES=["allowfullscreen","allowpaymentrequest","allowusermedia","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","typemustmatch"],MEANINGFUL_ATTRIBUTES=[...BOOLEAN_ATTRIBUTES,"autocapitalize","autocomplete","charset","contenteditable","crossorigin","decoding","dir","draggable","enctype","formenctype","formmethod","http-equiv","inputmode","kind","method","preload","scope","shape","spellcheck","translate","type","wrap"],TEXT_NORMALIZATIONS=[x=>x,function getTextWithCollapsedWhitespace(text){return getTextPiecesSplitOnWhitespace(text).join(" ")}],REGEXP_NAMED_CHARACTER_REFERENCE=/^[\da-z]+$/i,REGEXP_DECIMAL_CHARACTER_REFERENCE=/^#\d+$/,REGEXP_HEXADECIMAL_CHARACTER_REFERENCE=/^#x[\da-f]+$/i;class DecodeEntityParser{parse(entity){if(function isValidCharacterReference(text){return REGEXP_NAMED_CHARACTER_REFERENCE.test(text)||REGEXP_DECIMAL_CHARACTER_REFERENCE.test(text)||REGEXP_HEXADECIMAL_CHARACTER_REFERENCE.test(text)}(entity))return(0,html_entities_build_module.S)("&"+entity+";")}}function getTextPiecesSplitOnWhitespace(text){return text.trim().split(REGEXP_WHITESPACE)}function getMeaningfulAttributePairs(token){return token.attributes.filter((pair=>{const[key,value]=pair;return value||0===key.indexOf("data-")||MEANINGFUL_ATTRIBUTES.includes(key)}))}function isEquivalentTextTokens(actual,expected,logger=createLogger()){let actualChars=actual.chars,expectedChars=expected.chars;for(let i=0;i<TEXT_NORMALIZATIONS.length;i++){const normalize=TEXT_NORMALIZATIONS[i];if(actualChars=normalize(actualChars),expectedChars=normalize(expectedChars),actualChars===expectedChars)return!0}return logger.warning("Expected text `%s`, saw `%s`.",expected.chars,actual.chars),!1}function getNormalizedLength(value){return 0===parseFloat(value)?"0":0===value.indexOf(".")?"0"+value:value}function getNormalizedStyleValue(value){return getTextPiecesSplitOnWhitespace(value).map(getNormalizedLength).join(" ").replace(REGEXP_STYLE_URL_TYPE,"url($1)")}function getStyleProperties(text){const pairs=text.replace(/;?\s*$/,"").split(";").map((style=>{const[key,...valueParts]=style.split(":"),value=valueParts.join(":");return[key.trim(),getNormalizedStyleValue(value.trim())]}));return Object.fromEntries(pairs)}const isEqualAttributesOfName={class:(actual,expected)=>{const[actualPieces,expectedPieces]=[actual,expected].map(getTextPiecesSplitOnWhitespace),actualDiff=actualPieces.filter((c=>!expectedPieces.includes(c))),expectedDiff=expectedPieces.filter((c=>!actualPieces.includes(c)));return 0===actualDiff.length&&0===expectedDiff.length},style:(actual,expected)=>es6_default()(...[actual,expected].map(getStyleProperties)),...Object.fromEntries(BOOLEAN_ATTRIBUTES.map((attribute=>[attribute,()=>!0])))};const isEqualTokensOfType={StartTag:(actual,expected,logger=createLogger())=>actual.tagName!==expected.tagName&&actual.tagName.toLowerCase()!==expected.tagName.toLowerCase()?(logger.warning("Expected tag name `%s`, instead saw `%s`.",expected.tagName,actual.tagName),!1):function isEqualTagAttributePairs(actual,expected,logger=createLogger()){if(actual.length!==expected.length)return logger.warning("Expected attributes %o, instead saw %o.",expected,actual),!1;const expectedAttributes={};for(let i=0;i<expected.length;i++)expectedAttributes[expected[i][0].toLowerCase()]=expected[i][1];for(let i=0;i<actual.length;i++){const[name,actualValue]=actual[i],nameLower=name.toLowerCase();if(!expectedAttributes.hasOwnProperty(nameLower))return logger.warning("Encountered unexpected attribute `%s`.",name),!1;const expectedValue=expectedAttributes[nameLower],isEqualAttributes=isEqualAttributesOfName[nameLower];if(isEqualAttributes){if(!isEqualAttributes(actualValue,expectedValue))return logger.warning("Expected attribute `%s` of value `%s`, saw `%s`.",name,expectedValue,actualValue),!1}else if(actualValue!==expectedValue)return logger.warning("Expected attribute `%s` of value `%s`, saw `%s`.",name,expectedValue,actualValue),!1}return!0}(...[actual,expected].map(getMeaningfulAttributePairs),logger),Chars:isEquivalentTextTokens,Comment:isEquivalentTextTokens};function getNextNonWhitespaceToken(tokens){let token;for(;token=tokens.shift();){if("Chars"!==token.type)return token;if(!REGEXP_ONLY_WHITESPACE.test(token.chars))return token}}function isClosedByToken(currentToken,nextToken){return!!currentToken.selfClosing&&!(!nextToken||nextToken.tagName!==currentToken.tagName||"EndTag"!==nextToken.type)}function isEquivalentHTML(actual,expected,logger=createLogger()){if(actual===expected)return!0;const[actualTokens,expectedTokens]=[actual,expected].map((html=>function getHTMLTokens(html,logger=createLogger()){try{return new es6.d2(new DecodeEntityParser).tokenize(html)}catch(e){logger.warning("Malformed HTML detected: %s",html)}return null}(html,logger)));if(!actualTokens||!expectedTokens)return!1;let actualToken,expectedToken;for(;actualToken=getNextNonWhitespaceToken(actualTokens);){if(expectedToken=getNextNonWhitespaceToken(expectedTokens),!expectedToken)return logger.warning("Expected end of content, instead saw %o.",actualToken),!1;if(actualToken.type!==expectedToken.type)return logger.warning("Expected token of type `%s` (%o), instead saw `%s` (%o).",expectedToken.type,expectedToken,actualToken.type,actualToken),!1;const isEqualTokens=isEqualTokensOfType[actualToken.type];if(isEqualTokens&&!isEqualTokens(actualToken,expectedToken,logger))return!1;isClosedByToken(actualToken,expectedTokens[0])?getNextNonWhitespaceToken(expectedTokens):isClosedByToken(expectedToken,actualTokens[0])&&getNextNonWhitespaceToken(actualTokens)}return!(expectedToken=getNextNonWhitespaceToken(expectedTokens))||(logger.warning("Expected %o, instead saw end of content.",expectedToken),!1)}function validateBlock(block,blockTypeOrName=block.name){if(block.name===getFreeformContentHandlerName()||block.name===getUnregisteredTypeHandlerName())return[!0,[]];const logger=function createQueuedLogger(){const queue=[],logger=createLogger();return{error(...args){queue.push({log:logger.error,args})},warning(...args){queue.push({log:logger.warning,args})},getItems:()=>queue}}(),blockType=utils_normalizeBlockType(blockTypeOrName);let generatedBlockContent;try{generatedBlockContent=getSaveContent(blockType,block.attributes)}catch(error){return logger.error("Block validation failed because an error occurred while generating block content:\n\n%s",error.toString()),[!1,logger.getItems()]}const isValid=isEquivalentHTML(block.originalContent,generatedBlockContent,logger);return isValid||logger.error("Block validation failed for `%s` (%o).\n\nContent generated by `save` function:\n\n%s\n\nContent retrieved from post body:\n\n%s",blockType.name,blockType,generatedBlockContent,block.originalContent),[isValid,logger.getItems()]}function convertLegacyBlockNameAndAttributes(name,attributes){const newAttributes={...attributes};if("core/cover-image"===name&&(name="core/cover"),"core/text"!==name&&"core/cover-text"!==name||(name="core/paragraph"),name&&0===name.indexOf("core/social-link-")&&(newAttributes.service=name.substring(17),name="core/social-link"),name&&0===name.indexOf("core-embed/")){const providerSlug=name.substring(11),deprecated={speaker:"speaker-deck",polldaddy:"crowdsignal"};newAttributes.providerNameSlug=providerSlug in deprecated?deprecated[providerSlug]:providerSlug,["amazon-kindle","wordpress"].includes(providerSlug)||(newAttributes.responsive=!0),name="core/embed"}if("core/post-comment-author"===name&&(name="core/comment-author-name"),"core/post-comment-content"===name&&(name="core/comment-content"),"core/post-comment-date"===name&&(name="core/comment-date"),"core/comments-query-loop"===name){name="core/comments";const{className=""}=newAttributes;className.includes("wp-block-comments-query-loop")||(newAttributes.className=["wp-block-comments-query-loop",className].join(" "))}return"core/post-comments"===name&&(name="core/comments",newAttributes.legacy=!0),[name,newAttributes]}var es=__webpack_require__("./node_modules/hpq/es/index.js"),dist=__webpack_require__("./node_modules/memize/dist/index.js");function getNamedNodeMapAsObject(nodeMap){const result={};for(let i=0;i<nodeMap.length;i++){const{name,value}=nodeMap[i];result[name]=value}return result}function fromDOM(domNode){if((0,deprecated_build_module.Z)("wp.blocks.node.fromDOM",{since:"6.1",version:"6.3",alternative:"wp.richText.create",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),domNode.nodeType===domNode.TEXT_NODE)return domNode.nodeValue;if(domNode.nodeType!==domNode.ELEMENT_NODE)throw new TypeError("A block node can only be created from a node of type text or element.");return{type:domNode.nodeName.toLowerCase(),props:{...getNamedNodeMapAsObject(domNode.attributes),children:children_fromDOM(domNode.childNodes)}}}function node_matcher(selector){return(0,deprecated_build_module.Z)("wp.blocks.node.matcher",{since:"6.1",version:"6.3",alternative:"html source",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),domNode=>{let match=domNode;selector&&(match=domNode.querySelector(selector));try{return fromDOM(match)}catch(error){return null}}}function children_fromDOM(domNodes){(0,deprecated_build_module.Z)("wp.blocks.children.fromDOM",{since:"6.1",version:"6.3",alternative:"wp.richText.create",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"});const result=[];for(let i=0;i<domNodes.length;i++)try{result.push(fromDOM(domNodes[i]))}catch(error){}return result}function children_toHTML(children){(0,deprecated_build_module.Z)("wp.blocks.children.toHTML",{since:"6.1",version:"6.3",alternative:"wp.richText.toHTMLString",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"});const element=children;return(0,serialize.ZP)(element)}function children_matcher(selector){return(0,deprecated_build_module.Z)("wp.blocks.children.matcher",{since:"6.1",version:"6.3",alternative:"html source",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),domNode=>{let match=domNode;return selector&&(match=domNode.querySelector(selector)),match?children_fromDOM(match.childNodes):[]}}const children={concat:function concat(...blockNodes){(0,deprecated_build_module.Z)("wp.blocks.children.concat",{since:"6.1",version:"6.3",alternative:"wp.richText.concat",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"});const result=[];for(let i=0;i<blockNodes.length;i++){const blockNode=Array.isArray(blockNodes[i])?blockNodes[i]:[blockNodes[i]];for(let j=0;j<blockNode.length;j++){const child=blockNode[j];"string"==typeof child&&"string"==typeof result[result.length-1]?result[result.length-1]+=child:result.push(child)}}return result},getChildrenArray:function getChildrenArray(children){return(0,deprecated_build_module.Z)("wp.blocks.children.getChildrenArray",{since:"6.1",version:"6.3",link:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/"}),children},fromDOM:children_fromDOM,toHTML:children_toHTML,matcher:children_matcher};function isOfTypes(value,types){return types.some((type=>function isOfType(value,type){switch(type){case"string":return"string"==typeof value;case"boolean":return"boolean"==typeof value;case"object":return!!value&&value.constructor===Object;case"null":return null===value;case"array":return Array.isArray(value);case"integer":case"number":return"number"==typeof value}return!0}(value,type)))}function getBlockAttribute(attributeKey,attributeSchema,innerDOM,commentAttributes,innerHTML){let value;switch(attributeSchema.source){case void 0:value=commentAttributes?commentAttributes[attributeKey]:void 0;break;case"raw":value=innerHTML;break;case"attribute":case"property":case"html":case"text":case"children":case"node":case"query":case"tag":value=parseWithAttributeSchema(innerDOM,attributeSchema)}return function isValidByType(value,type){return void 0===type||isOfTypes(value,Array.isArray(type)?type:[type])}(value,attributeSchema.type)&&function isValidByEnum(value,enumSet){return!Array.isArray(enumSet)||enumSet.includes(value)}(value,attributeSchema.enum)||(value=void 0),void 0===value&&(value=attributeSchema.default),value}const matcherFromSource=(0,dist.Z)((sourceConfig=>{switch(sourceConfig.source){case"attribute":let matcher=(0,es.Lj)(sourceConfig.selector,sourceConfig.attribute);return"boolean"===sourceConfig.type&&(matcher=(matcher=>(0,pipe.Z)([matcher,value=>void 0!==value]))(matcher)),matcher;case"html":return function html(selector,multilineTag){return domNode=>{let match=domNode;if(selector&&(match=domNode.querySelector(selector)),!match)return"";if(multilineTag){let value="";const length=match.children.length;for(let index=0;index<length;index++){const child=match.children[index];child.nodeName.toLowerCase()===multilineTag&&(value+=child.outerHTML)}return value}return match.innerHTML}}(sourceConfig.selector,sourceConfig.multiline);case"text":return(0,es.fL)(sourceConfig.selector);case"children":return children_matcher(sourceConfig.selector);case"node":return node_matcher(sourceConfig.selector);case"query":const subMatchers=Object.fromEntries(Object.entries(sourceConfig.query).map((([key,subSourceConfig])=>[key,matcherFromSource(subSourceConfig)])));return(0,es.IO)(sourceConfig.selector,subMatchers);case"tag":return(0,pipe.Z)([(0,es.vg)(sourceConfig.selector,"nodeName"),nodeName=>nodeName?nodeName.toLowerCase():void 0]);default:console.error(`Unknown source type "${sourceConfig.source}"`)}}));function parseHtml(innerHTML){return(0,es.Qc)(innerHTML,(h=>h))}function parseWithAttributeSchema(innerHTML,attributeSchema){return matcherFromSource(attributeSchema)(parseHtml(innerHTML))}function getBlockAttributes(blockTypeOrName,innerHTML,attributes={}){var _blockType$attributes;const doc=parseHtml(innerHTML),blockType=utils_normalizeBlockType(blockTypeOrName),blockAttributes=Object.fromEntries(Object.entries(null!==(_blockType$attributes=blockType.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{}).map((([key,schema])=>[key,getBlockAttribute(key,schema,doc,attributes,innerHTML)])));return(0,hooks_build_module.O)("blocks.getBlockAttributes",blockAttributes,blockType,innerHTML,attributes)}const CLASS_ATTR_SCHEMA={type:"string",source:"attribute",selector:"[data-custom-class-name] > *",attribute:"class"};function getHTMLRootElementClasses(innerHTML){const parsed=parseWithAttributeSchema(`<div data-custom-class-name>${innerHTML}</div>`,CLASS_ATTR_SCHEMA);return parsed?parsed.trim().split(/\s+/):[]}function applyBuiltInValidationFixes(block,blockType){const updatedBlockAttributes=function fixCustomClassname(blockAttributes,blockType,innerHTML){if(hasBlockSupport(blockType,"customClassName",!0)){const{className:omittedClassName,...attributesSansClassName}=blockAttributes,serialized=getSaveContent(blockType,attributesSansClassName),defaultClasses=getHTMLRootElementClasses(serialized),customClasses=getHTMLRootElementClasses(innerHTML).filter((className=>!defaultClasses.includes(className)));customClasses.length?blockAttributes.className=customClasses.join(" "):serialized&&delete blockAttributes.className}return blockAttributes}(block.attributes,blockType,block.originalContent);return{...block,attributes:updatedBlockAttributes}}function stubFalse(){return!1}function parseRawBlock(rawBlock,options){let normalizedBlock=function normalizeRawBlock(rawBlock,options){const fallbackBlockName=getFreeformContentHandlerName(),rawBlockName=rawBlock.blockName||getFreeformContentHandlerName(),rawAttributes=rawBlock.attrs||{},rawInnerBlocks=rawBlock.innerBlocks||[];let rawInnerHTML=rawBlock.innerHTML.trim();return rawBlockName!==fallbackBlockName||options?.__unstableSkipAutop||(rawInnerHTML=(0,autop_build_module.u)(rawInnerHTML).trim()),{...rawBlock,blockName:rawBlockName,attrs:rawAttributes,innerHTML:rawInnerHTML,innerBlocks:rawInnerBlocks}}(rawBlock,options);normalizedBlock=function convertLegacyBlocks(rawBlock){const[correctName,correctedAttributes]=convertLegacyBlockNameAndAttributes(rawBlock.blockName,rawBlock.attrs);return{...rawBlock,blockName:correctName,attrs:correctedAttributes}}(normalizedBlock);let blockType=getBlockType(normalizedBlock.blockName);blockType||(normalizedBlock=function createMissingBlockType(rawBlock){const unregisteredFallbackBlock=getUnregisteredTypeHandlerName()||getFreeformContentHandlerName(),originalUndelimitedContent=serializeRawBlock(rawBlock,{isCommentDelimited:!1}),originalContent=serializeRawBlock(rawBlock,{isCommentDelimited:!0});return{blockName:unregisteredFallbackBlock,attrs:{originalName:rawBlock.blockName,originalContent,originalUndelimitedContent},innerHTML:rawBlock.blockName?originalContent:rawBlock.innerHTML,innerBlocks:rawBlock.innerBlocks,innerContent:rawBlock.innerContent}}(normalizedBlock),blockType=getBlockType(normalizedBlock.blockName));const isFallbackBlock=normalizedBlock.blockName===getFreeformContentHandlerName()||normalizedBlock.blockName===getUnregisteredTypeHandlerName();if(!blockType||!normalizedBlock.innerHTML&&isFallbackBlock)return;const parsedInnerBlocks=normalizedBlock.innerBlocks.map((innerBlock=>parseRawBlock(innerBlock,options))).filter((innerBlock=>!!innerBlock)),parsedBlock=createBlock(normalizedBlock.blockName,getBlockAttributes(blockType,normalizedBlock.innerHTML,normalizedBlock.attrs),parsedInnerBlocks);parsedBlock.originalContent=normalizedBlock.innerHTML;const validatedBlock=function applyBlockValidation(unvalidatedBlock,blockType){const[isValid]=validateBlock(unvalidatedBlock,blockType);if(isValid)return{...unvalidatedBlock,isValid,validationIssues:[]};const fixedBlock=applyBuiltInValidationFixes(unvalidatedBlock,blockType),[isFixedValid,validationIssues]=validateBlock(unvalidatedBlock,blockType);return{...fixedBlock,isValid:isFixedValid,validationIssues}}(parsedBlock,blockType),{validationIssues}=validatedBlock,updatedBlock=function applyBlockDeprecatedVersions(block,rawBlock,blockType){const parsedAttributes=rawBlock.attrs,{deprecated:deprecatedDefinitions}=blockType;if(!deprecatedDefinitions||!deprecatedDefinitions.length)return block;for(let i=0;i<deprecatedDefinitions.length;i++){const{isEligible=stubFalse}=deprecatedDefinitions[i];if(block.isValid&&!isEligible(parsedAttributes,block.innerBlocks,{blockNode:rawBlock,block}))continue;const deprecatedBlockType=Object.assign(omit(blockType,DEPRECATED_ENTRY_KEYS),deprecatedDefinitions[i]);let migratedBlock={...block,attributes:getBlockAttributes(deprecatedBlockType,block.originalContent,parsedAttributes)},[isValid]=validateBlock(migratedBlock,deprecatedBlockType);if(isValid||(migratedBlock=applyBuiltInValidationFixes(migratedBlock,deprecatedBlockType),[isValid]=validateBlock(migratedBlock,deprecatedBlockType)),!isValid)continue;let migratedInnerBlocks=migratedBlock.innerBlocks,migratedAttributes=migratedBlock.attributes;const{migrate}=deprecatedBlockType;if(migrate){let migrated=migrate(migratedAttributes,block.innerBlocks);Array.isArray(migrated)||(migrated=[migrated]),[migratedAttributes=parsedAttributes,migratedInnerBlocks=block.innerBlocks]=migrated}block={...block,attributes:migratedAttributes,innerBlocks:migratedInnerBlocks,isValid:!0,validationIssues:[]}}return block}(validatedBlock,normalizedBlock,blockType);return updatedBlock.isValid||(updatedBlock.__unstableBlockSource=rawBlock),validatedBlock.isValid||!updatedBlock.isValid||options?.__unstableSkipMigrationLogs?validatedBlock.isValid||updatedBlock.isValid||validationIssues.forEach((({log,args})=>log(...args))):(console.groupCollapsed("Updated Block: %s",blockType.name),console.info("Block successfully updated for `%s` (%o).\n\nNew content generated by `save` function:\n\n%s\n\nContent retrieved from post body:\n\n%s",blockType.name,blockType,getSaveContent(blockType,updatedBlock.attributes),updatedBlock.originalContent),console.groupEnd()),updatedBlock}function parser_parse(content,options){return parse(content).reduce(((accumulator,rawBlock)=>{const block=parseRawBlock(rawBlock,options);return block&&accumulator.push(block),accumulator}),[])}function getRawTransforms(){return getBlockTransforms("from").filter((({type})=>"raw"===type)).map((transform=>transform.isMatch?transform:{...transform,isMatch:node=>transform.selector&&node.matches(transform.selector)}))}function htmlToBlocks(html,handler){const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=html,Array.from(doc.body.children).flatMap((node=>{const rawTransform=findTransform(getRawTransforms(),(({isMatch})=>isMatch(node)));if(!rawTransform)return createBlock("core/html",getBlockAttributes("core/html",node.outerHTML));const{transform,blockName}=rawTransform;return transform?transform(node,handler):createBlock(blockName,getBlockAttributes(blockName,node.outerHTML))}))}function isEmpty(element){switch(element.nodeType){case element.TEXT_NODE:return/^[ \f\n\r\t\v\u00a0]*$/.test(element.nodeValue||"");case element.ELEMENT_NODE:return!element.hasAttributes()&&(!element.hasChildNodes()||Array.from(element.childNodes).every(isEmpty));default:return!0}}const textContentSchema={strong:{},em:{},s:{},del:{},ins:{},a:{attributes:["href","target","rel","id"]},code:{},abbr:{attributes:["title"]},sub:{},sup:{},br:{},small:{},q:{attributes:["cite"]},dfn:{attributes:["title"]},data:{attributes:["value"]},time:{attributes:["datetime"]},var:{},samp:{},kbd:{},i:{},b:{},u:{},mark:{},ruby:{},rt:{},rp:{},bdi:{attributes:["dir"]},bdo:{attributes:["dir"]},wbr:{},"#text":{}},excludedElements=["#text","br"];Object.keys(textContentSchema).filter((element=>!excludedElements.includes(element))).forEach((tag=>{const{[tag]:removedTag,...restSchema}=textContentSchema;textContentSchema[tag].children=restSchema}));const phrasingContentSchema={...textContentSchema,audio:{attributes:["src","preload","autoplay","mediagroup","loop","muted"]},canvas:{attributes:["width","height"]},embed:{attributes:["src","type","width","height"]},img:{attributes:["alt","src","srcset","usemap","ismap","width","height"]},object:{attributes:["data","type","name","usemap","form","width","height"]},video:{attributes:["src","poster","preload","autoplay","mediagroup","loop","muted","controls","width","height"]}};function phrasing_content_getPhrasingContentSchema(context){if("paste"!==context)return phrasingContentSchema;const{u,abbr,data,time,wbr,bdi,bdo,...remainingContentSchema}={...phrasingContentSchema,ins:{children:phrasingContentSchema.ins.children},del:{children:phrasingContentSchema.del.children}};return remainingContentSchema}function isPhrasingContent(node){const tag=node.nodeName.toLowerCase();return phrasing_content_getPhrasingContentSchema().hasOwnProperty(tag)||"span"===tag}function isTextContent(node){const tag=node.nodeName.toLowerCase();return textContentSchema.hasOwnProperty(tag)||"span"===tag}function normaliseBlocks(HTML){const decuDoc=document.implementation.createHTMLDocument(""),accuDoc=document.implementation.createHTMLDocument(""),decu=decuDoc.body,accu=accuDoc.body;for(decu.innerHTML=HTML;decu.firstChild;){const node=decu.firstChild;node.nodeType===node.TEXT_NODE?isEmpty(node)?decu.removeChild(node):(accu.lastChild&&"P"===accu.lastChild.nodeName||accu.appendChild(accuDoc.createElement("P")),accu.lastChild.appendChild(node)):node.nodeType===node.ELEMENT_NODE?"BR"===node.nodeName?(node.nextSibling&&"BR"===node.nextSibling.nodeName&&(accu.appendChild(accuDoc.createElement("P")),decu.removeChild(node.nextSibling)),accu.lastChild&&"P"===accu.lastChild.nodeName&&accu.lastChild.hasChildNodes()?accu.lastChild.appendChild(node):decu.removeChild(node)):"P"===node.nodeName?isEmpty(node)?decu.removeChild(node):accu.appendChild(node):isPhrasingContent(node)?(accu.lastChild&&"P"===accu.lastChild.nodeName||accu.appendChild(accuDoc.createElement("P")),accu.lastChild.appendChild(node)):accu.appendChild(node):decu.removeChild(node)}return accu.innerHTML}isTextContent.__docgenInfo={description:"@param {Node} node\n@return {boolean} Node is text content",methods:[],displayName:"isTextContent"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/dom/build-module/phrasing-content.js"]={name:"isTextContent",docgenInfo:isTextContent.__docgenInfo,path:"packages/dom/build-module/phrasing-content.js"});var assert_is_defined=__webpack_require__("./packages/dom/build-module/utils/assert-is-defined.js");function insertAfter(newNode,referenceNode){(0,assert_is_defined.c)(referenceNode.parentNode,"referenceNode.parentNode"),referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling)}var remove=__webpack_require__("./packages/dom/build-module/dom/remove.js");function replace(processedNode,newNode){(0,assert_is_defined.c)(processedNode.parentNode,"processedNode.parentNode"),insertAfter(newNode,processedNode.parentNode),(0,remove.Z)(processedNode)}function specialCommentConverter(node,doc){node.nodeType===node.COMMENT_NODE&&("nextpage"!==node.nodeValue?0===node.nodeValue.indexOf("more")&&function moreCommentConverter(node,doc){const customText=node.nodeValue.slice(4).trim();let sibling=node,noTeaser=!1;for(;sibling=sibling.nextSibling;)if(sibling.nodeType===sibling.COMMENT_NODE&&"noteaser"===sibling.nodeValue){noTeaser=!0,(0,remove.Z)(sibling);break}const moreBlock=function createMore(customText,noTeaser,doc){const node=doc.createElement("wp-block");node.dataset.block="core/more",customText&&(node.dataset.customText=customText);noTeaser&&(node.dataset.noTeaser="");return node}(customText,noTeaser,doc);if(node.parentNode&&"P"===node.parentNode.nodeName&&1!==node.parentNode.childNodes.length){const childNodes=Array.from(node.parentNode.childNodes),nodeIndex=childNodes.indexOf(node),wrapperNode=node.parentNode.parentNode||doc.body,paragraphBuilder=(acc,child)=>(acc||(acc=doc.createElement("p")),acc.appendChild(child),acc);[childNodes.slice(0,nodeIndex).reduce(paragraphBuilder,null),moreBlock,childNodes.slice(nodeIndex+1).reduce(paragraphBuilder,null)].forEach((element=>element&&wrapperNode.insertBefore(element,node.parentNode))),(0,remove.Z)(node.parentNode)}else replace(node,moreBlock)}(node,doc):replace(node,function createNextpage(doc){const node=doc.createElement("wp-block");return node.dataset.block="core/nextpage",node}(doc)))}function unwrap(node){const parent=node.parentNode;for((0,assert_is_defined.c)(parent,"node.parentNode");node.firstChild;)parent.insertBefore(node.firstChild,node);parent.removeChild(node)}function isList(node){return"OL"===node.nodeName||"UL"===node.nodeName}function listReducer(node){if(!isList(node))return;const list=node,prevElement=node.previousElementSibling;if(prevElement&&prevElement.nodeName===node.nodeName&&1===list.children.length){for(;list.firstChild;)prevElement.appendChild(list.firstChild);list.parentNode.removeChild(list)}const parentElement=node.parentNode;if(parentElement&&"LI"===parentElement.nodeName&&1===parentElement.children.length&&!/\S/.test(function shallowTextContent(element){return Array.from(element.childNodes).map((({nodeValue=""})=>nodeValue)).join("")}(parentElement))){const parentListItem=parentElement,prevListItem=parentListItem.previousElementSibling,parentList=parentListItem.parentNode;prevListItem?(prevListItem.appendChild(list),parentList.removeChild(parentListItem)):(parentList.parentNode.insertBefore(list,parentList),parentList.parentNode.removeChild(parentList))}if(parentElement&&isList(parentElement)){const prevListItem=node.previousElementSibling;prevListItem?prevListItem.appendChild(node):unwrap(node)}}function blockquoteNormaliser(node){"BLOCKQUOTE"===node.nodeName&&(node.innerHTML=normaliseBlocks(node.innerHTML))}function wrapFigureContent(element,beforeElement=element){const figure=element.ownerDocument.createElement("figure");beforeElement.parentNode.insertBefore(figure,beforeElement),figure.appendChild(element)}function figureContentReducer(node,doc,schema){if(!function isFigureContent(node,schema){var _schema$figure$childr;const tag=node.nodeName.toLowerCase();return"figcaption"!==tag&&!isTextContent(node)&&tag in(null!==(_schema$figure$childr=schema?.figure?.children)&&void 0!==_schema$figure$childr?_schema$figure$childr:{})}(node,schema))return;let nodeToInsert=node;const parentNode=node.parentNode;(function canHaveAnchor(node,schema){var _schema$figure$childr2;return node.nodeName.toLowerCase()in(null!==(_schema$figure$childr2=schema?.figure?.children?.a?.children)&&void 0!==_schema$figure$childr2?_schema$figure$childr2:{})})(node,schema)&&"A"===parentNode.nodeName&&1===parentNode.childNodes.length&&(nodeToInsert=node.parentNode);const wrapper=nodeToInsert.closest("p,div");wrapper?node.classList?(node.classList.contains("alignright")||node.classList.contains("alignleft")||node.classList.contains("aligncenter")||!wrapper.textContent.trim())&&wrapFigureContent(nodeToInsert,wrapper):wrapFigureContent(nodeToInsert,wrapper):"BODY"===nodeToInsert.parentNode.nodeName&&wrapFigureContent(nodeToInsert)}var shortcode_build_module=__webpack_require__("./packages/shortcode/build-module/index.js");const castArray=maybeArray=>Array.isArray(maybeArray)?maybeArray:[maybeArray];const shortcode_converter=function segmentHTMLToShortcodeBlock(HTML,lastIndex=0,excludedBlockNames=[]){const transformation=findTransform(getBlockTransforms("from"),(transform=>-1===excludedBlockNames.indexOf(transform.blockName)&&"shortcode"===transform.type&&castArray(transform.tag).some((tag=>(0,shortcode_build_module.kd)(tag).test(HTML)))));if(!transformation)return[HTML];const transformTag=castArray(transformation.tag).find((tag=>(0,shortcode_build_module.kd)(tag).test(HTML)));let match;const previousIndex=lastIndex;if(match=(0,shortcode_build_module.lp)(transformTag,HTML,lastIndex)){lastIndex=match.index+match.content.length;const beforeHTML=HTML.substr(0,match.index),afterHTML=HTML.substr(lastIndex);if(!(match.shortcode.content?.includes("<")||/(\n|<p>)\s*$/.test(beforeHTML)&&/^\s*(\n|<\/p>)/.test(afterHTML)))return segmentHTMLToShortcodeBlock(HTML,lastIndex);if(transformation.isMatch&&!transformation.isMatch(match.shortcode.attrs))return segmentHTMLToShortcodeBlock(HTML,previousIndex,[...excludedBlockNames,transformation.blockName]);let blocks=[];if("function"==typeof transformation.transform)blocks=[].concat(transformation.transform(match.shortcode.attrs,match)),blocks=blocks.map((block=>(block.originalContent=match.shortcode.content,applyBuiltInValidationFixes(block,getBlockType(block.name)))));else{const attributes=Object.fromEntries(Object.entries(transformation.attributes).filter((([,schema])=>schema.shortcode)).map((([key,schema])=>[key,schema.shortcode(match.shortcode.attrs,match)]))),blockType=getBlockType(transformation.blockName);if(!blockType)return[HTML];const transformationBlockType={...blockType,attributes:transformation.attributes};let block=createBlock(transformation.blockName,getBlockAttributes(transformationBlockType,match.shortcode.content,attributes));block.originalContent=match.shortcode.content,block=applyBuiltInValidationFixes(block,transformationBlockType),blocks=[block]}return[...segmentHTMLToShortcodeBlock(beforeHTML),...blocks,...segmentHTMLToShortcodeBlock(afterHTML)]}return[HTML]};var cjs=__webpack_require__("./packages/blocks/node_modules/deepmerge/dist/cjs.js"),cjs_default=__webpack_require__.n(cjs);const customMerge=key=>(srcValue,objValue)=>{switch(key){case"children":return"*"===objValue||"*"===srcValue?"*":{...objValue,...srcValue};case"attributes":case"require":return[...objValue||[],...srcValue||[]];case"isMatch":if(!objValue||!srcValue)return;return(...args)=>objValue(...args)||srcValue(...args)}return cjs_default()(objValue,srcValue,{customMerge,clone:!1})};function getBlockContentSchema(context){return function getBlockContentSchemaFromTransforms(transforms,context){const schemaArgs={phrasingContentSchema:phrasing_content_getPhrasingContentSchema(context),isPaste:"paste"===context},schemas=transforms.map((({isMatch,blockName,schema})=>{const hasAnchorSupport=hasBlockSupport(blockName,"anchor");return schema="function"==typeof schema?schema(schemaArgs):schema,hasAnchorSupport||isMatch?schema?Object.fromEntries(Object.entries(schema).map((([key,value])=>{let attributes=value.attributes||[];return hasAnchorSupport&&(attributes=[...attributes,"id"]),[key,{...value,attributes,isMatch:isMatch||void 0}]}))):{}:schema}));return cjs_default().all(schemas,{customMerge,clone:!1})}(getRawTransforms(),context)}function deepFilterNodeList(nodeList,filters,doc,schema){Array.from(nodeList).forEach((node=>{deepFilterNodeList(node.childNodes,filters,doc,schema),filters.forEach((item=>{doc.contains(node)&&item(node,doc,schema)}))}))}function deepFilterHTML(HTML,filters=[],schema){const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=HTML,deepFilterNodeList(doc.body.childNodes,filters,doc,schema),doc.body.innerHTML}function getSibling(node,which){const sibling=node[`${which}Sibling`];if(sibling&&isPhrasingContent(sibling))return sibling;const{parentNode}=node;return parentNode&&isPhrasingContent(parentNode)?getSibling(parentNode,which):void 0}function rawHandler({HTML=""}){if(-1!==HTML.indexOf("\x3c!-- wp:"))return parser_parse(HTML);const pieces=shortcode_converter(HTML),blockContentSchema=getBlockContentSchema();return pieces.map((piece=>{if("string"!=typeof piece)return piece;return htmlToBlocks(piece=normaliseBlocks(piece=deepFilterHTML(piece,[listReducer,specialCommentConverter,figureContentReducer,blockquoteNormaliser],blockContentSchema)),rawHandler)})).flat().filter(Boolean)}const noop=()=>{};function cleanNodeList(nodeList,doc,schema,inline){Array.from(nodeList).forEach((node=>{const tag=node.nodeName.toLowerCase();if(!schema.hasOwnProperty(tag)||schema[tag].isMatch&&!schema[tag].isMatch?.(node))cleanNodeList(node.childNodes,doc,schema,inline),inline&&!isPhrasingContent(node)&&node.nextElementSibling&&insertAfter(doc.createElement("br"),node),unwrap(node);else if(function isElement(node){return!!node&&node.nodeType===node.ELEMENT_NODE}(node)){const{attributes=[],classes=[],children,require=[],allowEmpty}=schema[tag];if(children&&!allowEmpty&&isEmpty(node))return void(0,remove.Z)(node);if(node.hasAttributes()&&(Array.from(node.attributes).forEach((({name})=>{"class"===name||attributes.includes(name)||node.removeAttribute(name)})),node.classList&&node.classList.length)){const mattchers=classes.map((item=>"string"==typeof item?className=>className===item:item instanceof RegExp?className=>item.test(className):noop));Array.from(node.classList).forEach((name=>{mattchers.some((isMatch=>isMatch(name)))||node.classList.remove(name)})),node.classList.length||node.removeAttribute("class")}if(node.hasChildNodes()){if("*"===children)return;if(children)require.length&&!node.querySelector(require.join(","))?(cleanNodeList(node.childNodes,doc,schema,inline),unwrap(node)):node.parentNode&&"BODY"===node.parentNode.nodeName&&isPhrasingContent(node)?(cleanNodeList(node.childNodes,doc,schema,inline),Array.from(node.childNodes).some((child=>!isPhrasingContent(child)))&&unwrap(node)):cleanNodeList(node.childNodes,doc,children,inline);else for(;node.firstChild;)(0,remove.Z)(node.firstChild)}}}))}function removeInvalidHTML(HTML,schema,inline){const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=HTML,cleanNodeList(doc.body.childNodes,doc,schema,inline),doc.body.innerHTML}function commentRemover(node){node.nodeType===node.COMMENT_NODE&&(0,remove.Z)(node)}function deepCheck(nodes,contextTag){return nodes.every((node=>function isInline(node,contextTag){if(isTextContent(node))return!0;if(!contextTag)return!1;const tag=node.nodeName.toLowerCase();return[["ul","li","ol"],["h1","h2","h3","h4","h5","h6"]].some((tagGroup=>0===[tag,contextTag].filter((t=>!tagGroup.includes(t))).length))}(node,contextTag)&&deepCheck(Array.from(node.children),contextTag)))}function isDoubleBR(node){return"BR"===node.nodeName&&node.previousSibling&&"BR"===node.previousSibling.nodeName}function wrap(newNode,referenceNode){(0,assert_is_defined.c)(referenceNode.parentNode,"referenceNode.parentNode"),referenceNode.parentNode.insertBefore(newNode,referenceNode),newNode.appendChild(referenceNode)}function replaceTag(node,tagName){const newNode=node.ownerDocument.createElement(tagName);for(;node.firstChild;)newNode.appendChild(node.firstChild);return(0,assert_is_defined.c)(node.parentNode,"node.parentNode"),node.parentNode.replaceChild(newNode,node),newNode}function phrasingContentReducer(node,doc){if("SPAN"===node.nodeName&&node.style){const{fontWeight,fontStyle,textDecorationLine,textDecoration,verticalAlign}=node.style;"bold"!==fontWeight&&"700"!==fontWeight||wrap(doc.createElement("strong"),node),"italic"===fontStyle&&wrap(doc.createElement("em"),node),("line-through"===textDecorationLine||textDecoration.includes("line-through"))&&wrap(doc.createElement("s"),node),"super"===verticalAlign?wrap(doc.createElement("sup"),node):"sub"===verticalAlign&&wrap(doc.createElement("sub"),node)}else"B"===node.nodeName?node=replaceTag(node,"strong"):"I"===node.nodeName?node=replaceTag(node,"em"):"A"===node.nodeName&&(node.target&&"_blank"===node.target.toLowerCase()?node.rel="noreferrer noopener":(node.removeAttribute("target"),node.removeAttribute("rel")),node.name&&!node.id&&(node.id=node.name),node.id&&!node.ownerDocument.querySelector(`[href="#${node.id}"]`)&&node.removeAttribute("id"))}function headRemover(node){"SCRIPT"!==node.nodeName&&"NOSCRIPT"!==node.nodeName&&"TEMPLATE"!==node.nodeName&&"STYLE"!==node.nodeName||node.parentNode.removeChild(node)}const{parseInt:ms_list_converter_parseInt}=window;function ms_list_converter_isList(node){return"OL"===node.nodeName||"UL"===node.nodeName}function msListConverter(node,doc){if("P"!==node.nodeName)return;const style=node.getAttribute("style");if(!style)return;if(-1===style.indexOf("mso-list"))return;const matches=/mso-list\s*:[^;]+level([0-9]+)/i.exec(style);if(!matches)return;let level=ms_list_converter_parseInt(matches[1],10)-1||0;const prevNode=node.previousElementSibling;if(!prevNode||!ms_list_converter_isList(prevNode)){const type=node.textContent.trim().slice(0,1),isNumeric=/[1iIaA]/.test(type),newListNode=doc.createElement(isNumeric?"ol":"ul");isNumeric&&newListNode.setAttribute("type",type),node.parentNode.insertBefore(newListNode,node)}const listNode=node.previousElementSibling,listType=listNode.nodeName,listItem=doc.createElement("li");let receivingNode=listNode;for(node.removeChild(node.firstChild);node.firstChild;)listItem.appendChild(node.firstChild);for(;level--;)receivingNode=receivingNode.lastChild||receivingNode,ms_list_converter_isList(receivingNode)&&(receivingNode=receivingNode.lastChild||receivingNode);ms_list_converter_isList(receivingNode)||(receivingNode=receivingNode.appendChild(doc.createElement(listType))),receivingNode.appendChild(listItem),node.parentNode.removeChild(node)}var blob_build_module=__webpack_require__("./packages/blob/build-module/index.js");const{atob,File}=window;function imageCorrector(node){if("IMG"===node.nodeName){if(0===node.src.indexOf("file:")&&(node.src=""),0===node.src.indexOf("data:")){const[properties,data]=node.src.split(","),[type]=properties.slice(5).split(";");if(!data||!type)return void(node.src="");let decoded;try{decoded=atob(data)}catch(e){return void(node.src="")}const uint8Array=new Uint8Array(decoded.length);for(let i=0;i<uint8Array.length;i++)uint8Array[i]=decoded.charCodeAt(i);const name=type.replace("/","."),file=new File([uint8Array],name,{type});node.src=(0,blob_build_module.ZR)(file)}1!==node.height&&1!==node.width||node.parentNode.removeChild(node)}}function divNormaliser(node){"DIV"===node.nodeName&&(node.innerHTML=normaliseBlocks(node.innerHTML))}var showdown=__webpack_require__("./node_modules/showdown/dist/showdown.js");const converter=new(__webpack_require__.n(showdown)().Converter)({noHeaderId:!0,tables:!0,literalMidWordUnderscores:!0,omitExtraWLInCodeBlocks:!0,simpleLineBreaks:!0,strikethrough:!0});function iframeRemover(node){if("IFRAME"===node.nodeName){const text=node.ownerDocument.createTextNode(node.src);node.parentNode.replaceChild(text,node)}}function googleDocsUIdRemover(node){node.id&&0===node.id.indexOf("docs-internal-guid-")&&("B"===node.tagName?unwrap(node):node.removeAttribute("id"))}function htmlFormattingRemover(node){if(node.nodeType!==node.TEXT_NODE)return;let parent=node;for(;parent=parent.parentNode;)if(parent.nodeType===parent.ELEMENT_NODE&&"PRE"===parent.nodeName)return;let newData=node.data.replace(/[ \r\n\t]+/g," ");if(" "===newData[0]){const previousSibling=getSibling(node,"previous");previousSibling&&"BR"!==previousSibling.nodeName&&" "!==previousSibling.textContent.slice(-1)||(newData=newData.slice(1))}if(" "===newData[newData.length-1]){const nextSibling=getSibling(node,"next");(!nextSibling||"BR"===nextSibling.nodeName||nextSibling.nodeType===nextSibling.TEXT_NODE&&function isFormattingSpace(character){return" "===character||"\r"===character||"\n"===character||"\t"===character}(nextSibling.textContent[0]))&&(newData=newData.slice(0,-1))}newData?node.data=newData:node.parentNode.removeChild(node)}function brRemover(node){"BR"===node.nodeName&&(getSibling(node,"next")||node.parentNode.removeChild(node))}function emptyParagraphRemover(node){"P"===node.nodeName&&(node.hasChildNodes()||node.parentNode.removeChild(node))}function slackParagraphCorrector(node){if("SPAN"!==node.nodeName)return;if("paragraph-break"!==node.getAttribute("data-stringify-type"))return;const{parentNode}=node;parentNode.insertBefore(node.ownerDocument.createElement("br"),node),parentNode.insertBefore(node.ownerDocument.createElement("br"),node),parentNode.removeChild(node)}const{console:paste_handler_console}=window;function filterInlineHTML(HTML,preserveWhiteSpace){return HTML=removeInvalidHTML(HTML=deepFilterHTML(HTML,[headRemover,googleDocsUIdRemover,phrasingContentReducer,commentRemover]),phrasing_content_getPhrasingContentSchema("paste"),{inline:!0}),preserveWhiteSpace||(HTML=deepFilterHTML(HTML,[htmlFormattingRemover,brRemover])),paste_handler_console.log("Processed inline HTML:\n\n",HTML),HTML}function pasteHandler({HTML="",plainText="",mode="AUTO",tagName,preserveWhiteSpace}){if(HTML=(HTML=(HTML=HTML.replace(/<meta[^>]+>/g,"")).replace(/^\s*<html[^>]*>\s*<body[^>]*>(?:\s*<!--\s*StartFragment\s*-->)?/i,"")).replace(/(?:<!--\s*EndFragment\s*-->\s*)?<\/body>\s*<\/html>\s*$/i,""),"INLINE"!==mode){const content=HTML||plainText;if(-1!==content.indexOf("\x3c!-- wp:"))return parser_parse(content)}if(String.prototype.normalize&&(HTML=HTML.normalize()),!plainText||HTML&&!function isPlain(HTML){return!/<(?!br[ />])/i.test(HTML)}(HTML)||(HTML=plainText,/^\s+$/.test(plainText)||(HTML=function markdownConverter(text){return converter.makeHtml(function slackMarkdownVariantCorrector(text){return text.replace(/((?:^|\n)```)([^\n`]+)(```(?:$|\n))/,((match,p1,p2,p3)=>`${p1}\n${p2}\n${p3}`))}(function bulletsToAsterisks(text){return text.replace(/(^|\n)â¢( +)/g,"$1*$2")}(text)))}(HTML)),"AUTO"===mode&&-1===plainText.indexOf("\n")&&0!==plainText.indexOf("<p>")&&0===HTML.indexOf("<p>")&&(mode="INLINE")),"INLINE"===mode)return filterInlineHTML(HTML,preserveWhiteSpace);HTML=deepFilterHTML(HTML,[slackParagraphCorrector]);const pieces=shortcode_converter(HTML),hasShortcodes=pieces.length>1;if("AUTO"===mode&&!hasShortcodes&&function isInlineContent(HTML,contextTag){const doc=document.implementation.createHTMLDocument("");doc.body.innerHTML=HTML;const nodes=Array.from(doc.body.children);return!nodes.some(isDoubleBR)&&deepCheck(nodes,contextTag)}(HTML,tagName))return filterInlineHTML(HTML,preserveWhiteSpace);const phrasingContentSchema=phrasing_content_getPhrasingContentSchema("paste"),blockContentSchema=getBlockContentSchema("paste"),blocks=pieces.map((piece=>{if("string"!=typeof piece)return piece;const filters=[googleDocsUIdRemover,msListConverter,headRemover,listReducer,imageCorrector,phrasingContentReducer,specialCommentConverter,commentRemover,iframeRemover,figureContentReducer,blockquoteNormaliser,divNormaliser],schema={...blockContentSchema,...phrasingContentSchema};return piece=deepFilterHTML(piece,filters,blockContentSchema),piece=deepFilterHTML(piece=normaliseBlocks(piece=removeInvalidHTML(piece,schema)),[htmlFormattingRemover,brRemover,emptyParagraphRemover],blockContentSchema),paste_handler_console.log("Processed HTML piece:\n\n",piece),htmlToBlocks(piece,pasteHandler)})).flat().filter(Boolean);if("AUTO"===mode&&1===blocks.length&&hasBlockSupport(blocks[0].name,"__unstablePasteTextInline",!1)){const trimRegex=/^[\n]+|[\n]+$/g,trimmedPlainText=plainText.replace(trimRegex,"");if(""!==trimmedPlainText&&-1===trimmedPlainText.indexOf("\n"))return removeInvalidHTML(getBlockInnerHTML(blocks[0]),phrasingContentSchema).replace(trimRegex,"")}return blocks}function categories_getCategories(){return(0,build_module_select.Y)(store).getCategories()}function doBlocksMatchTemplate(blocks=[],template=[]){return blocks.length===template.length&&template.every((([name,,innerBlocksTemplate],index)=>{const block=blocks[index];return name===block.name&&doBlocksMatchTemplate(block.innerBlocks,innerBlocksTemplate)}))}function synchronizeBlocksWithTemplate(blocks=[],template){return template?template.map((([name,attributes,innerBlocksTemplate],index)=>{var _blockType$attributes;const block=blocks[index];if(block&&block.name===name){const innerBlocks=synchronizeBlocksWithTemplate(block.innerBlocks,innerBlocksTemplate);return{...block,innerBlocks}}const blockType=getBlockType(name),normalizeAttributes=(schema,values)=>values?Object.fromEntries(Object.entries(values).map((([key,value])=>[key,normalizeAttribute(schema[key],value)]))):{},normalizeAttribute=(definition,value)=>{return attributeDefinition=definition,"html"===attributeDefinition?.source&&Array.isArray(value)?(0,serialize.ZP)(value):(attributeDefinition=>"query"===attributeDefinition?.source)(definition)&&value?value.map((subValues=>normalizeAttributes(definition.query,subValues))):value;var attributeDefinition},normalizedAttributes=normalizeAttributes(null!==(_blockType$attributes=blockType?.attributes)&&void 0!==_blockType$attributes?_blockType$attributes:{},attributes);let[blockName,blockAttributes]=convertLegacyBlockNameAndAttributes(name,normalizedAttributes);return void 0===getBlockType(blockName)&&(blockAttributes={originalName:name,originalContent:"",originalUndelimitedContent:""},blockName="core/missing"),createBlock(blockName,blockAttributes,synchronizeBlocksWithTemplate([],innerBlocksTemplate))})):blocks}},"./packages/compose/build-module/higher-order/compose.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./packages/compose/build-module/higher-order/pipe.js").d)(!0)},"./packages/compose/build-module/higher-order/pipe.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>basePipe,Z:()=>__WEBPACK_DEFAULT_EXPORT__});const basePipe=(reverse=!1)=>(...funcs)=>(...args)=>{const functions=funcs.flat();return reverse&&functions.reverse(),functions.reduce(((prev,func)=>[func(...prev)]),args)[0]},__WEBPACK_DEFAULT_EXPORT__=basePipe()},"./packages/data/build-module/components/async-mode-provider/context.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_y:()=>Context,ZP:()=>__WEBPACK_DEFAULT_EXPORT__});const Context=(0,__webpack_require__("./node_modules/react/index.js").createContext)(!1),{Consumer,Provider}=Context,__WEBPACK_DEFAULT_EXPORT__=Provider},"./packages/data/build-module/components/registry-provider/context.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_y:()=>Context,yE:()=>RegistryConsumer,ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_default_registry__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/data/build-module/default-registry.js");const Context=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createContext)(_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z),{Consumer,Provider}=Context,RegistryConsumer=Consumer,__WEBPACK_DEFAULT_EXPORT__=Provider},"./packages/data/build-module/components/registry-provider/use-registry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>useRegistry});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_context__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/data/build-module/components/registry-provider/context.js");function useRegistry(){return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_1__._y)}},"./packages/data/build-module/components/use-select/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>useSelect});var build_module=__webpack_require__("./packages/priority-queue/build-module/index.js"),react=__webpack_require__("./node_modules/react/index.js"),is_shallow_equal_build_module=__webpack_require__("./packages/is-shallow-equal/build-module/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js"),context=__webpack_require__("./packages/data/build-module/components/async-mode-provider/context.js");const renderQueue=(0,build_module.j)();function Store(registry,suspense){const select=suspense?registry.suspendSelect:registry.select,queueContext={};let lastMapSelect,lastMapResult,lastIsAsync,subscriber,lastMapResultValid=!1;return(mapSelect,isAsync)=>{function updateValue(){if(lastMapResultValid&&mapSelect===lastMapSelect)return lastMapResult;const listeningStores={current:null},mapResult=registry.__unstableMarkListeningStores((()=>mapSelect(select,registry)),listeningStores);subscriber?subscriber.updateStores(listeningStores.current):subscriber=(stores=>{const activeStores=[...stores],activeSubscriptions=new Set;return{subscribe:function subscribe(listener){lastMapResultValid=!1;const onStoreChange=()=>{lastMapResultValid=!1,listener()},onChange=()=>{lastIsAsync?renderQueue.add(queueContext,onStoreChange):onStoreChange()},unsubs=[];function subscribeStore(storeName){unsubs.push(registry.subscribe(onChange,storeName))}for(const storeName of activeStores)subscribeStore(storeName);return activeSubscriptions.add(subscribeStore),()=>{activeSubscriptions.delete(subscribeStore);for(const unsub of unsubs.values())unsub?.();renderQueue.cancel(queueContext)}},updateStores:function updateStores(newStores){for(const newStore of newStores)if(!activeStores.includes(newStore)){activeStores.push(newStore);for(const subscription of activeSubscriptions)subscription(newStore)}}}})(listeningStores.current),(0,is_shallow_equal_build_module.ZP)(lastMapResult,mapResult)||(lastMapResult=mapResult),lastMapSelect=mapSelect,lastMapResultValid=!0}return lastIsAsync&&!isAsync&&(lastMapResultValid=!1,renderQueue.cancel(queueContext)),updateValue(),lastIsAsync=isAsync,{subscribe:subscriber.subscribe,getValue:function getValue(){return updateValue(),lastMapResult}}}}function useMappingSelect(suspense,mapSelect,deps){const registry=(0,use_registry.Z)(),isAsync=function useAsyncMode(){return(0,react.useContext)(context._y)}(),store=(0,react.useMemo)((()=>Store(registry,suspense)),[registry]),selector=(0,react.useCallback)(mapSelect,deps),{subscribe,getValue}=store(selector,isAsync),result=(0,react.useSyncExternalStore)(subscribe,getValue,getValue);return(0,react.useDebugValue)(result),result}function useSelect(mapSelect,deps){const staticSelectMode="function"!=typeof mapSelect,staticSelectModeRef=(0,react.useRef)(staticSelectMode);if(staticSelectMode!==staticSelectModeRef.current){const prevMode=staticSelectModeRef.current?"static":"mapping";throw new Error(`Switching useSelect from ${prevMode} to ${staticSelectMode?"static":"mapping"} is not allowed`)}return staticSelectMode?function useStaticSelect(storeName){return(0,use_registry.Z)().select(storeName)}(mapSelect):useMappingSelect(!1,mapSelect,deps)}},"./packages/data/build-module/default-registry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=(0,__webpack_require__("./packages/data/build-module/registry.js").p)()},"./packages/data/build-module/dispatch.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>dispatch});var _default_registry__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/data/build-module/default-registry.js");function dispatch(storeNameOrDescriptor){return _default_registry__WEBPACK_IMPORTED_MODULE_0__.Z.dispatch(storeNameOrDescriptor)}},"./packages/data/build-module/factory.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function createRegistrySelector(registrySelector){const selector=(...args)=>registrySelector(selector.registry.select)(...args);return selector.isRegistrySelector=!0,selector}function createRegistryControl(registryControl){return registryControl.isRegistryControl=!0,registryControl}__webpack_require__.d(__webpack_exports__,{M:()=>createRegistrySelector,R:()=>createRegistryControl})},"./packages/data/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{UY:()=>combineReducers,R9:()=>registerStore,z2:()=>register});var turbo_combine_reducers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/turbo-combine-reducers/index.js"),turbo_combine_reducers__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(turbo_combine_reducers__WEBPACK_IMPORTED_MODULE_0__),_default_registry__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/data/build-module/default-registry.js");const combineReducers=turbo_combine_reducers__WEBPACK_IMPORTED_MODULE_0___default(),registerStore=(_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.resolveSelect,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.suspendSelect,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.subscribe,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.registerGenericStore,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.registerStore),register=(_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.use,_default_registry__WEBPACK_IMPORTED_MODULE_1__.Z.register)},"./packages/data/build-module/lock-unlock.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>lock,U:()=>unlock});var _wordpress_private_apis__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/private-apis/build-module/implementation.js");const{lock,unlock}=(0,_wordpress_private_apis__WEBPACK_IMPORTED_MODULE_0__.es)("I know using unstable features means my plugin or theme will inevitably break on the next WordPress release.","@wordpress/data")},"./packages/data/build-module/redux-store/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>createReduxStore});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{getCachedResolvers:()=>getCachedResolvers,getIsResolving:()=>getIsResolving,getResolutionError:()=>getResolutionError,getResolutionState:()=>getResolutionState,hasFinishedResolution:()=>hasFinishedResolution,hasResolutionFailed:()=>hasResolutionFailed,hasResolvingSelectors:()=>hasResolvingSelectors,hasStartedResolution:()=>hasStartedResolution,isResolving:()=>isResolving});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{failResolution:()=>failResolution,failResolutions:()=>failResolutions,finishResolution:()=>finishResolution,finishResolutions:()=>finishResolutions,invalidateResolution:()=>invalidateResolution,invalidateResolutionForStore:()=>invalidateResolutionForStore,invalidateResolutionForStoreSelector:()=>invalidateResolutionForStoreSelector,startResolution:()=>startResolution,startResolutions:()=>startResolutions});var redux=__webpack_require__("./node_modules/redux/es/redux.js"),turbo_combine_reducers=__webpack_require__("./node_modules/turbo-combine-reducers/index.js"),turbo_combine_reducers_default=__webpack_require__.n(turbo_combine_reducers),equivalent_key_map=__webpack_require__("./node_modules/equivalent-key-map/equivalent-key-map.js"),equivalent_key_map_default=__webpack_require__.n(equivalent_key_map);var dist=__webpack_require__("./node_modules/rungen/dist/index.js"),is_promise=__webpack_require__("./node_modules/is-promise/index.mjs"),is_plain_object=__webpack_require__("./node_modules/is-plain-object/dist/is-plain-object.mjs");function isAction(object){return(0,is_plain_object.P)(object)&&"string"==typeof object.type}function createRuntime(controls={},dispatch){const rungenControls=Object.entries(controls).map((([actionType,control])=>(value,next,iterate,yieldNext,yieldError)=>{if(!function isActionOfType(object,expectedType){return isAction(object)&&object.type===expectedType}(value,actionType))return!1;const routine=control(value);return(0,is_promise.Z)(routine)?routine.then(yieldNext,yieldError):yieldNext(routine),!0}));rungenControls.push(((value,next)=>!!isAction(value)&&(dispatch(value),next(),!0)));const rungenRuntime=(0,dist.create)(rungenControls);return action=>new Promise(((resolve,reject)=>rungenRuntime(action,(result=>{isAction(result)&&dispatch(result),resolve(result)}),reject)))}function createMiddleware(controls={}){return store=>{const runtime=createRuntime(controls,store.dispatch);return next=>action=>function isGenerator(object){return!!object&&"function"==typeof object[Symbol.iterator]&&"function"==typeof object.next}(action)?runtime(action):next(action)}}var compose=__webpack_require__("./packages/compose/build-module/higher-order/compose.js"),factory=__webpack_require__("./packages/data/build-module/factory.js");const builtinControls={"@@data/SELECT":(0,factory.R)((registry=>({storeKey,selectorName,args})=>registry.select(storeKey)[selectorName](...args))),"@@data/RESOLVE_SELECT":(0,factory.R)((registry=>({storeKey,selectorName,args})=>{const method=registry.select(storeKey)[selectorName].hasResolver?"resolveSelect":"select";return registry[method](storeKey)[selectorName](...args)})),"@@data/DISPATCH":(0,factory.R)((registry=>({storeKey,actionName,args})=>registry.dispatch(storeKey)[actionName](...args)))};var lock_unlock=__webpack_require__("./packages/data/build-module/lock-unlock.js");const promise_middleware=()=>next=>action=>(0,is_promise.Z)(action)?action.then((resolvedAction=>{if(resolvedAction)return next(resolvedAction)})):next(action);var store=__webpack_require__("./packages/data/build-module/store/index.js");const resolvers_cache_middleware=(registry,reducerKey)=>()=>next=>action=>{const resolvers=registry.select(store.Z).getCachedResolvers(reducerKey);return Object.entries(resolvers).forEach((([selectorName,resolversByArgs])=>{const resolver=registry.stores?.[reducerKey]?.resolvers?.[selectorName];resolver&&resolver.shouldInvalidate&&resolversByArgs.forEach(((value,args)=>{"finished"!==value?.status&&"error"!==value?.status||!resolver.shouldInvalidate(action,...args)||registry.dispatch(store.Z).invalidateResolution(reducerKey,selectorName,args)}))})),next(action)};function createThunkMiddleware(args){return()=>next=>action=>"function"==typeof action?action(args):next(action)}function selectorArgsToStateKey(args){if(null==args)return[];const len=args.length;let idx=len;for(;idx>0&&void 0===args[idx-1];)idx--;return idx===len?args:args.slice(0,idx)}const subKeysIsResolved=(actionProperty="selectorName",reducer=>(state={},action)=>{const key=action[actionProperty];if(void 0===key)return state;const nextKeyState=reducer(state[key],action);return nextKeyState===state[key]?state:{...state,[key]:nextKeyState}})(((state=new(equivalent_key_map_default()),action)=>{switch(action.type){case"START_RESOLUTION":{const nextState=new(equivalent_key_map_default())(state);return nextState.set(selectorArgsToStateKey(action.args),{status:"resolving"}),nextState}case"FINISH_RESOLUTION":{const nextState=new(equivalent_key_map_default())(state);return nextState.set(selectorArgsToStateKey(action.args),{status:"finished"}),nextState}case"FAIL_RESOLUTION":{const nextState=new(equivalent_key_map_default())(state);return nextState.set(selectorArgsToStateKey(action.args),{status:"error",error:action.error}),nextState}case"START_RESOLUTIONS":{const nextState=new(equivalent_key_map_default())(state);for(const resolutionArgs of action.args)nextState.set(selectorArgsToStateKey(resolutionArgs),{status:"resolving"});return nextState}case"FINISH_RESOLUTIONS":{const nextState=new(equivalent_key_map_default())(state);for(const resolutionArgs of action.args)nextState.set(selectorArgsToStateKey(resolutionArgs),{status:"finished"});return nextState}case"FAIL_RESOLUTIONS":{const nextState=new(equivalent_key_map_default())(state);return action.args.forEach(((resolutionArgs,idx)=>{const resolutionState={status:"error",error:void 0},error=action.errors[idx];error&&(resolutionState.error=error),nextState.set(selectorArgsToStateKey(resolutionArgs),resolutionState)})),nextState}case"INVALIDATE_RESOLUTION":{const nextState=new(equivalent_key_map_default())(state);return nextState.delete(selectorArgsToStateKey(action.args)),nextState}}return state}));var actionProperty;const metadata_reducer=(state={},action)=>{switch(action.type){case"INVALIDATE_RESOLUTION_FOR_STORE":return{};case"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR":if(action.selectorName in state){const{[action.selectorName]:removedSelector,...restState}=state;return restState}return state;case"START_RESOLUTION":case"FINISH_RESOLUTION":case"FAIL_RESOLUTION":case"START_RESOLUTIONS":case"FINISH_RESOLUTIONS":case"FAIL_RESOLUTIONS":case"INVALIDATE_RESOLUTION":return subKeysIsResolved(state,action)}return state};function getResolutionState(state,selectorName,args){const map=state[selectorName];if(map)return map.get(selectorArgsToStateKey(args))}function getIsResolving(state,selectorName,args){const resolutionState=getResolutionState(state,selectorName,args);return resolutionState&&"resolving"===resolutionState.status}function hasStartedResolution(state,selectorName,args){return void 0!==getResolutionState(state,selectorName,args)}function hasFinishedResolution(state,selectorName,args){const status=getResolutionState(state,selectorName,args)?.status;return"finished"===status||"error"===status}function hasResolutionFailed(state,selectorName,args){return"error"===getResolutionState(state,selectorName,args)?.status}function getResolutionError(state,selectorName,args){const resolutionState=getResolutionState(state,selectorName,args);return"error"===resolutionState?.status?resolutionState.error:null}function isResolving(state,selectorName,args){return"resolving"===getResolutionState(state,selectorName,args)?.status}function getCachedResolvers(state){return state}function hasResolvingSelectors(state){return Object.values(state).some((selectorState=>Array.from(selectorState._map.values()).some((resolution=>"resolving"===resolution[1]?.status))))}function startResolution(selectorName,args){return{type:"START_RESOLUTION",selectorName,args}}function finishResolution(selectorName,args){return{type:"FINISH_RESOLUTION",selectorName,args}}function failResolution(selectorName,args,error){return{type:"FAIL_RESOLUTION",selectorName,args,error}}function startResolutions(selectorName,args){return{type:"START_RESOLUTIONS",selectorName,args}}function finishResolutions(selectorName,args){return{type:"FINISH_RESOLUTIONS",selectorName,args}}function failResolutions(selectorName,args,errors){return{type:"FAIL_RESOLUTIONS",selectorName,args,errors}}function invalidateResolution(selectorName,args){return{type:"INVALIDATE_RESOLUTION",selectorName,args}}function invalidateResolutionForStore(){return{type:"INVALIDATE_RESOLUTION_FOR_STORE"}}function invalidateResolutionForStoreSelector(selectorName){return{type:"INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR",selectorName}}const trimUndefinedValues=array=>{const result=[...array];for(let i=result.length-1;i>=0;i--)void 0===result[i]&&result.splice(i,1);return result},mapValues=(obj,callback)=>Object.fromEntries(Object.entries(null!=obj?obj:{}).map((([key,value])=>[key,callback(value,key)]))),mapToObject=(key,state)=>state instanceof Map?Object.fromEntries(state):state;function createBindingCache(bind){const cache=new WeakMap;return{get(item){let boundItem=cache.get(item);return boundItem||(boundItem=bind(item),cache.set(item,boundItem)),boundItem}}}function createReduxStore(key,options){const privateActions={},privateSelectors={},privateRegistrationFunctions={privateActions,registerPrivateActions:actions=>{Object.assign(privateActions,actions)},privateSelectors,registerPrivateSelectors:selectors=>{Object.assign(privateSelectors,selectors)}},storeDescriptor={name:key,instantiate:registry=>{const reducer=options.reducer,store=function instantiateReduxStore(key,options,registry,thunkArgs){const controls={...options.controls,...builtinControls},normalizedControls=mapValues(controls,(control=>control.isRegistryControl?control(registry):control)),middlewares=[resolvers_cache_middleware(registry,key),promise_middleware,createMiddleware(normalizedControls),createThunkMiddleware(thunkArgs)],enhancers=[(0,redux.md)(...middlewares)];"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&enhancers.push(window.__REDUX_DEVTOOLS_EXTENSION__({name:key,instanceId:key,serialize:{replacer:mapToObject}}));const{reducer,initialState}=options,enhancedReducer=turbo_combine_reducers_default()({metadata:metadata_reducer,root:reducer});return(0,redux.MT)(enhancedReducer,{root:initialState},(0,compose.Z)(enhancers))}(key,options,registry,{registry,get dispatch(){return thunkActions},get select(){return thunkSelectors},get resolveSelect(){return getResolveSelectors()}});(0,lock_unlock.d)(store,privateRegistrationFunctions);const resolversCache=function createResolversCache(){const cache={};return{isRunning:(selectorName,args)=>cache[selectorName]&&cache[selectorName].get(trimUndefinedValues(args)),clear(selectorName,args){cache[selectorName]&&cache[selectorName].delete(trimUndefinedValues(args))},markAsRunning(selectorName,args){cache[selectorName]||(cache[selectorName]=new(equivalent_key_map_default())),cache[selectorName].set(trimUndefinedValues(args),!0)}}}();function bindAction(action){return(...args)=>Promise.resolve(store.dispatch(action(...args)))}const actions={...mapValues(actions_namespaceObject,bindAction),...mapValues(options.actions,bindAction)},boundPrivateActions=createBindingCache(bindAction),allActions=new Proxy((()=>{}),{get:(target,prop)=>{const privateAction=privateActions[prop];return privateAction?boundPrivateActions.get(privateAction):actions[prop]}}),thunkActions=new Proxy(allActions,{apply:(target,thisArg,[action])=>store.dispatch(action)});function bindSelector(selector){selector.isRegistrySelector&&(selector.registry=registry);const boundSelector=(...args)=>{const state=store.__unstableOriginalGetState();return selector(state.root,...args)};return boundSelector.hasResolver=!1,boundSelector}(0,lock_unlock.d)(actions,allActions);let resolvers,selectors={...mapValues(selectors_namespaceObject,(function bindMetadataSelector(selector){const boundSelector=(...args)=>{const state=store.__unstableOriginalGetState();return selector(state.metadata,...args)};return boundSelector.hasResolver=!1,boundSelector})),...mapValues(options.selectors,bindSelector)};options.resolvers&&(resolvers=function mapResolvers(resolvers){return mapValues(resolvers,(resolver=>resolver.fulfill?resolver:{...resolver,fulfill:resolver}))}(options.resolvers),selectors=function mapSelectorsWithResolvers(selectors,resolvers,store,resolversCache){function fulfillSelector(resolver,selectorName,args){const state=store.getState();if(resolversCache.isRunning(selectorName,args)||"function"==typeof resolver.isFulfilled&&resolver.isFulfilled(state,...args))return;const{metadata}=store.__unstableOriginalGetState();hasStartedResolution(metadata,selectorName,args)||(resolversCache.markAsRunning(selectorName,args),setTimeout((async()=>{resolversCache.clear(selectorName,args),store.dispatch(startResolution(selectorName,args));try{const action=resolver.fulfill(...args);action&&await store.dispatch(action),store.dispatch(finishResolution(selectorName,args))}catch(error){store.dispatch(failResolution(selectorName,args,error))}}),0))}return mapValues(selectors,((selector,selectorName)=>{const resolver=resolvers[selectorName];if(!resolver)return selector;const selectorResolver=(...args)=>(fulfillSelector(resolver,selectorName,args),selector(...args));return selectorResolver.hasResolver=!0,selectorResolver}))}(selectors,resolvers,store,resolversCache));const boundPrivateSelectors=createBindingCache(bindSelector);for(const privateSelector of Object.values(privateSelectors))boundPrivateSelectors.get(privateSelector);const allSelectors=new Proxy((()=>{}),{get:(target,prop)=>{const privateSelector=privateSelectors[prop];return privateSelector?boundPrivateSelectors.get(privateSelector):selectors[prop]}}),thunkSelectors=new Proxy(allSelectors,{apply:(target,thisArg,[selector])=>selector(store.__unstableOriginalGetState())});(0,lock_unlock.d)(selectors,allSelectors);const resolveSelectors=function mapResolveSelectors(selectors,store){const{getIsResolving,hasStartedResolution,hasFinishedResolution,hasResolutionFailed,isResolving,getCachedResolvers,getResolutionState,getResolutionError,...storeSelectors}=selectors;return mapValues(storeSelectors,((selector,selectorName)=>selector.hasResolver?(...args)=>new Promise(((resolve,reject)=>{const hasFinished=()=>selectors.hasFinishedResolution(selectorName,args),finalize=result=>{if(selectors.hasResolutionFailed(selectorName,args)){const error=selectors.getResolutionError(selectorName,args);reject(error)}else resolve(result)},getResult=()=>selector.apply(null,args),result=getResult();if(hasFinished())return finalize(result);const unsubscribe=store.subscribe((()=>{hasFinished()&&(unsubscribe(),finalize(getResult()))}))})):async(...args)=>selector.apply(null,args)))}(selectors,store),suspendSelectors=function mapSuspendSelectors(selectors,store){return mapValues(selectors,((selector,selectorName)=>selector.hasResolver?(...args)=>{const result=selector.apply(null,args);if(selectors.hasFinishedResolution(selectorName,args)){if(selectors.hasResolutionFailed(selectorName,args))throw selectors.getResolutionError(selectorName,args);return result}throw new Promise((resolve=>{const unsubscribe=store.subscribe((()=>{selectors.hasFinishedResolution(selectorName,args)&&(resolve(),unsubscribe())}))}))}:selector))}(selectors,store),getResolveSelectors=()=>resolveSelectors;store.__unstableOriginalGetState=store.getState,store.getState=()=>store.__unstableOriginalGetState().root;const subscribe=store&&(listener=>{let lastState=store.__unstableOriginalGetState();return store.subscribe((()=>{const state=store.__unstableOriginalGetState(),hasChanged=state!==lastState;lastState=state,hasChanged&&listener()}))});return{reducer,store,actions,selectors,resolvers,getSelectors:()=>selectors,getResolveSelectors,getSuspendSelectors:()=>suspendSelectors,getActions:()=>actions,subscribe}}};return(0,lock_unlock.d)(storeDescriptor,privateRegistrationFunctions),storeDescriptor}},"./packages/data/build-module/registry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>createRegistry});var build_module=__webpack_require__("./packages/deprecated/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js"),store=__webpack_require__("./packages/data/build-module/store/index.js");function createEmitter(){let isPaused=!1,isPending=!1;const listeners=new Set,notifyListeners=()=>Array.from(listeners).forEach((listener=>listener()));return{get isPaused(){return isPaused},subscribe:listener=>(listeners.add(listener),()=>listeners.delete(listener)),pause(){isPaused=!0},resume(){isPaused=!1,isPending&&(isPending=!1,notifyListeners())},emit(){isPaused?isPending=!0:notifyListeners()}}}var lock_unlock=__webpack_require__("./packages/data/build-module/lock-unlock.js");function getStoreName(storeNameOrDescriptor){return"string"==typeof storeNameOrDescriptor?storeNameOrDescriptor:storeNameOrDescriptor.name}function createRegistry(storeConfigs={},parent=null){const stores={},emitter=createEmitter();let listeningStores=null;function globalListener(){emitter.emit()}function registerStoreInstance(name,createStore){if(stores[name])return console.error('Store "'+name+'" is already registered.'),stores[name];const store=createStore();if("function"!=typeof store.getSelectors)throw new TypeError("store.getSelectors must be a function");if("function"!=typeof store.getActions)throw new TypeError("store.getActions must be a function");if("function"!=typeof store.subscribe)throw new TypeError("store.subscribe must be a function");store.emitter=createEmitter();const currentSubscribe=store.subscribe;if(store.subscribe=listener=>{const unsubscribeFromEmitter=store.emitter.subscribe(listener),unsubscribeFromStore=currentSubscribe((()=>{store.emitter.isPaused?store.emitter.emit():listener()}));return()=>{unsubscribeFromStore?.(),unsubscribeFromEmitter?.()}},stores[name]=store,store.subscribe(globalListener),parent)try{(0,lock_unlock.U)(store.store).registerPrivateActions((0,lock_unlock.U)(parent).privateActionsOf(name)),(0,lock_unlock.U)(store.store).registerPrivateSelectors((0,lock_unlock.U)(parent).privateSelectorsOf(name))}catch(e){}return store}let registry={batch:function batch(callback){emitter.pause(),Object.values(stores).forEach((store=>store.emitter.pause())),callback(),emitter.resume(),Object.values(stores).forEach((store=>store.emitter.resume()))},stores,namespaces:stores,subscribe:(listener,storeNameOrDescriptor)=>{if(!storeNameOrDescriptor)return emitter.subscribe(listener);const storeName=getStoreName(storeNameOrDescriptor),store=stores[storeName];return store?store.subscribe(listener):parent?parent.subscribe(listener,storeNameOrDescriptor):emitter.subscribe(listener)},select:function select(storeNameOrDescriptor){const storeName=getStoreName(storeNameOrDescriptor);listeningStores?.add(storeName);const store=stores[storeName];return store?store.getSelectors():parent?.select(storeName)},resolveSelect:function resolveSelect(storeNameOrDescriptor){const storeName=getStoreName(storeNameOrDescriptor);listeningStores?.add(storeName);const store=stores[storeName];return store?store.getResolveSelectors():parent&&parent.resolveSelect(storeName)},suspendSelect:function suspendSelect(storeNameOrDescriptor){const storeName=getStoreName(storeNameOrDescriptor);listeningStores?.add(storeName);const store=stores[storeName];return store?store.getSuspendSelectors():parent&&parent.suspendSelect(storeName)},dispatch:function dispatch(storeNameOrDescriptor){const storeName=getStoreName(storeNameOrDescriptor),store=stores[storeName];return store?store.getActions():parent&&parent.dispatch(storeName)},use:function use(plugin,options){if(!plugin)return;return registry={...registry,...plugin(registry,options)},registry},register:function register(store){registerStoreInstance(store.name,(()=>store.instantiate(registry)))},registerGenericStore:function registerGenericStore(name,store){(0,build_module.Z)("wp.data.registerGenericStore",{since:"5.9",alternative:"wp.data.register( storeDescriptor )"}),registerStoreInstance(name,(()=>store))},registerStore:function registerStore(storeName,options){if(!options.reducer)throw new TypeError("Must specify store reducer");return registerStoreInstance(storeName,(()=>(0,redux_store.Z)(storeName,options).instantiate(registry))).store},__unstableMarkListeningStores:function __unstableMarkListeningStores(callback,ref){listeningStores=new Set;try{return callback.call(this)}finally{ref.current=Array.from(listeningStores),listeningStores=null}}};registry.register(store.Z);for(const[name,config]of Object.entries(storeConfigs))registry.register((0,redux_store.Z)(name,config));parent&&parent.subscribe(globalListener);const registryWithPlugins=function withPlugins(attributes){return Object.fromEntries(Object.entries(attributes).map((([key,attribute])=>"function"!=typeof attribute?[key,attribute]:[key,function(){return registry[key].apply(null,arguments)}])))}(registry);return(0,lock_unlock.d)(registryWithPlugins,{privateActionsOf:name=>{try{return(0,lock_unlock.U)(stores[name].store).privateActions}catch(e){return{}}},privateSelectorsOf:name=>{try{return(0,lock_unlock.U)(stores[name].store).privateSelectors}catch(e){return{}}}}),registryWithPlugins}},"./packages/data/build-module/select.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>select});var _default_registry__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/data/build-module/default-registry.js");function select(storeNameOrDescriptor){return _default_registry__WEBPACK_IMPORTED_MODULE_0__.Z.select(storeNameOrDescriptor)}},"./packages/data/build-module/store/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={name:"core/data",instantiate(registry){const getCoreDataSelector=selectorName=>(key,...args)=>registry.select(key)[selectorName](...args),getCoreDataAction=actionName=>(key,...args)=>registry.dispatch(key)[actionName](...args);return{getSelectors:()=>Object.fromEntries(["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"].map((selectorName=>[selectorName,getCoreDataSelector(selectorName)]))),getActions:()=>Object.fromEntries(["startResolution","finishResolution","invalidateResolution","invalidateResolutionForStore","invalidateResolutionForStoreSelector"].map((actionName=>[actionName,getCoreDataAction(actionName)]))),subscribe:()=>()=>()=>{}}}}},"./packages/dom/build-module/dom/remove.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>remove});var _utils_assert_is_defined__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/dom/build-module/utils/assert-is-defined.js");function remove(node){(0,_utils_assert_is_defined__WEBPACK_IMPORTED_MODULE_0__.c)(node.parentNode,"node.parentNode"),node.parentNode.removeChild(node)}},"./packages/dom/build-module/dom/safe-html.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>safeHTML});var _remove__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/dom/build-module/dom/remove.js");function safeHTML(html){const{body}=document.implementation.createHTMLDocument("");body.innerHTML=html;const elements=body.getElementsByTagName("*");let elementIndex=elements.length;for(;elementIndex--;){const element=elements[elementIndex];if("SCRIPT"===element.tagName)(0,_remove__WEBPACK_IMPORTED_MODULE_0__.Z)(element);else{let attributeIndex=element.attributes.length;for(;attributeIndex--;){const{name:key}=element.attributes[attributeIndex];key.startsWith("on")&&element.removeAttribute(key)}}}return body.innerHTML}},"./packages/dom/build-module/dom/strip-html.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>stripHTML});var _safe_html__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/dom/build-module/dom/safe-html.js");function stripHTML(html){html=(0,_safe_html__WEBPACK_IMPORTED_MODULE_0__.Z)(html);const doc=document.implementation.createHTMLDocument("");return doc.body.innerHTML=html,doc.body.textContent||""}},"./packages/element/build-module/platform.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={OS:"web",select:spec=>"web"in spec?spec.web:spec.default,isWeb:!0}},"./packages/html-entities/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{let _decodeTextArea;function decodeEntities(html){if("string"!=typeof html||-1===html.indexOf("&"))return html;void 0===_decodeTextArea&&(_decodeTextArea=document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument("").createElement("textarea"):document.createElement("textarea")),_decodeTextArea.innerHTML=html;const decoded=_decodeTextArea.textContent;return _decodeTextArea.innerHTML="",decoded}__webpack_require__.d(__webpack_exports__,{S:()=>decodeEntities})},"./packages/icons/build-module/library/symbol.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/primitives/build-module/svg/index.js");const __WEBPACK_DEFAULT_EXPORT__=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)(_wordpress_primitives__WEBPACK_IMPORTED_MODULE_1__.y$,{d:"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z"}))},"./packages/priority-queue/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>createQueue});__webpack_require__("./node_modules/requestidlecallback/index.js");const request_idle_callback=function createRequestIdleCallback(){return"undefined"==typeof window?callback=>{setTimeout((()=>callback(Date.now())),0)}:window.requestIdleCallback}(),createQueue=()=>{const waitingList=new Map;let isRunning=!1;const runWaitingList=deadline=>{for(const[nextElement,callback]of waitingList)if(waitingList.delete(nextElement),callback(),"number"==typeof deadline||deadline.timeRemaining()<=0)break;0!==waitingList.size?request_idle_callback(runWaitingList):isRunning=!1};return{add:(element,item)=>{waitingList.set(element,item),isRunning||(isRunning=!0,request_idle_callback(runWaitingList))},flush:element=>{const callback=waitingList.get(element);return void 0!==callback&&(waitingList.delete(element),callback(),!0)},cancel:element=>waitingList.delete(element),reset:()=>{waitingList.clear(),isRunning=!1}}}},"./packages/private-apis/build-module/implementation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{es:()=>__dangerousOptInToUnstableAPIsOnlyForCoreModules});var process=__webpack_require__("./node_modules/process/browser.js");const CORE_MODULES_USING_PRIVATE_APIS=["@wordpress/block-editor","@wordpress/block-library","@wordpress/blocks","@wordpress/commands","@wordpress/components","@wordpress/core-commands","@wordpress/customize-widgets","@wordpress/data","@wordpress/edit-post","@wordpress/edit-site","@wordpress/edit-widgets","@wordpress/editor","@wordpress/router"],registeredPrivateApis=[];let allowReRegistration;try{allowReRegistration=!process.env.IS_WORDPRESS_CORE}catch(error){allowReRegistration=!0}const __dangerousOptInToUnstableAPIsOnlyForCoreModules=(consent,moduleName)=>{if(!CORE_MODULES_USING_PRIVATE_APIS.includes(moduleName))throw new Error(`You tried to opt-in to unstable APIs as module "${moduleName}". This feature is only for JavaScript modules shipped with WordPress core. Please do not use it in plugins and themes as the unstable APIs will be removed without a warning. If you ignore this error and depend on unstable features, your product will inevitably break on one of the next WordPress releases.`);if(!allowReRegistration&&registeredPrivateApis.includes(moduleName))throw new Error(`You tried to opt-in to unstable APIs as module "${moduleName}" which is already registered. This feature is only for JavaScript modules shipped with WordPress core. Please do not use it in plugins and themes as the unstable APIs will be removed without a warning. If you ignore this error and depend on unstable features, your product will inevitably break on one of the next WordPress releases.`);if("I know using unstable features means my plugin or theme will inevitably break on the next WordPress release."!==consent)throw new Error("You tried to opt-in to unstable APIs without confirming you know the consequences. This feature is only for JavaScript modules shipped with WordPress core. Please do not use it in plugins and themes as the unstable APIs will removed without a warning. If you ignore this error and depend on unstable features, your product will inevitably break on the next WordPress release.");return registeredPrivateApis.push(moduleName),{lock,unlock}};function lock(object,privateData){if(!object)throw new Error("Cannot lock an undefined object.");__private in object||(object[__private]={}),lockedData.set(object[__private],privateData)}function unlock(object){if(!object)throw new Error("Cannot unlock an undefined object.");if(!(__private in object))throw new Error("Cannot unlock an object that was not locked before. ");return lockedData.get(object[__private])}const lockedData=new WeakMap,__private=Symbol("Private API ID")},"./packages/rich-text/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M4:()=>LINE_SEPARATOR,_b:()=>createElement,cw:()=>insertLineSeparator,If:()=>isEmptyLine,o2:()=>useRichText,HI:()=>applyFormat,zo:()=>concat,Ue:()=>create,Ye:()=>getActiveFormat,DL:()=>getActiveFormats,Jj:()=>getActiveObject,FB:()=>getTextContent,$T:()=>insert,Qf:()=>insertObject,zb:()=>isCollapsed,xb:()=>isEmpty,v_:()=>join,Sy:()=>registerFormatType,Od:()=>remove,Ir:()=>removeFormat,gx:()=>replace_replace,tP:()=>slice,Vl:()=>split,h:()=>store,Jz:()=>toHTMLString,h4:()=>toggleFormat,Wb:()=>useAnchor});var selectors_namespaceObject={};__webpack_require__.r(selectors_namespaceObject),__webpack_require__.d(selectors_namespaceObject,{getFormatType:()=>getFormatType,getFormatTypeForBareElement:()=>getFormatTypeForBareElement,getFormatTypeForClassName:()=>getFormatTypeForClassName,getFormatTypes:()=>getFormatTypes});var actions_namespaceObject={};__webpack_require__.r(actions_namespaceObject),__webpack_require__.d(actions_namespaceObject,{addFormatTypes:()=>addFormatTypes,removeFormatTypes:()=>removeFormatTypes});var build_module=__webpack_require__("./packages/data/build-module/index.js"),redux_store=__webpack_require__("./packages/data/build-module/redux-store/index.js");const reducer=(0,build_module.UY)({formatTypes:function formatTypes(state={},action){switch(action.type){case"ADD_FORMAT_TYPES":return{...state,...action.formatTypes.reduce(((newFormatTypes,type)=>({...newFormatTypes,[type.name]:type})),{})};case"REMOVE_FORMAT_TYPES":return Object.fromEntries(Object.entries(state).filter((([key])=>!action.names.includes(key))))}return state}});const getFormatTypes=(0,__webpack_require__("./node_modules/rememo/rememo.js").Z)((state=>Object.values(state.formatTypes)),(state=>[state.formatTypes]));function getFormatType(state,name){return state.formatTypes[name]}function getFormatTypeForBareElement(state,bareElementTagName){const formatTypes=getFormatTypes(state);return formatTypes.find((({className,tagName})=>null===className&&bareElementTagName===tagName))||formatTypes.find((({className,tagName})=>null===className&&"*"===tagName))}function getFormatTypeForClassName(state,elementClassName){return getFormatTypes(state).find((({className})=>null!==className&&` ${elementClassName} `.indexOf(` ${className} `)>=0))}function addFormatTypes(formatTypes){return{type:"ADD_FORMAT_TYPES",formatTypes:Array.isArray(formatTypes)?formatTypes:[formatTypes]}}function removeFormatTypes(names){return{type:"REMOVE_FORMAT_TYPES",names:Array.isArray(names)?names:[names]}}const store=(0,redux_store.Z)("core/rich-text",{reducer,selectors:selectors_namespaceObject,actions:actions_namespaceObject});function isFormatEqual(format1,format2){if(format1===format2)return!0;if(!format1||!format2)return!1;if(format1.type!==format2.type)return!1;const attributes1=format1.attributes,attributes2=format2.attributes;if(attributes1===attributes2)return!0;if(!attributes1||!attributes2)return!1;const keys1=Object.keys(attributes1),keys2=Object.keys(attributes2);if(keys1.length!==keys2.length)return!1;const length=keys1.length;for(let i=0;i<length;i++){const name=keys1[i];if(attributes1[name]!==attributes2[name])return!1}return!0}function normaliseFormats(value){const newFormats=value.formats.slice();return newFormats.forEach(((formatsAtIndex,index)=>{const formatsAtPreviousIndex=newFormats[index-1];if(formatsAtPreviousIndex){const newFormatsAtIndex=formatsAtIndex.slice();newFormatsAtIndex.forEach(((format,formatIndex)=>{const previousFormat=formatsAtPreviousIndex[formatIndex];isFormatEqual(format,previousFormat)&&(newFormatsAtIndex[formatIndex]=previousFormat)})),newFormats[index]=newFormatsAtIndex}})),{...value,formats:newFormats}}function replace(array,index,value){return(array=array.slice())[index]=value,array}function applyFormat(value,format,startIndex=value.start,endIndex=value.end){const{formats,activeFormats}=value,newFormats=formats.slice();if(startIndex===endIndex){const startFormat=newFormats[startIndex]?.find((({type})=>type===format.type));if(startFormat){const index=newFormats[startIndex].indexOf(startFormat);for(;newFormats[startIndex]&&newFormats[startIndex][index]===startFormat;)newFormats[startIndex]=replace(newFormats[startIndex],index,format),startIndex--;for(endIndex++;newFormats[endIndex]&&newFormats[endIndex][index]===startFormat;)newFormats[endIndex]=replace(newFormats[endIndex],index,format),endIndex++}}else{let position=1/0;for(let index=startIndex;index<endIndex;index++)if(newFormats[index]){newFormats[index]=newFormats[index].filter((({type})=>type!==format.type));const length=newFormats[index].length;length<position&&(position=length)}else newFormats[index]=[],position=0;for(let index=startIndex;index<endIndex;index++)newFormats[index].splice(position,0,format)}return normaliseFormats({...value,formats:newFormats,activeFormats:[...activeFormats?.filter((({type})=>type!==format.type))||[],format]})}(0,build_module.z2)(store);var build_module_select=__webpack_require__("./packages/data/build-module/select.js");function createElement({implementation},html){return createElement.body||(createElement.body=implementation.createHTMLDocument("").body),createElement.body.innerHTML=html,createElement.body}const LINE_SEPARATOR="\u2028",OBJECT_REPLACEMENT_CHARACTER="ï¿¼",ZWNBSP="\ufeff";function toFormat({tagName,attributes}){let formatType;if(attributes&&attributes.class&&(formatType=(0,build_module_select.Y)(store).getFormatTypeForClassName(attributes.class),formatType&&(attributes.class=` ${attributes.class} `.replace(` ${formatType.className} `," ").trim(),attributes.class||delete attributes.class)),formatType||(formatType=(0,build_module_select.Y)(store).getFormatTypeForBareElement(tagName)),!formatType)return attributes?{type:tagName,attributes}:{type:tagName};if(formatType.__experimentalCreatePrepareEditableTree&&!formatType.__experimentalCreateOnChangeEditableValue)return null;if(!attributes)return{type:formatType.name,tagName};const registeredAttributes={},unregisteredAttributes={},_attributes={...attributes};for(const key in formatType.attributes){const name=formatType.attributes[key];registeredAttributes[key]=_attributes[name],formatType.__unstableFilterAttributeValue&&(registeredAttributes[key]=formatType.__unstableFilterAttributeValue(key,registeredAttributes[key])),delete _attributes[name],void 0===registeredAttributes[key]&&delete registeredAttributes[key]}for(const name in _attributes)unregisteredAttributes[name]=attributes[name];return{type:formatType.name,tagName,attributes:registeredAttributes,unregisteredAttributes}}function create({element,text,html,range,multilineTag,multilineWrapperTags,__unstableIsEditableTree:isEditableTree,preserveWhiteSpace}={}){return"string"==typeof text&&text.length>0?{formats:Array(text.length),replacements:Array(text.length),text}:("string"==typeof html&&html.length>0&&(element=createElement(document,html)),"object"!=typeof element?{formats:[],replacements:[],text:""}:multilineTag?createFromMultilineElement({element,range,multilineTag,multilineWrapperTags,isEditableTree,preserveWhiteSpace}):createFromElement({element,range,isEditableTree,preserveWhiteSpace}))}function accumulateSelection(accumulator,node,range,value){if(!range)return;const{parentNode}=node,{startContainer,startOffset,endContainer,endOffset}=range,currentLength=accumulator.text.length;void 0!==value.start?accumulator.start=currentLength+value.start:node===startContainer&&node.nodeType===node.TEXT_NODE?accumulator.start=currentLength+startOffset:parentNode===startContainer&&node===startContainer.childNodes[startOffset]?accumulator.start=currentLength:parentNode===startContainer&&node===startContainer.childNodes[startOffset-1]?accumulator.start=currentLength+value.text.length:node===startContainer&&(accumulator.start=currentLength),void 0!==value.end?accumulator.end=currentLength+value.end:node===endContainer&&node.nodeType===node.TEXT_NODE?accumulator.end=currentLength+endOffset:parentNode===endContainer&&node===endContainer.childNodes[endOffset-1]?accumulator.end=currentLength+value.text.length:parentNode===endContainer&&node===endContainer.childNodes[endOffset]?accumulator.end=currentLength:node===endContainer&&(accumulator.end=currentLength+endOffset)}function filterRange(node,range,filter){if(!range)return;const{startContainer,endContainer}=range;let{startOffset,endOffset}=range;return node===startContainer&&(startOffset=filter(node.nodeValue.slice(0,startOffset)).length),node===endContainer&&(endOffset=filter(node.nodeValue.slice(0,endOffset)).length),{startContainer,startOffset,endContainer,endOffset}}function collapseWhiteSpace(string){return string.replace(/[\n\r\t]+/g," ")}function removeReservedCharacters(string){return string.replace(new RegExp(`[${ZWNBSP}${OBJECT_REPLACEMENT_CHARACTER}]`,"gu"),"")}function createFromElement({element,range,multilineTag,multilineWrapperTags,currentWrapperTags=[],isEditableTree,preserveWhiteSpace}){const accumulator={formats:[],replacements:[],text:""};if(!element)return accumulator;if(!element.hasChildNodes())return accumulateSelection(accumulator,element,range,{formats:[],replacements:[],text:""}),accumulator;const length=element.childNodes.length;for(let index=0;index<length;index++){const node=element.childNodes[index],tagName=node.nodeName.toLowerCase();if(node.nodeType===node.TEXT_NODE){let filter=removeReservedCharacters;preserveWhiteSpace||(filter=string=>removeReservedCharacters(collapseWhiteSpace(string)));const text=filter(node.nodeValue);accumulateSelection(accumulator,node,range=filterRange(node,range,filter),{text}),accumulator.formats.length+=text.length,accumulator.replacements.length+=text.length,accumulator.text+=text;continue}if(node.nodeType!==node.ELEMENT_NODE)continue;if(isEditableTree&&(node.getAttribute("data-rich-text-placeholder")||"br"===tagName&&!node.getAttribute("data-rich-text-line-break"))){accumulateSelection(accumulator,node,range,{formats:[],replacements:[],text:""});continue}if("script"===tagName){const value={formats:[,],replacements:[{type:tagName,attributes:{"data-rich-text-script":node.getAttribute("data-rich-text-script")||encodeURIComponent(node.innerHTML)}}],text:OBJECT_REPLACEMENT_CHARACTER};accumulateSelection(accumulator,node,range,value),mergePair(accumulator,value);continue}if("br"===tagName){accumulateSelection(accumulator,node,range,{formats:[],replacements:[],text:""}),mergePair(accumulator,create({text:"\n"}));continue}const format=toFormat({tagName,attributes:getAttributes({element:node})});if(multilineWrapperTags&&-1!==multilineWrapperTags.indexOf(tagName)){const value=createFromMultilineElement({element:node,range,multilineTag,multilineWrapperTags,currentWrapperTags:[...currentWrapperTags,format],isEditableTree,preserveWhiteSpace});accumulateSelection(accumulator,node,range,value),mergePair(accumulator,value);continue}const value=createFromElement({element:node,range,multilineTag,multilineWrapperTags,isEditableTree,preserveWhiteSpace});if(accumulateSelection(accumulator,node,range,value),format)if(0===value.text.length)format.attributes&&mergePair(accumulator,{formats:[,],replacements:[format],text:OBJECT_REPLACEMENT_CHARACTER});else{function mergeFormats(formats){if(mergeFormats.formats===formats)return mergeFormats.newFormats;const newFormats=formats?[format,...formats]:[format];return mergeFormats.formats=formats,mergeFormats.newFormats=newFormats,newFormats}mergeFormats.newFormats=[format],mergePair(accumulator,{...value,formats:Array.from(value.formats,mergeFormats)})}else mergePair(accumulator,value)}return accumulator}function createFromMultilineElement({element,range,multilineTag,multilineWrapperTags,currentWrapperTags=[],isEditableTree,preserveWhiteSpace}){const accumulator={formats:[],replacements:[],text:""};if(!element||!element.hasChildNodes())return accumulator;const length=element.children.length;for(let index=0;index<length;index++){const node=element.children[index];if(node.nodeName.toLowerCase()!==multilineTag)continue;const value=createFromElement({element:node,range,multilineTag,multilineWrapperTags,currentWrapperTags,isEditableTree,preserveWhiteSpace});(0!==index||currentWrapperTags.length>0)&&mergePair(accumulator,{formats:[,],replacements:currentWrapperTags.length>0?[currentWrapperTags]:[,],text:LINE_SEPARATOR}),accumulateSelection(accumulator,node,range,value),mergePair(accumulator,value)}return accumulator}function getAttributes({element}){if(!element.hasAttributes())return;const length=element.attributes.length;let accumulator;for(let i=0;i<length;i++){const{name,value}=element.attributes[i];if(0===name.indexOf("data-rich-text-"))continue;accumulator=accumulator||{},accumulator[/^on/i.test(name)?"data-disable-rich-text-"+name:name]=value}return accumulator}function mergePair(a,b){return a.formats=a.formats.concat(b.formats),a.replacements=a.replacements.concat(b.replacements),a.text+=b.text,a}function concat(...values){return normaliseFormats(values.reduce(mergePair,create()))}function getActiveFormats(value,EMPTY_ACTIVE_FORMATS=[]){const{formats,start,end,activeFormats}=value;if(void 0===start)return EMPTY_ACTIVE_FORMATS;if(start===end){if(activeFormats)return activeFormats;const formatsBefore=formats[start-1]||EMPTY_ACTIVE_FORMATS,formatsAfter=formats[start]||EMPTY_ACTIVE_FORMATS;return formatsBefore.length<formatsAfter.length?formatsBefore:formatsAfter}if(!formats[start])return EMPTY_ACTIVE_FORMATS;const selectedFormats=formats.slice(start,end),_activeFormats=[...selectedFormats[0]];let i=selectedFormats.length;for(;i--;){const formatsAtIndex=selectedFormats[i];if(!formatsAtIndex)return EMPTY_ACTIVE_FORMATS;let ii=_activeFormats.length;for(;ii--;){const format=_activeFormats[ii];formatsAtIndex.find((_format=>isFormatEqual(format,_format)))||_activeFormats.splice(ii,1)}if(0===_activeFormats.length)return EMPTY_ACTIVE_FORMATS}return _activeFormats||EMPTY_ACTIVE_FORMATS}function getActiveFormat(value,formatType){return getActiveFormats(value).find((({type})=>type===formatType))}function getActiveObject({start,end,replacements,text}){if(start+1===end&&text[start]===OBJECT_REPLACEMENT_CHARACTER)return replacements[start]}const pattern=new RegExp(`[${OBJECT_REPLACEMENT_CHARACTER}${LINE_SEPARATOR}]`,"g");function getTextContent({text}){return text.replace(pattern,(c=>c===OBJECT_REPLACEMENT_CHARACTER?"":"\n"))}function isCollapsed({start,end}){if(void 0!==start&&void 0!==end)return start===end}function isEmpty({text}){return 0===text.length}function isEmptyLine({text,start,end}){return start===end&&(0===text.length||(0===start&&text.slice(0,1)===LINE_SEPARATOR||(start===text.length&&text.slice(-1)===LINE_SEPARATOR||text.slice(start-1,end+1)===`${LINE_SEPARATOR}${LINE_SEPARATOR}`)))}function join(values,separator=""){return"string"==typeof separator&&(separator=create({text:separator})),normaliseFormats(values.reduce(((accumlator,{formats,replacements,text})=>({formats:accumlator.formats.concat(separator.formats,formats),replacements:accumlator.replacements.concat(separator.replacements,replacements),text:accumlator.text+separator.text+text}))))}var dispatch=__webpack_require__("./packages/data/build-module/dispatch.js");function registerFormatType(name,settings){if("string"==typeof(settings={name,...settings}).name)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(settings.name))if((0,build_module_select.Y)(store).getFormatType(settings.name))window.console.error('Format "'+settings.name+'" is already registered.');else if("string"==typeof settings.tagName&&""!==settings.tagName)if("string"==typeof settings.className&&""!==settings.className||null===settings.className)if(/^[_a-zA-Z]+[a-zA-Z0-9-]*$/.test(settings.className)){if(null===settings.className){const formatTypeForBareElement=(0,build_module_select.Y)(store).getFormatTypeForBareElement(settings.tagName);if(formatTypeForBareElement&&"core/unknown"!==formatTypeForBareElement.name)return void window.console.error(`Format "${formatTypeForBareElement.name}" is already registered to handle bare tag name "${settings.tagName}".`)}else{const formatTypeForClassName=(0,build_module_select.Y)(store).getFormatTypeForClassName(settings.className);if(formatTypeForClassName)return void window.console.error(`Format "${formatTypeForClassName.name}" is already registered to handle class name "${settings.className}".`)}if("title"in settings&&""!==settings.title)if("keywords"in settings&&settings.keywords.length>3)window.console.error('The format "'+settings.name+'" can have a maximum of 3 keywords.');else{if("string"==typeof settings.title)return(0,dispatch.W)(store).addFormatTypes(settings),settings;window.console.error("Format titles must be strings.")}else window.console.error('The format "'+settings.name+'" must have a title.')}else window.console.error("A class name must begin with a letter, followed by any number of hyphens, letters, or numbers.");else window.console.error("Format class names must be a string, or null to handle bare elements.");else window.console.error("Format tag names must be a string.");else window.console.error("Format names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-format");else window.console.error("Format names must be strings.")}function removeFormat(value,formatType,startIndex=value.start,endIndex=value.end){const{formats,activeFormats}=value,newFormats=formats.slice();if(startIndex===endIndex){const format=newFormats[startIndex]?.find((({type})=>type===formatType));if(format){for(;newFormats[startIndex]?.find((newFormat=>newFormat===format));)filterFormats(newFormats,startIndex,formatType),startIndex--;for(endIndex++;newFormats[endIndex]?.find((newFormat=>newFormat===format));)filterFormats(newFormats,endIndex,formatType),endIndex++}}else for(let i=startIndex;i<endIndex;i++)newFormats[i]&&filterFormats(newFormats,i,formatType);return normaliseFormats({...value,formats:newFormats,activeFormats:activeFormats?.filter((({type})=>type!==formatType))||[]})}function filterFormats(formats,index,formatType){const newFormats=formats[index].filter((({type})=>type!==formatType));newFormats.length?formats[index]=newFormats:delete formats[index]}function insert(value,valueToInsert,startIndex=value.start,endIndex=value.end){const{formats,replacements,text}=value;"string"==typeof valueToInsert&&(valueToInsert=create({text:valueToInsert}));const index=startIndex+valueToInsert.text.length;return normaliseFormats({formats:formats.slice(0,startIndex).concat(valueToInsert.formats,formats.slice(endIndex)),replacements:replacements.slice(0,startIndex).concat(valueToInsert.replacements,replacements.slice(endIndex)),text:text.slice(0,startIndex)+valueToInsert.text+text.slice(endIndex),start:index,end:index})}function remove(value,startIndex,endIndex){return insert(value,create(),startIndex,endIndex)}function replace_replace({formats,replacements,text,start,end},pattern,replacement){return text=text.replace(pattern,((match,...rest)=>{const offset=rest[rest.length-2];let newFormats,newReplacements,newText=replacement;return"function"==typeof newText&&(newText=replacement(match,...rest)),"object"==typeof newText?(newFormats=newText.formats,newReplacements=newText.replacements,newText=newText.text):(newFormats=Array(newText.length),newReplacements=Array(newText.length),formats[offset]&&(newFormats=newFormats.fill(formats[offset]))),formats=formats.slice(0,offset).concat(newFormats,formats.slice(offset+match.length)),replacements=replacements.slice(0,offset).concat(newReplacements,replacements.slice(offset+match.length)),start&&(start=end=offset+newText.length),newText})),normaliseFormats({formats,replacements,text,start,end})}function insertLineSeparator(value,startIndex=value.start,endIndex=value.end){const previousLineSeparatorIndex=value.text.slice(0,startIndex).lastIndexOf(LINE_SEPARATOR),previousLineSeparatorFormats=value.replacements[previousLineSeparatorIndex];let replacements=[,];previousLineSeparatorFormats&&(replacements=[previousLineSeparatorFormats]);return insert(value,{formats:[,],replacements,text:LINE_SEPARATOR},startIndex,endIndex)}function insertObject(value,formatToInsert,startIndex,endIndex){return insert(value,{formats:[,],replacements:[formatToInsert],text:OBJECT_REPLACEMENT_CHARACTER},startIndex,endIndex)}function slice(value,startIndex=value.start,endIndex=value.end){const{formats,replacements,text}=value;return void 0===startIndex||void 0===endIndex?{...value}:{formats:formats.slice(startIndex,endIndex),replacements:replacements.slice(startIndex,endIndex),text:text.slice(startIndex,endIndex)}}function split({formats,replacements,text,start,end},string){if("string"!=typeof string)return function splitAtSelection({formats,replacements,text,start,end},startIndex=start,endIndex=end){if(void 0===start||void 0===end)return;const before={formats:formats.slice(0,startIndex),replacements:replacements.slice(0,startIndex),text:text.slice(0,startIndex)},after={formats:formats.slice(endIndex),replacements:replacements.slice(endIndex),text:text.slice(endIndex),start:0,end:0};return[replace_replace(before,/\u2028+$/,""),replace_replace(after,/^\u2028+/,"")]}(...arguments);let nextStart=0;return text.split(string).map((substring=>{const startIndex=nextStart,value={formats:formats.slice(startIndex,startIndex+substring.length),replacements:replacements.slice(startIndex,startIndex+substring.length),text:substring};return nextStart+=string.length+substring.length,void 0!==start&&void 0!==end&&(start>=startIndex&&start<nextStart?value.start=start-startIndex:start<startIndex&&end>startIndex&&(value.start=0),end>=startIndex&&end<nextStart?value.end=end-startIndex:start<nextStart&&end>nextStart&&(value.end=substring.length)),value}))}var escape_html_build_module=__webpack_require__("./packages/escape-html/build-module/index.js");function restoreOnAttributes(attributes,isEditableTree){if(isEditableTree)return attributes;const newAttributes={};for(const key in attributes){let newKey=key;key.startsWith("data-disable-rich-text-")&&(newKey=key.slice(23)),newAttributes[newKey]=attributes[key]}return newAttributes}function fromFormat({type,tagName,attributes,unregisteredAttributes,object,boundaryClass,isEditableTree}){const formatType=function get_format_type_getFormatType(name){return(0,build_module_select.Y)(store).getFormatType(name)}(type);let elementAttributes={};if(boundaryClass&&(elementAttributes["data-rich-text-format-boundary"]="true"),!formatType)return attributes&&(elementAttributes={...attributes,...elementAttributes}),{type,attributes:restoreOnAttributes(elementAttributes,isEditableTree),object};elementAttributes={...unregisteredAttributes,...elementAttributes};for(const name in attributes){const key=!!formatType.attributes&&formatType.attributes[name];key?elementAttributes[key]=attributes[name]:elementAttributes[name]=attributes[name]}return formatType.className&&(elementAttributes.class?elementAttributes.class=`${formatType.className} ${elementAttributes.class}`:elementAttributes.class=formatType.className),{type:"*"===formatType.tagName?tagName:formatType.tagName,object:formatType.object,attributes:restoreOnAttributes(elementAttributes,isEditableTree)}}function isEqualUntil(a,b,index){do{if(a[index]!==b[index])return!1}while(index--);return!0}function toTree({value,multilineTag,preserveWhiteSpace,createEmpty,append,getLastChild,getParent,isText,getText,remove,appendText,onStartIndex,onEndIndex,isEditableTree,placeholder}){const{formats,replacements,text,start,end}=value,formatsLength=formats.length+1,tree=createEmpty(),multilineFormat={type:multilineTag},activeFormats=getActiveFormats(value),deepestActiveFormat=activeFormats[activeFormats.length-1];let lastSeparatorFormats,lastCharacterFormats,lastCharacter;multilineTag?(append(append(tree,{type:multilineTag}),""),lastCharacterFormats=lastSeparatorFormats=[multilineFormat]):append(tree,"");for(let i=0;i<formatsLength;i++){const character=text.charAt(i),shouldInsertPadding=isEditableTree&&(!lastCharacter||lastCharacter===LINE_SEPARATOR||"\n"===lastCharacter);let characterFormats=formats[i];multilineTag&&(characterFormats=character===LINE_SEPARATOR?lastSeparatorFormats=(replacements[i]||[]).reduce(((accumulator,format)=>(accumulator.push(format,multilineFormat),accumulator)),[multilineFormat]):[...lastSeparatorFormats,...characterFormats||[]]);let pointer=getLastChild(tree);if(shouldInsertPadding&&character===LINE_SEPARATOR){let node=pointer;for(;!isText(node);)node=getLastChild(node);append(getParent(node),ZWNBSP)}if(lastCharacter===LINE_SEPARATOR){let node=pointer;for(;!isText(node);)node=getLastChild(node);onStartIndex&&start===i&&onStartIndex(tree,node),onEndIndex&&end===i&&onEndIndex(tree,node)}characterFormats&&characterFormats.forEach(((format,formatIndex)=>{if(pointer&&lastCharacterFormats&&isEqualUntil(characterFormats,lastCharacterFormats,formatIndex)&&(character!==LINE_SEPARATOR||characterFormats.length-1!==formatIndex))return void(pointer=getLastChild(pointer));const{type,tagName,attributes,unregisteredAttributes}=format,boundaryClass=isEditableTree&&character!==LINE_SEPARATOR&&format===deepestActiveFormat,parent=getParent(pointer),newNode=append(parent,fromFormat({type,tagName,attributes,unregisteredAttributes,boundaryClass,isEditableTree}));isText(pointer)&&0===getText(pointer).length&&remove(pointer),pointer=append(newNode,"")})),character!==LINE_SEPARATOR?(0===i&&(onStartIndex&&0===start&&onStartIndex(tree,pointer),onEndIndex&&0===end&&onEndIndex(tree,pointer)),character===OBJECT_REPLACEMENT_CHARACTER?(isEditableTree||"script"!==replacements[i]?.type?pointer=append(getParent(pointer),fromFormat({...replacements[i],object:!0,isEditableTree})):(pointer=append(getParent(pointer),fromFormat({type:"script",isEditableTree})),append(pointer,{html:decodeURIComponent(replacements[i].attributes["data-rich-text-script"])})),pointer=append(getParent(pointer),"")):preserveWhiteSpace||"\n"!==character?isText(pointer)?appendText(pointer,character):pointer=append(getParent(pointer),character):(pointer=append(getParent(pointer),{type:"br",attributes:isEditableTree?{"data-rich-text-line-break":"true"}:void 0,object:!0}),pointer=append(getParent(pointer),"")),onStartIndex&&start===i+1&&onStartIndex(tree,pointer),onEndIndex&&end===i+1&&onEndIndex(tree,pointer),shouldInsertPadding&&i===text.length&&(append(getParent(pointer),ZWNBSP),placeholder&&0===text.length&&append(getParent(pointer),{type:"span",attributes:{"data-rich-text-placeholder":placeholder,contenteditable:"false",style:"pointer-events:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;"}})),lastCharacterFormats=characterFormats,lastCharacter=character):(lastCharacterFormats=characterFormats,lastCharacter=character)}return tree}function toHTMLString({value,multilineTag,preserveWhiteSpace}){return createChildrenHTML(toTree({value,multilineTag,preserveWhiteSpace,createEmpty,append,getLastChild,getParent,isText,getText,remove:to_html_string_remove,appendText}).children)}function createEmpty(){return{}}function getLastChild({children}){return children&&children[children.length-1]}function append(parent,object){return"string"==typeof object&&(object={text:object}),object.parent=parent,parent.children=parent.children||[],parent.children.push(object),object}function appendText(object,text){object.text+=text}function getParent({parent}){return parent}function isText({text}){return"string"==typeof text}function getText({text}){return text}function to_html_string_remove(object){const index=object.parent.children.indexOf(object);return-1!==index&&object.parent.children.splice(index,1),object}function createChildrenHTML(children=[]){return children.map((child=>void 0!==child.html?child.html:void 0===child.text?function createElementHTML({type,attributes,object,children}){let attributeString="";for(const key in attributes)(0,escape_html_build_module.$b)(key)&&(attributeString+=` ${key}="${(0,escape_html_build_module.kb)(attributes[key])}"`);return object?`<${type}${attributeString}>`:`<${type}${attributeString}>${createChildrenHTML(children)}</${type}>`}(child):(0,escape_html_build_module.N2)(child.text))).join("")}var a11y_build_module=__webpack_require__("./packages/a11y/build-module/index.js"),i18n_build_module=__webpack_require__("./packages/i18n/build-module/index.js");function toggleFormat(value,format){return getActiveFormat(value,format.type)?(format.title&&(0,a11y_build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module.__)("%s removed."),format.title),"assertive"),removeFormat(value,format.type)):(format.title&&(0,a11y_build_module.D)((0,i18n_build_module.gB)((0,i18n_build_module.__)("%s applied."),format.title),"assertive"),applyFormat(value,format))}var react=__webpack_require__("./node_modules/react/index.js");function getAnchor(editableContentElement,tagName,className){if(!editableContentElement)return;const{ownerDocument}=editableContentElement,{defaultView}=ownerDocument,selection=defaultView.getSelection();if(!selection)return;if(!selection.rangeCount)return;const range=selection.getRangeAt(0);if(!range||!range.startContainer)return;const formatElement=function getFormatElement(range,editableContentElement,tagName,className){let element=range.startContainer;if(element=element.nextElementSibling||element,element.nodeType!==element.ELEMENT_NODE&&(element=element.parentElement),!element)return;if(element===editableContentElement)return;if(!editableContentElement.contains(element))return;const selector=tagName+(className?"."+className:"");for(;element!==editableContentElement;){if(element.matches(selector))return element;element=element.parentElement}}(range,editableContentElement,tagName,className);return formatElement||function createVirtualAnchorElement(range,editableContentElement){return{ownerDocument:range.startContainer.ownerDocument,getBoundingClientRect:()=>editableContentElement.contains(range.startContainer)?range.getBoundingClientRect():editableContentElement.getBoundingClientRect()}}(range,editableContentElement)}function useAnchor({editableContentElement,settings={}}){const{tagName,className}=settings,[anchor,setAnchor]=(0,react.useState)((()=>getAnchor(editableContentElement,tagName,className)));return(0,react.useLayoutEffect)((()=>{if(!editableContentElement)return;const{ownerDocument}=editableContentElement;function callback(){setAnchor(getAnchor(editableContentElement,tagName,className))}function attach(){ownerDocument.addEventListener("selectionchange",callback)}function detach(){ownerDocument.removeEventListener("selectionchange",callback)}return editableContentElement===ownerDocument.activeElement&&attach(),editableContentElement.addEventListener("focusin",attach),editableContentElement.addEventListener("focusout",detach),detach}),[editableContentElement,tagName,className]),anchor}var use_merge_refs=__webpack_require__("./packages/compose/build-module/hooks/use-merge-refs/index.js"),use_ref_effect=__webpack_require__("./packages/compose/build-module/hooks/use-ref-effect/index.js"),use_registry=__webpack_require__("./packages/data/build-module/components/registry-provider/use-registry.js");function isRangeEqual(a,b){return a===b||a&&b&&a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}function createPathToNode(node,rootNode,path){const parentNode=node.parentNode;let i=0;for(;node=node.previousSibling;)i++;return path=[i,...path],parentNode!==rootNode&&(path=createPathToNode(parentNode,rootNode,path)),path}function getNodeByPath(node,path){for(path=[...path];node&&path.length>1;)node=node.childNodes[path.shift()];return{node,offset:path[0]}}function to_dom_append(element,child){"string"==typeof child&&(child=element.ownerDocument.createTextNode(child));const{type,attributes}=child;if(type){child=element.ownerDocument.createElement(type);for(const key in attributes)child.setAttribute(key,attributes[key])}return element.appendChild(child)}function to_dom_appendText(node,text){node.appendData(text)}function to_dom_getLastChild({lastChild}){return lastChild}function to_dom_getParent({parentNode}){return parentNode}function to_dom_isText(node){return node.nodeType===node.TEXT_NODE}function to_dom_getText({nodeValue}){return nodeValue}function to_dom_remove(node){return node.parentNode.removeChild(node)}function apply({value,current,multilineTag,prepareEditableTree,__unstableDomOnly,placeholder}){const{body,selection}=function toDom({value,multilineTag,prepareEditableTree,isEditableTree=!0,placeholder,doc=document}){let startPath=[],endPath=[];return prepareEditableTree&&(value={...value,formats:prepareEditableTree(value)}),{body:toTree({value,multilineTag,createEmpty:()=>createElement(doc,""),append:to_dom_append,getLastChild:to_dom_getLastChild,getParent:to_dom_getParent,isText:to_dom_isText,getText:to_dom_getText,remove:to_dom_remove,appendText:to_dom_appendText,onStartIndex(body,pointer){startPath=createPathToNode(pointer,body,[pointer.nodeValue.length])},onEndIndex(body,pointer){endPath=createPathToNode(pointer,body,[pointer.nodeValue.length])},isEditableTree,placeholder}),selection:{startPath,endPath}}}({value,multilineTag,prepareEditableTree,placeholder,doc:current.ownerDocument});applyValue(body,current),void 0===value.start||__unstableDomOnly||function applySelection({startPath,endPath},current){const{node:startContainer,offset:startOffset}=getNodeByPath(current,startPath),{node:endContainer,offset:endOffset}=getNodeByPath(current,endPath),{ownerDocument}=current,{defaultView}=ownerDocument,selection=defaultView.getSelection(),range=ownerDocument.createRange();range.setStart(startContainer,startOffset),range.setEnd(endContainer,endOffset);const{activeElement}=ownerDocument;if(selection.rangeCount>0){if(isRangeEqual(range,selection.getRangeAt(0)))return;selection.removeAllRanges()}selection.addRange(range),activeElement!==ownerDocument.activeElement&&activeElement instanceof defaultView.HTMLElement&&activeElement.focus()}(selection,current)}function applyValue(future,current){let futureChild,i=0;for(;futureChild=future.firstChild;){const currentChild=current.childNodes[i];if(currentChild)if(currentChild.isEqualNode(futureChild))future.removeChild(futureChild);else if(currentChild.nodeName!==futureChild.nodeName||currentChild.nodeType===currentChild.TEXT_NODE&&currentChild.data!==futureChild.data)current.replaceChild(futureChild,currentChild);else{const currentAttributes=currentChild.attributes,futureAttributes=futureChild.attributes;if(currentAttributes){let ii=currentAttributes.length;for(;ii--;){const{name}=currentAttributes[ii];futureChild.getAttribute(name)||currentChild.removeAttribute(name)}}if(futureAttributes)for(let ii=0;ii<futureAttributes.length;ii++){const{name,value}=futureAttributes[ii];currentChild.getAttribute(name)!==value&&currentChild.setAttribute(name,value)}applyValue(futureChild,currentChild),future.removeChild(futureChild)}else current.appendChild(futureChild);i++}for(;current.childNodes[i];)current.removeChild(current.childNodes[i])}const whiteSpace="pre-wrap",minWidth="1px";function useBoundaryStyle({record}){const ref=(0,react.useRef)(),{activeFormats=[]}=record.current;return(0,react.useEffect)((()=>{if(!activeFormats||!activeFormats.length)return;const element=ref.current.querySelector("*[data-rich-text-format-boundary]");if(!element)return;const{ownerDocument}=element,{defaultView}=ownerDocument,style=`.rich-text:focus *[data-rich-text-format-boundary] {${`background-color: ${defaultView.getComputedStyle(element).color.replace(")",", 0.2)").replace("rgb","rgba")}`}}`;let globalStyle=ownerDocument.getElementById("rich-text-boundary-style");globalStyle||(globalStyle=ownerDocument.createElement("style"),globalStyle.id="rich-text-boundary-style",ownerDocument.head.appendChild(globalStyle)),globalStyle.innerHTML!==style&&(globalStyle.innerHTML=style)}),[activeFormats]),ref}function useCopyHandler(props){const propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function onCopy(event){const{record,multilineTag,preserveWhiteSpace}=propsRef.current;if(isCollapsed(record.current)||!element.contains(element.ownerDocument.activeElement))return;const selectedRecord=slice(record.current),plainText=getTextContent(selectedRecord),html=toHTMLString({value:selectedRecord,multilineTag,preserveWhiteSpace});event.clipboardData.setData("text/plain",plainText),event.clipboardData.setData("text/html",html),event.clipboardData.setData("rich-text","true"),event.clipboardData.setData("rich-text-multi-line-tag",multilineTag||""),event.preventDefault()}return element.addEventListener("copy",onCopy),()=>{element.removeEventListener("copy",onCopy)}}),[])}var keycodes_build_module=__webpack_require__("./packages/keycodes/build-module/index.js");const EMPTY_ACTIVE_FORMATS=[];function useFormatBoundaries(props){const[,forceRender]=(0,react.useReducer)((()=>({}))),propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function onKeyDown(event){const{keyCode,shiftKey,altKey,metaKey,ctrlKey}=event;if(shiftKey||altKey||metaKey||ctrlKey||keyCode!==keycodes_build_module.RL&&keyCode!==keycodes_build_module.pX)return;const{record,applyRecord}=propsRef.current,{text,formats,start,end,activeFormats:currentActiveFormats=[]}=record.current,collapsed=isCollapsed(record.current),{ownerDocument}=element,{defaultView}=ownerDocument,{direction}=defaultView.getComputedStyle(element),reverseKey="rtl"===direction?keycodes_build_module.pX:keycodes_build_module.RL,isReverse=event.keyCode===reverseKey;if(collapsed&&0===currentActiveFormats.length){if(0===start&&isReverse)return;if(end===text.length&&!isReverse)return}if(!collapsed)return;const formatsBefore=formats[start-1]||EMPTY_ACTIVE_FORMATS,formatsAfter=formats[start]||EMPTY_ACTIVE_FORMATS,destination=isReverse?formatsBefore:formatsAfter,isIncreasing=currentActiveFormats.every(((format,index)=>format===destination[index]));let newActiveFormatsLength=currentActiveFormats.length;if(isIncreasing?newActiveFormatsLength<destination.length&&newActiveFormatsLength++:newActiveFormatsLength--,newActiveFormatsLength===currentActiveFormats.length)return void(record.current._newActiveFormats=destination);event.preventDefault();const newActiveFormats=(isIncreasing?destination:isReverse?formatsAfter:formatsBefore).slice(0,newActiveFormatsLength),newValue={...record.current,activeFormats:newActiveFormats};record.current=newValue,applyRecord(newValue),forceRender()}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}}),[])}const INSERTION_INPUT_TYPES_TO_IGNORE=new Set(["insertParagraph","insertOrderedList","insertUnorderedList","insertHorizontalRule","insertLink"]),use_input_and_selection_EMPTY_ACTIVE_FORMATS=[],PLACEHOLDER_ATTR_NAME="data-rich-text-placeholder";function useInputAndSelection(props){const propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{const{ownerDocument}=element,{defaultView}=ownerDocument;let isComposing=!1;function onInput(event){if(isComposing)return;let inputType;event&&(inputType=event.inputType);const{record,applyRecord,createRecord,handleChange}=propsRef.current;if(inputType&&(0===inputType.indexOf("format")||INSERTION_INPUT_TYPES_TO_IGNORE.has(inputType)))return void applyRecord(record.current);const currentValue=createRecord(),{start,activeFormats:oldActiveFormats=[]}=record.current,change=function updateFormats({value,start,end,formats}){const min=Math.min(start,end),max=Math.max(start,end),formatsBefore=value.formats[min-1]||[],formatsAfter=value.formats[max]||[];for(value.activeFormats=formats.map(((format,index)=>{if(formatsBefore[index]){if(isFormatEqual(format,formatsBefore[index]))return formatsBefore[index]}else if(formatsAfter[index]&&isFormatEqual(format,formatsAfter[index]))return formatsAfter[index];return format}));--end>=start;)value.activeFormats.length>0?value.formats[end]=value.activeFormats:delete value.formats[end];return value}({value:currentValue,start,end:currentValue.start,formats:oldActiveFormats});handleChange(change)}function handleSelectionChange(){const{record,applyRecord,createRecord,onSelectionChange}=propsRef.current;if("true"!==element.contentEditable)return;if(ownerDocument.activeElement!==element){if("true"!==ownerDocument.activeElement.contentEditable)return;if(!ownerDocument.activeElement.contains(element))return;const selection=defaultView.getSelection(),{anchorNode,focusNode}=selection;if(element.contains(anchorNode)&&element!==anchorNode&&element.contains(focusNode)&&element!==focusNode){const{start,end}=createRecord();record.current.activeFormats=use_input_and_selection_EMPTY_ACTIVE_FORMATS,onSelectionChange(start,end)}else if(element.contains(anchorNode)&&element!==anchorNode){const{start,end:offset=start}=createRecord();record.current.activeFormats=use_input_and_selection_EMPTY_ACTIVE_FORMATS,onSelectionChange(offset)}else if(element.contains(focusNode)){const{start,end:offset=start}=createRecord();record.current.activeFormats=use_input_and_selection_EMPTY_ACTIVE_FORMATS,onSelectionChange(void 0,offset)}return}if(isComposing)return;const{start,end,text}=createRecord(),oldRecord=record.current;if(text!==oldRecord.text)return void onInput();if(start===oldRecord.start&&end===oldRecord.end)return void(0===oldRecord.text.length&&0===start&&function fixPlaceholderSelection(defaultView){const selection=defaultView.getSelection(),{anchorNode,anchorOffset}=selection;if(anchorNode.nodeType!==anchorNode.ELEMENT_NODE)return;const targetNode=anchorNode.childNodes[anchorOffset];targetNode&&targetNode.nodeType===targetNode.ELEMENT_NODE&&targetNode.hasAttribute(PLACEHOLDER_ATTR_NAME)&&selection.collapseToStart()}(defaultView));const newValue={...oldRecord,start,end,activeFormats:oldRecord._newActiveFormats,_newActiveFormats:void 0},newActiveFormats=getActiveFormats(newValue,use_input_and_selection_EMPTY_ACTIVE_FORMATS);newValue.activeFormats=newActiveFormats,record.current=newValue,applyRecord(newValue,{domOnly:!0}),onSelectionChange(start,end)}function onCompositionStart(){isComposing=!0,ownerDocument.removeEventListener("selectionchange",handleSelectionChange),element.querySelector(`[${PLACEHOLDER_ATTR_NAME}]`)?.remove()}function onCompositionEnd(){isComposing=!1,onInput({inputType:"insertText"}),ownerDocument.addEventListener("selectionchange",handleSelectionChange)}function onFocus(){const{record,isSelected,onSelectionChange,applyRecord}=propsRef.current;if(!element.parentElement.closest('[contenteditable="true"]'))if(isSelected)applyRecord(record.current),onSelectionChange(record.current.start,record.current.end);else{const index=void 0;record.current={...record.current,start:index,end:index,activeFormats:use_input_and_selection_EMPTY_ACTIVE_FORMATS}}}return element.addEventListener("input",onInput),element.addEventListener("compositionstart",onCompositionStart),element.addEventListener("compositionend",onCompositionEnd),element.addEventListener("focus",onFocus),ownerDocument.addEventListener("selectionchange",handleSelectionChange),()=>{element.removeEventListener("input",onInput),element.removeEventListener("compositionstart",onCompositionStart),element.removeEventListener("compositionend",onCompositionEnd),element.removeEventListener("focus",onFocus),ownerDocument.removeEventListener("selectionchange",handleSelectionChange)}}),[])}function removeLineSeparator(value,backward=!0){const{replacements,text,start,end}=value,collapsed=isCollapsed(value);let newValue,index=start-1,removeStart=collapsed?start-1:start,removeEnd=end;if(backward||(index=end,removeStart=start,removeEnd=collapsed?end+1:end),text[index]===LINE_SEPARATOR){if(collapsed&&replacements[index]&&replacements[index].length){const newReplacements=replacements.slice();newReplacements[index]=replacements[index].slice(0,-1),newValue={...value,replacements:newReplacements}}else newValue=remove(value,removeStart,removeEnd);return newValue}}function useDelete(props){const propsRef=(0,react.useRef)(props);return propsRef.current=props,(0,use_ref_effect.Z)((element=>{function onKeyDown(event){const{keyCode}=event,{createRecord,handleChange,multilineTag}=propsRef.current;if(event.defaultPrevented)return;if(keyCode!==keycodes_build_module.yY&&keyCode!==keycodes_build_module.ZH)return;const currentValue=createRecord(),{start,end,text}=currentValue,isReverse=keyCode===keycodes_build_module.ZH;if(0===start&&0!==end&&end===text.length)return handleChange(remove(currentValue)),void event.preventDefault();if(multilineTag){let newValue;newValue=isReverse&&0===currentValue.start&&0===currentValue.end&&isEmptyLine(currentValue)?removeLineSeparator(currentValue,!isReverse):removeLineSeparator(currentValue,isReverse),newValue&&(handleChange(newValue),event.preventDefault())}}return element.addEventListener("keydown",onKeyDown),()=>{element.removeEventListener("keydown",onKeyDown)}}),[])}function useRichText({value="",selectionStart,selectionEnd,placeholder,preserveWhiteSpace,onSelectionChange,onChange,__unstableMultilineTag:multilineTag,__unstableDisableFormats:disableFormats,__unstableIsSelected:isSelected,__unstableDependencies=[],__unstableAfterParse,__unstableBeforeSerialize,__unstableAddInvisibleFormats}){const registry=(0,use_registry.Z)(),[,forceRender]=(0,react.useReducer)((()=>({}))),ref=(0,react.useRef)();function createRecord(){const{ownerDocument:{defaultView}}=ref.current,selection=defaultView.getSelection(),range=selection.rangeCount>0?selection.getRangeAt(0):null;return create({element:ref.current,range,multilineTag,multilineWrapperTags:"li"===multilineTag?["ul","ol"]:void 0,__unstableIsEditableTree:!0,preserveWhiteSpace})}function applyRecord(newRecord,{domOnly}={}){apply({value:newRecord,current:ref.current,multilineTag,multilineWrapperTags:"li"===multilineTag?["ul","ol"]:void 0,prepareEditableTree:__unstableAddInvisibleFormats,__unstableDomOnly:domOnly,placeholder})}const _value=(0,react.useRef)(value),record=(0,react.useRef)();function setRecordFromProps(){_value.current=value,record.current=create({html:value,multilineTag,multilineWrapperTags:"li"===multilineTag?["ul","ol"]:void 0,preserveWhiteSpace}),disableFormats&&(record.current.formats=Array(value.length),record.current.replacements=Array(value.length)),__unstableAfterParse&&(record.current.formats=__unstableAfterParse(record.current)),record.current.start=selectionStart,record.current.end=selectionEnd}const hadSelectionUpdate=(0,react.useRef)(!1);if(record.current)selectionStart===record.current.start&&selectionEnd===record.current.end||(hadSelectionUpdate.current=isSelected,record.current={...record.current,start:selectionStart,end:selectionEnd});else{setRecordFromProps();"core/text-color"===record.current?.formats[0]?.[0]?.type&&function handleChangesUponInit(newRecord){record.current=newRecord,_value.current=toHTMLString({value:__unstableBeforeSerialize?{...newRecord,formats:__unstableBeforeSerialize(newRecord)}:newRecord,multilineTag,preserveWhiteSpace});const{formats,text}=newRecord;registry.batch((()=>{onChange(_value.current,{__unstableFormats:formats,__unstableText:text})})),forceRender()}(record.current)}function handleChange(newRecord){record.current=newRecord,applyRecord(newRecord),_value.current=disableFormats?newRecord.text:toHTMLString({value:__unstableBeforeSerialize?{...newRecord,formats:__unstableBeforeSerialize(newRecord)}:newRecord,multilineTag,preserveWhiteSpace});const{start,end,formats,text}=newRecord;registry.batch((()=>{onSelectionChange(start,end),onChange(_value.current,{__unstableFormats:formats,__unstableText:text})})),forceRender()}function applyFromProps(){setRecordFromProps(),applyRecord(record.current)}const didMount=(0,react.useRef)(!1);(0,react.useLayoutEffect)((()=>{didMount.current&&value!==_value.current&&(applyFromProps(),forceRender())}),[value]),(0,react.useLayoutEffect)((()=>{hadSelectionUpdate.current&&(ref.current.ownerDocument.activeElement!==ref.current&&ref.current.focus(),applyFromProps(),hadSelectionUpdate.current=!1)}),[hadSelectionUpdate.current]);const mergedRefs=(0,use_merge_refs.Z)([ref,(0,react.useCallback)((element=>{element&&(element.style.whiteSpace=whiteSpace,element.style.minWidth=minWidth)}),[]),useBoundaryStyle({record}),useCopyHandler({record,multilineTag,preserveWhiteSpace}),(0,use_ref_effect.Z)((element=>{function onClick(event){const{target}=event;if(target===element||target.textContent)return;const{ownerDocument}=target,{defaultView}=ownerDocument,range=ownerDocument.createRange(),selection=defaultView.getSelection();range.selectNode(target),selection.removeAllRanges(),selection.addRange(range)}return element.addEventListener("click",onClick),()=>{element.removeEventListener("click",onClick)}}),[]),useFormatBoundaries({record,applyRecord}),useDelete({createRecord,handleChange,multilineTag}),useInputAndSelection({record,applyRecord,createRecord,handleChange,isSelected,onSelectionChange}),(0,use_ref_effect.Z)((element=>{const{ownerDocument}=element,{defaultView}=ownerDocument,selection=defaultView.getSelection();let range;function getRange(){return selection.rangeCount?selection.getRangeAt(0):null}function onDown(event){const type="keydown"===event.type?"keyup":"pointerup";function onCancel(){ownerDocument.removeEventListener(type,onUp),ownerDocument.removeEventListener("selectionchange",onCancel),ownerDocument.removeEventListener("input",onCancel)}function onUp(){onCancel(),isRangeEqual(range,getRange())||ownerDocument.dispatchEvent(new Event("selectionchange"))}ownerDocument.addEventListener(type,onUp),ownerDocument.addEventListener("selectionchange",onCancel),ownerDocument.addEventListener("input",onCancel),range=getRange()}return element.addEventListener("pointerdown",onDown),element.addEventListener("keydown",onDown),()=>{element.removeEventListener("pointerdown",onDown),element.removeEventListener("keydown",onDown)}}),[]),(0,use_ref_effect.Z)((()=>{applyFromProps(),didMount.current=!0}),[placeholder,...__unstableDependencies])]);return{value:record.current,getValue:()=>record.current,onChange:handleChange,ref:mergedRefs}}},"./packages/shortcode/build-module/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function next(tag,text,index=0){const re=regexp(tag);re.lastIndex=index;const match=re.exec(text);if(!match)return;if("["===match[1]&&"]"===match[7])return next(tag,text,re.lastIndex);const result={index:match.index,content:match[0],shortcode:fromMatch(match)};return match[1]&&(result.content=result.content.slice(1),result.index++),match[7]&&(result.content=result.content.slice(0,-1)),result}function regexp(tag){return new RegExp("\\[(\\[?)("+tag+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)","g")}__webpack_require__.d(__webpack_exports__,{lp:()=>next,kd:()=>regexp});const attrs=(0,__webpack_require__("./node_modules/memize/dist/index.js").Z)((text=>{const named={},numeric=[],pattern=/([\w-]+)\s*=\s*"([^"]*)"(?:\s|$)|([\w-]+)\s*=\s*'([^']*)'(?:\s|$)|([\w-]+)\s*=\s*([^\s'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|'([^']*)'(?:\s|$)|(\S+)(?:\s|$)/g;let match;for(text=text.replace(/[\u00a0\u200b]/g," ");match=pattern.exec(text);)match[1]?named[match[1].toLowerCase()]=match[2]:match[3]?named[match[3].toLowerCase()]=match[4]:match[5]?named[match[5].toLowerCase()]=match[6]:match[7]?numeric.push(match[7]):match[8]?numeric.push(match[8]):match[9]&&numeric.push(match[9]);return{named,numeric}}));function fromMatch(match){let type;return type=match[4]?"self-closing":match[6]?"closed":"single",new shortcode({tag:match[2],attrs:match[3],type,content:match[5]})}const shortcode=Object.assign((function(options){const{tag,attrs:attributes,type,content}=options||{};if(Object.assign(this,{tag,type,content}),this.attrs={named:{},numeric:[]},!attributes)return;const attributeTypes=["named","numeric"];"string"==typeof attributes?this.attrs=attrs(attributes):attributes.length===attributeTypes.length&&attributeTypes.every(((t,key)=>t===attributes[key]))?this.attrs=attributes:Object.entries(attributes).forEach((([key,value])=>{this.set(key,value)}))}),{next,replace:function replace(tag,text,callback){return text.replace(regexp(tag),(function(match,left,$3,attrs,slash,content,closing,right){if("["===left&&"]"===right)return match;const result=callback(fromMatch(arguments));return result||""===result?left+result+right:match}))},string:function string(options){return new shortcode(options).string()},regexp,attrs,fromMatch});Object.assign(shortcode.prototype,{get(attr){return this.attrs["number"==typeof attr?"numeric":"named"][attr]},set(attr,value){return this.attrs["number"==typeof attr?"numeric":"named"][attr]=value,this},string(){let text="["+this.tag;return this.attrs.numeric.forEach((value=>{/\s/.test(value)?text+=' "'+value+'"':text+=" "+value})),Object.entries(this.attrs.named).forEach((([name,value])=>{text+=" "+name+'="'+value+'"'})),"single"===this.type?text+"]":"self-closing"===this.type?text+" /]":(text+="]",this.content&&(text+=this.content),text+"[/"+this.tag+"]")}})}}]);